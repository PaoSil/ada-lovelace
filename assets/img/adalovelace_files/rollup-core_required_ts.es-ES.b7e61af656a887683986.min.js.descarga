webpackJsonp([25,307,320,352],{168:function(e,a){(function(){TS.registerModule("i18n",{onStart:function e(){g();h();M();if(TS.prefs){TS.prefs.keyboard_changed_sig.add(E);setTimeout(p,0)}if(window.signals)TS.i18n.keyboard_changed_sig=new signals.Signal;else TS.i18n.keyboard_changed_sig={add:function e(){},remove:function e(){},dispatch:function e(){}}},locale:function e(){g();return o},keyboard:function e(){return b()},canAutoGetKeyboard:function e(){if(void 0!==i)return i;i=TS.model&&TS.model.is_our_app&&desktop&&desktop.app&&desktop.app.getLocaleInformation&&desktop.app.getLocaleInformation().currentKeyboardLayout;return i},supportedKeyboards:function e(){return f},getDefaultLocale:function e(){return TS.interop.I18n.DEFAULT_LOCALE},localesEnabled:function e(){var a={};a["de-DE"]="Deutsch";a["en-US"]="English (US)";a["es-ES"]="Español";a["fr-FR"]="Français";if(TS.boot_data.feature_locale_ja_JP)a["ja-JP"]="日本語";if(TS.boot_data.feature_pseudo_locale)a.pseudo="Þsèúδôtřáñsℓátïôñ";return a},localeOrPseudo:function e(){if(t)return"pseudo";return TS.i18n.locale()},isLocaleCJK:function e(){return"ja-JP"===TS.i18n.locale()},zdLocale:function e(){g();var a=TS.interop.I18n.DEFAULT_LOCALE.toLowerCase();if(u&&u[o.toLowerCase()])a=u[o.toLowerCase()];return a},t:function e(r,i){g();if(!i&&a){var s=TS.error?TS.error:console.error;s.call(this,"TS.i18n.t requires a namespace string as the second argument. Currently "+i+".");return function(){return""}}var l=o+":"+i+":"+r;if(void 0===c[l]){if(t||"pseudo"===o)c[l]=new MessageFormat(o,B(r)).format;else{if(a&&i&&window.sha1&&window.tsTranslations&&window.tsTranslations[i]){r=window.tsTranslations[i][window.sha1(r)]||r;r=r.replace(/\[{3}/g,'<span class="no_wrap">').replace(/\]{3}/g,"</span>")}c[l]=new MessageFormat(o,r).format}if(a&&n)c[l].toString=L(l,i)}return c[l]},number:function e(a,n){if(isNaN(a))return NaN;g();return Intl.NumberFormat(o,n).format(a)},percent:function e(a,n){g();return Intl.NumberFormat(o,{style:"percent",maximumFractionDigits:n}).format(a)},sorter:function e(a,n){g();if(!a||!n)return!a?-1:1;if(s)return s.compare(a,n);return a.localeCompare(n)},mappedSorter:function e(a){return function(e,n){if(!e||!n)return!e?-1:1;var t=(""+a).split(".");if(t.length>1)t.forEach(function(a){e=e[a];n=n[a]});else{e=e[a];n=n[a]}return TS.i18n.sorter(e,n)}},possessive:function e(a){g();if(!a)a="";switch(TS.i18n.locale()){case"fr-FR":var n=_.deburr(a);return n.match(/^[aeiouy]/i)?"d’":"de ";case"es-ES":return"de ";case"de-DE":return a.match(/[sßxz]$/i)?"’":"s";case"ja-JP":return"の";default:return"’s"}},fullPossessiveString:function e(a){g();switch(TS.i18n.locale()){case"es-ES":case"fr-FR":return TS.i18n.possessive(a)+a;default:return a+TS.i18n.possessive(a)}},listify:function e(a,n){g();var t;var r=[];var i=a.length;var s=n&&"or"===n.conj?TS.i18n.t("o","general")():TS.i18n.t("y","general")();var l=i>2?",":"";var c=n&&n.strong?"<strong>":"";var u=n&&n.strong?"</strong>":"";var d=n&&n.no_escape;var f=n&&n.item_prefix?n.item_prefix:"";switch(o){case"ja-JP":t=", ";break;case"en-US":t=l+" "+s+" ";break;default:t=" "+s+" "}a.forEach(function(e,a){if(!d)e=_.escape(e);r.push(c+f+e+u);if(a<i-2)r.push(", ");else if(a<i-1)r.push(t)});return r},setUpStaticTranslations:function e(){return S()},getStaticTranslation:function e(a,n){if(!A())return null;var t=TS.storage.fetchStaticTranslations();var o=_.get(t,"data."+n);if(!o||!o[a])return null;return o[a]},keyEquivalent:function e(a){var n=b();if("en-US"===n)return a;if(C[a]&&C[a][n])return C[a][n];return a},keyCodeEquivalent:function e(a){var n=b();if("en-US"===n)return a;if(O[a]&&O[a][n])return O[a][n];return a},keyCodeEquivalentReverse:function e(a){var n=b();if("en-US"===n)return a;if(d[n]&&d[n][a])return d[n][a];return a},start_of_the_week:{"en-US":0},number_abbreviations:{"de-DE":{12:"Bio.",9:"Mrd.",6:"Mio.",3:"Tsd."},"es-ES":{12:"Bill",9:"Mrd",6:"Mill",3:"Mil"},"fr-FR":{12:"T",9:"iG",6:"M",3:"k"},"ja-JP":{12:"兆",9:"億",6:"万",3:"千"},"en-US":{12:"T",9:"B",6:"M",3:"K"}},locales_number_formatting:{default:{decimal_symbol:".",thousands_separator:","},"en-US":{decimal_symbol:".",thousands_separator:","},"es-ES":{decimal_symbol:",",thousands_separator:"."},"fr-FR":{decimal_symbol:",",thousands_separator:" "},"ja-JP":{decimal_symbol:".",thousands_separator:","},"de-DE":{decimal_symbol:",",thousands_separator:"."}},test:{setLocale:function e(a){o=a;if(Intl.Collator)s=Intl.Collator(o);if(window.moment)window.moment.locale(o)}}});var e;var a;var n;var t;var o;var r;var i;var s;var l=0;var c={};var u;var d={};var f={de:"Deutsch","en-US":"English (US)",es:"Español",fr:"Français"};var m=[];var g=function r(){if(e)return;a=location.host.match(/^([^.]+\.)?(?:enterprise\.)?(dev[0-9]*)\.slack\.com/);n=TS.qs_args&&TS.qs_args.local_assets||TS.qs_args&&TS.qs_args.js_path;var i=location.search.match(new RegExp("\\?locale=(.*?)($|&)","i"));if(i)o=i[1];if(!o)o=document.documentElement.lang||_.get(TS,"interop.I18n.DEFAULT_LOCALE","en-US");if("pseudo"===o)t=true;if(Intl.Collator)s=Intl.Collator(o);else s=null;e=true};var p=function e(){if(TS.client&&!TS.prefs.getPref("seen_locale_change_message")){if(window.desktop&&void 0===window.teamId&&l<100){l+=1;setTimeout(e,50);return}if(!window.desktop||window.desktop.reduxHelper&&window.desktop.reduxHelper.isSelectedTeam())TS.api.call("slackbot.sendLocalizationMessage");else{TS.prefs.setPref("seen_locale_change_message",2);TS.prefs.setPrefByAPI({name:"seen_locale_change_message",value:2})}}};var h=function e(){if(TS.boot_data){if(TS.boot_data.slack_to_zd_locale)u=TS.boot_data.slack_to_zd_locale;if(TS.boot_data.feature_locale_ja_JP)f.ja="日本語"}};var S=function e(){if(A())return Promise.resolve();return TS.api.call("i18n.translations.get").then(function(e){var a=e.data;if(!a||!a.ok){TS.error("Failed to fetch static i18n translations, recieved this response: ",e);return}TS.model.static_translations_cache_ts=a.cache_ts;TS.storage.storeStaticTranslations({data:a,cache_ts:TS.model.static_translations_cache_ts,locale:a.locale})})};var b=function e(){if(!r)if(TS.i18n.canAutoGetKeyboard()){r=j(desktop.app.getLocaleInformation().currentKeyboardLayout);desktop.app.onDidChangeKeyboardLayout(x)}else if(TS.prefs.prefs_loaded)r=TS.prefs.getPref("keyboard")||"en-US";else return"en-US";return r};var T=/german/;var v=/french/;var w=/spanish/;var y=/iso/;var k=/japanese/;var j=function e(a){var n=a.toLowerCase();if(T.test(n))return"de";else if(v.test(n))return"fr";else if(w.test(n)&&y.test(n))return"es";else if(TS.boot_data.feature_locale_ja_JP&&k.test(n))return"ja";return"en-US"};var x=function e(a){r=j(a);TS.i18n.keyboard_changed_sig.dispatch()};var E=function e(){if(!TS.model.is_our_app){r=TS.prefs.getPref("keyboard");TS.i18n.keyboard_changed_sig.dispatch()}};var C={"`":{es:"º",fr:"@",de:"^",ja:"@"},"~":{es:"ª",fr:"#",de:"°"},"/":{es:"'",fr:",",de:"ö",ja:"・"},"\\":{es:"¡",fr:"`",de:"#",ja:"_"},".":{fr:";"}};var O={190:{fr:186},191:{es:222,fr:188,de:186},220:{es:187,de:222,ja:189}};var M=function e(){Object.keys(O).forEach(function(e){Object.keys(O[e]).forEach(function(a){d[a]=d[a]||{};d[a][O[e][a]]=parseInt(e,10)})})};var A=function e(){var a=TS.storage.fetchStaticTranslations();if(!a)return false;if(TS.model.static_translations_cache_ts!==a.cache_ts)return false;if(TS.i18n.locale()!==a.locale)return false;return true};var L=function e(a,n){return function(){var e=n+"."+a;if(m.indexOf(e)>=0)return;m.push(e);var t="TS.i18n.t("+JSON.stringify(a)+", "+JSON.stringify(n)+")";TS.console.logStackTrace("Tried to use an i18n function as a string — you probably did "+t+" when you meant to do "+t+"()");alert("Dev-only alert: tried to use an i18n function as a string! See console for stack trace.\n\nNamespace: "+n+"\nString: "+a);return""}};var B=function e(a){var n=false;if(a.endsWith(":")){n=true;a=a.substr(0,a.length-1)}var t=/(<[^>]+>)|(&\w+;)/gi;var o=a.match(t)||[];a=a.replace(t,"<>");var r=parseMessageFormatString(a);if(r.error)TS.error(r.error);var i;a=r.tokens.map(function(e){if("text"===e[0]){i=e[1];_.forOwn(I,function(e){i=i.replace(e[0],e[1])});return i.split(" ").map(function(e){e+=new Array(Math.floor(.3*e.length)+1).join("~");return e}).join(" ")}return e[1]}).join("");a=a.split("<>").map(function(e,a){return e+(o[a]||"")}).join("");if(n)a+=":";return a};var I={a:[/a/g,"á"],b:[/b/g,"β"],c:[/c/g,"ç"],d:[/d/g,"δ"],e:[/e/g,"è"],f:[/f/g,"ƒ"],g:[/g/g,"ϱ"],h:[/h/g,"λ"],i:[/i/g,"ï"],j:[/j/g,"ǰ"],k:[/k/g,"ƙ"],l:[/l/g,"ℓ"],m:[/m/g,"₥"],n:[/n/g,"ñ"],o:[/o/g,"ô"],p:[/p/g,"ƥ"],q:[/q/g,"9"],r:[/r/g,"ř"],u:[/u/g,"ú"],v:[/v/g,"Ʋ"],w:[/w/g,"ω"],x:[/x/g,"ж"],y:[/y/g,"¥"],z:[/z/g,"ƺ"],A:[/A/g,"Â"],B:[/B/g,"ß"],C:[/C/g,"Ç"],D:[/D/g,"Ð"],E:[/E/g,"É"],I:[/I/g,"Ì"],L:[/L/g,"£"],O:[/O/g,"Ó"],P:[/P/g,"Þ"],S:[/S/g,"§"],U:[/U/g,"Û"],Y:[/Y/g,"Ý"]}})()},2363:function(e,a,n){"use strict";Object.defineProperty(a,"__esModule",{value:true});var t=n(2364);var o=n.n(t);var r=n(2365);var i=n.n(r);var s=n(2366);var l=n.n(s);var c=n(2367);var _=n.n(c);var u=n(2368);var d=n.n(u);var f=n(168);var m=n.n(f);var g=n(2369);var p=n.n(g);var h=n(2370);var S=n.n(h);var b=n(263);var T=n.n(b);var v=n(276);var w=n.n(v);var y=n(549);var k=n.n(y);var j=n(2371);var x=n.n(j);var E=n(2372);var C=n.n(E);var O=n(2373);var M=n.n(O)},2364:function(e,a){var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function(){var e=function e(a,n){var t=_.get(window,"TS.model.team.id")||_.get(window,"TS.boot_data.team_id","none");var o=_.get(window,"TS.model.user.id")||_.get(window,"TS.boot_data.user_id","none");var r={description:n,error_json:JSON.stringify(a),team:t,user:o,version:TS.boot_data.version_ts};$.post(TS.boot_data.beacon_error_url,r)};var a=function e(a,n,t){if(!window.console||!console[a])return;var o=TS.qs_args.clean_log;var i=null!==n;t=Array.prototype.slice.call(t);if(i){if(!TS.console.shouldLog(n))return;t.splice(0,1)}t=_.map(t,function(e){return r(e)});var s=true;var l=t.length;while(s&&l){l-=1;s="string"===typeof t[l]}if(o&&"error"!==a&&(n!==parseInt(TS.qs_args.pri,10)||!i))return;if(s){var c=TS.makeLogDate();if(i&&!o)c+="[** "+n+" **]";t.unshift(c);console[a](t.join(" "))}else console[a].apply(console,t)};if(!window.TS)window.TS={};TS.console={onStart:function e(){TS.console.setAppropriatePri(true);TS.console.watchForErrors()},count:function e(){a("count",null,arguments)},dir:function e(a,n,t){if(!window.console||!console.dir)return;if(a&&!TS.shouldLog(a))return;t=t||"";n=r(n);var o=parseInt(TS.qs_args.dir_json,10);if(o){var i=1==o?"2000":o;try{var s=JSON.stringify(n,null,"  ");if(s.length>i)throw new Error("too long");console.info(TS.makeLogDate()+"[** "+a+" **] "+t+" "+s);return}catch(e){if("too long"!==e){console.info(TS.makeLogDate()+"[** "+a+" **] "+t+" "+n);return}}}try{var l=_.cloneDeep(n);console.info(TS.makeLogDate()+"[** "+a+" **] "+t+" 👇");console.dir(l)}catch(e){TS.warn("could not dir ob:"+n+" err:"+e)}},error:function e(){a("error",null,arguments)},group:function e(){a("group",null,arguments)},groupCollapsed:function e(){a("groupCollapsed",null,arguments)},groupEnd:function e(){a("groupEnd",null,arguments)},maybeError:function e(n){a("error",n,arguments)},getStackTrace:function e(){var a="dev"===_.get(TS,"boot_data.version_ts")||_.get(TS,"qs_args.js_path");var n=(new Error).stack;if(a){var t=new Error;var o=Promise.resolve();if(_.isFunction(o._attachExtraTrace)){o._attachExtraTrace(t);n=t.stack||"";var r=n.split("\n");if(r.length&&r.indexOf("From previous event:")>=0){var i=r.indexOf("From previous event:")+1;n=[r[0]].concat(r.slice(i)).join("\n")}}}var s;if(!n)s=["no stacktrace available"];else s=n.split&&n.split("\n")||["[could not parse stack]",n];s=_.filter(s,function(e){if(0===e.indexOf("Error"))return false;return e.trim().length&&-1===e.indexOf("StackTrace")});s=_.map(s,function(e){return e.trim()});var l=s.join("\n");return l},info:function e(){a("info",null,arguments)},log:function e(n){a("log",n,arguments)},logError:function a(n,t,o,r){var i=n instanceof Error?n:new Error;var s={subtype:o||"none",message:n instanceof Error?n.message||n.description:JSON.stringify(n),fileName:i.fileName||i.sourceURL,lineNumber:i.lineNumber||i.line,stack:i.stack||i.backtrace||i.stacktrace};var l=JSON.stringify(s);e(s,t);if(!r&&window.console&&console.error)console.error(TS.makeLogDate()+"logging error: "+l)},logStackTrace:function e(a){var n=_.isUndefined(a)?"":a+"\n";TS.console.info(n+"Stacktrace: ↴\n",TS.console.getStackTrace())},logStackTraceToBackEnd:function a(n,t,o){if(!t||!o||!n){TS.console.warn("Invalid parameters, will not log stack trace");return}var r=TS.console.getStackTrace();var i=_.get(r.split("\n"),"[1]");TS.metrics.count(t+"_v"+o);var s={message:n+". Immediate caller: "+i,stack:r};var l=i.match(/\((.+):(\d+:\d+)\)/);if(l&&3==l.length){s.fileName=l[1];s.lineNumber=l[2]}var c=t+"_caller_v"+o;e(s,c)},profile:function e(){a("profile",null,arguments)},profileEnd:function e(){a("profileEnd",null,arguments)},replaceConsoleFunction:function e(n){var t=a;a=n;return t},setAppropriatePri:function e(a){var n="";if(TS.qs_args.pri)n+=TS.qs_args.pri;if(a&&TS.boot_data.client_logs_pri){if(""!==n)n+=",";n+=TS.boot_data.client_logs_pri}if(TS.model&&TS.prefs&&TS.prefs.prefs_loaded&&TS.prefs.getPref("client_logs_pri")){if(""!==n)n+=",";n+=TS.prefs.getPref("client_logs_pri")}if(""!==n)n+=",";n+="0";TS.pri=_.uniq(n.split(",")).join(",");t()},shouldLog:function e(a){var n=String(TS.pri).split(",");if(-1!==n.indexOf("all")||-1!==n.indexOf("*"))return true;if(-1!==n.indexOf(String(a)))return true;return"undefined"!==typeof TS.has_pri[a]},table:function e(){a("table",null,arguments)},time:function e(){a("time",null,arguments)},timeEnd:function e(){a("timeEnd",null,arguments)},timeStamp:function e(){a("timeStamp",null,arguments)},warn:function e(){a("warn",null,arguments)},maybeWarn:function e(n){a("warn",n,arguments)},watchForErrors:function e(){if(!TS.boot_data||!TS.boot_data.feature_tinyspeck)return;var a=true;window.addEventListener("error",s,a)},trace:function e(){a("trace",null,arguments)},maybeTrace:function e(n){a("trace",n,arguments)},test:function e(){return{_maybeRedactFields:r,_windowErrorHandler:s}}};var t=function e(){var a=String(TS.pri).split(",");TS.has_pri=_(Object.keys(TS.boot_data.client_logs||{})).filter(function(e){var n=TS.boot_data.client_logs[e];return a.some(function(e){if("*"===e)return true;if(n.numbers.indexOf(parseInt(e,10))>-1)return true;if(n.name&&n.name.indexOf(e)>-1)return true;if(n.owner&&n.owner.indexOf(e)>-1)return true;return false})}).map(function(e){if(parseInt(e,10)>=0)return parseInt(e,10);return e}).keyBy(function(e){return e}).value()};var o={name:1,_name_lc:1,real_name:1,_real_name_lc:1,real_name_normalized:1,_real_name_normalized_lc:1,display_name:1,_display_name_lc:1,display_name_normalized:1,_display_name_normalized_lc:1,first_name:1,_first_name_lc:1,last_name:1,_last_name_lc:1,preferred_name:1,full_name:1,email:1,skype:1,status_text:1,title:1,src:1,text:1,msgs:1};var r=function e(a,n){if(!TS.boot_data||TS.boot_data.feature_tinyspeck||"dev"===TS.boot_data.version_ts)return a;if(!a||!_.isObject(a))return a;if(n)n+=1;else n=1;if(n>=10)return a;var t;if(_.isArray(a))t=[];else t={};_.each(a,function(a,r){if(o[r])t[r]="[redacted "+i(a)+"]";else t[r]=e(a,n)});return t};var i=function(e){var a={};return function(t){var o="undefined"===typeof t?"undefined":n(t);if(null===t)return"null";if(t===e)return"global";if("object"!==o)return o;if(t.nodeType)return"DOM node";var r=a[o={}.toString.call(t)]||(a[o]=o.slice(8,-1).toLowerCase());return r}}(this);var s=function e(){var a=arguments&&arguments[0];var n;var t="";var o;var r=true;if(!a)return;t="";n=a.srcElement||a.target;if(n&&n.nodeName)if("SCRIPT"===n.nodeName)t=(a.type||"error")+" from script at "+n.src+" (failed to load?)";else if("IMG"===n.nodeName){if(TS.pri&&TS.console&&TS.console.warn)TS.console.warn("<img> fired error with url = "+(n.src||n.currentSrc||"unkonwn"));return}if(a.error&&a.error.stack)t+=a.error.stack;else if(a.filename)t=" from "+a.filename+(a.lineno?" @ line "+a.lineno+", col "+a.colno:"");o=(!a.error||!a.error.stack?a.message||"":"")+" "+t;if(o&&o.replace)o=o.replace(/\s+/g," ").trim();if(!o||!o.length){if(n)o="error event from node of "+(n.nodeName||"unknown")+", no message provided?";else o="error event fired, no relevant message or node found";r=false}o="🐞 "+o;(window.TS&&TS.console&&TS.console.error||window.console.error||function(){})(o);if(window.TS&&TS.console&&r){var i=null;var s=false;TS.console.logError(a.error||a,o,i,s)}n=null;o=null}})()},2365:function(e,a){(function(){var e=window.TS&&TS.raw_templates;var a=window.TS&&TS.console;var n=0;var t;var o;var r=false;var i=7e4;window.TS={boot_data:{},qs_args:{},pri:0,has_pri:{},console:a,ms:{},exportToLegacy:function e(a,n){if(_.has(TS,a))throw new Error("exportToLegacy: there is already something at "+a+"; we cannot overwrite it");if(!a||0!==a.indexOf("interop"))throw new Error("exportToLegacy: Name "+a+' must start with "interop".');if(n.onStart)throw new Error("exportToLegacy: may not export objects with onStart methods");if(k)_.set(TS,a,n);else TS.registerModule(a,n)},boot:function e(a){M(a);A();o=new Promise(function(e){t=e});TS.boot_data=a;if(TS.qs_args.js_path)TS.boot_data.version_ts="local_js";TS.console.onStart();if(TS.client)TS.client.setClientLoadWatchdogTimer();TS.model.api_url=TS.boot_data.api_url;TS.model.async_api_url=TS.boot_data.async_api_url;TS.model.api_token=TS.boot_data.api_token;if(TS.boot_data.feature_sonic)localStorage.setItem("token",TS.boot_data.api_token);TS.model.webhook_url=TS.boot_data.webhook_url;if(TS.boot_data.page_needs_enterprise)TS.model.enterprise_api_token=TS.boot_data.enterprise_api_token;TS.console.info("booted! pri:"+TS.pri+" version:"+TS.boot_data.version_ts+" start_ms:"+TS.boot_data.start_ms+" ("+(Date.now()-TS.boot_data.start_ms)+"ms ago)");if(TS.web&&TS.web.space)TS.web.space.showFastPreview();if(TS.incremental_boot.shouldIncrementalBoot()){TS.log(123,"Starting incremental boot (early)");w=TS.incremental_boot.startIncrementalBoot()}$(document).ready(P)},useReactDownloads:function e(){return window.TS&&TS.environment.isSSBAndAtLeastVersion("2.7")},useReactMessages:function e(){return TS.client&&TS.boot_data.use_react_messages},useReduxMembers:function e(){return TS.boot_data.feature_store_members_in_redux||TS.useReactMessages()},useReduxFiles:function e(){return TS.boot_data.feature_store_files_in_redux||TS.useReactMessages()},useReactLFS:function e(){return TS.boot_data.feature_react_lfs},useSocket:function e(){return R()},getSocketStartArgs:function e(){return c()},registerModule:function e(a,n,t){D(n);if(k)return TS.error('module "'+a+'" must be registered on before dom ready');if(L[a])return TS.error('module "'+a+'" already exists');var o=s(a,n,"module");if(void 0===o){if(t)TS.error('module "'+a+'" cannot be registered after delay; "'+a.split(".").slice(0,-1).join(".")+'" is not registered');else B[a]=n;return}n._name=a;L[a]=n},registerComponent:function e(a,t){if(k)return TS.error('component "'+a+'" must be registered on before dom ready');if(I[a])return TS.error('component "'+a+'" already exists');if("function"===typeof t)t=t();if("function"!==typeof t.destroy)return TS.error('component "'+a+'" cannot be registered as it does not have a destroy method');var o=function e(){if(this._constructor)this._constructor.apply(this,arguments);if(!this.id){this.id=a+"_auto_guid_"+n;n+=1}if(this.test&&l())this.test=void 0;else if("function"===typeof this.test)this.test=this.test();e._add(this.id,this)};var r=s(a,o,"component");if(void 0===r){F[a]=t;return}var i=t.destroy;t.destroy=function(){o._remove(this.id);i.call(this)};o.prototype=Object.create(t);o.instances={};o._name=a;I[a]=o;o._add=function(e,n){if(I[a].instances[e])TS.warn("A "+a+" component with the instance id "+e+"already exists");I[a].instances[e]=n};o._remove=function(e){I[a].instances[e]=null};o.get=function(e){return I[a].instances[e]};o.getAll=function(){return I[a].instances}},makeLogDate:function e(){if(window.TSMakeLogDate)return TSMakeLogDate();return"(TSMakeLogDate not loaded) "},shouldLog:function e(a){return TS.console.shouldLog(a)},replaceConsoleFunction:function e(a){return TS.console.replaceConsoleFunction(a)},log:function e(a){if(TS.boot_data&&TS.boot_data.feature_tinyspeck&&TS.interop&&TS.interop.console){if(TS.shouldLog(a)){var n=X(a,"log");var t=Q(a,arguments);TS.interop.console.info(n,[].slice.call(t,0))}}else TS.console.log.apply(this,[].slice.call(arguments,0))},info:function e(){if(TS.boot_data&&TS.boot_data.feature_tinyspeck&&TS.interop&&TS.interop.console)TS.interop.console.info("info",[].slice.call(arguments,0));else TS.console.info.apply(this,[].slice.call(arguments,0))},maybeWarn:function e(a){TS.console.maybeWarn.apply(this,[].slice.call(arguments,0))},warn:function e(){if(TS.boot_data&&TS.boot_data.feature_tinyspeck&&TS.interop&&TS.interop.console)TS.interop.console.warn([].slice.call(arguments,0));else TS.console.warn.apply(this,[].slice.call(arguments,0))},dir:function e(a,n,t){TS.console.dir.apply(this,[].slice.call(arguments,0))},maybeError:function e(a){TS.console.maybeError.apply(this,[].slice.call(arguments,0))},error:function e(){if(TS.boot_data&&TS.boot_data.feature_tinyspeck&&TS.interop&&TS.interop.console)TS.interop.console.error([].slice.call(arguments,0));else TS.console.error.apply(this,[].slice.call(arguments,0))},logError:function e(a,n,t,o){TS.console.logError.apply(this,[].slice.call(arguments,0))},getQsArgsForUrl:function e(a){if(!a&&j)return j;j="";for(var n in TS.qs_args){if("export_test"===n)continue;j+="&"+n+"="+encodeURIComponent(TS.qs_args[n])}return j},getOtherAccountsCount:function e(){var a=0;if(!TS.boot_data.other_accounts)return a;a=Object.keys(TS.boot_data.other_accounts).length;return a},refreshTeams:function e(){if(!TS.boot_data)return;if(!TS.model)return;if(!TS.model.team)return;if(!TS.model.user)return;TS.api.call("auth.currentSessions").then(function(e){var a=e.data;TS.boot_data.other_accounts={};var n=0;for(var t in a.accounts){if(t==TS.model.user.id)continue;TS.boot_data.other_accounts[t]=a.accounts[t];n+=1}if(TS.view&&!n)TS.view.updateTitleBarColor()}).catch(function(e){if(TS.console&&TS.console.warn&&TS.console.error){TS.warn(8675309,"unable to do anything with refreshTeams rsp");TS.error(8675309,e)}})},ssbChromeClicked:function e(a){if(a)return;$("html").trigger("touchstart");$(".modal-backdrop").trigger("click")},reload:function e(a,n,t){if(a){TS.info("TS.reload called: "+a);TS.generic_dialog.start({title:TS.i18n.t("¡Volviendo a cargar!","ts")(),body:a,show_cancel_button:false,esc_for_ok:true,onGo:function e(){TS.reload()}});return}if(n)n=JSON.stringify(n);TS.info("TS.reload() called: "+(n||"no reason specified"));if(TS.console)TS.console.logStackTrace();window.location.reload(t)},reloadIfVersionsChanged:function e(a){if(TS.model.ms_logged_in_once&&a.min_version_ts&&"dev"!==TS.boot_data.version_ts)if(parseInt(TS.boot_data.version_ts,10)<parseInt(a.min_version_ts,10)){TS.reload(null,"parseInt(TS.boot_data.version_ts) < parseInt(data.min_version_ts)");return true}if(TS.model.ms_logged_in_once&&a.cache_version)if(a.cache_version!=TS.storage.msgs_version){TS.reload(null,"data.cache_version "+a.cache_version+" != TS.storage.msgs_version "+TS.storage.msgs_version);return true}return false},isPartiallyBooted:function e(){return!!(TS._incremental_boot||TS._did_incremental_boot&&!TS._did_full_boot)},ensureFullyBooted:function e(){return o},test:function e(){var e={_registerDelayedComponentsAndModules:U,_deleteModule:function e(a){delete TS[a];delete L[a]},_deleteComponent:function e(a){delete TS[a];delete I[a]}};Object.defineProperty(e,"_getMSLoginArgs",{get:function e(){return c},set:function e(a){c=a}});Object.defineProperty(e,"_shouldConnectToMS",{get:function e(){return R},set:function e(a){R=a}});Object.defineProperty(e,"_maybeStartPerfTrace",{get:function e(){return G},set:function e(a){G=a}});return e}};var s=function e(a,n,t){var o=a;var r=TS;var i=o.split(".");var s=i.length-1;if(s>=3)TS.error(t+' "'+o+'" cannot be registered, as we only support a depth of two sub modules right now');else if(s){o=i[s];var l=0;for(l;l<s;l+=1){if(!i[l])TS.error(t+' "'+a+'" cannot be registered because of a bad name');r=r[i[l]];if(void 0===r)return r}}if(void 0!==r[o])TS.error(t+' "'+a+'" cannot be registered; "'+o+'" already exists on "'+(r._name||"TS")+'"');else r[o]=n;return r};if(e){TS.raw_templates=e;e=null}var l=function e(){return!("undefined"!==typeof window.jasmine||"dev"===TS.boot_data.version_ts&&TS.qs_args.export_test)};var c=function e(){var a={agent:"webapp_"+TS.boot_data.version_uid,eac_cache_ts:true,cache_ts:0};Object.keys(TS.qs_args).filter(function(e){return 0===e.indexOf("feature_")}).forEach(function(e){if(TS.has_pri[K])TS.log(K,"Flannel: Appending "+e+" ("+TS.qs_args[e]+") to login_args");a[e]=TS.qs_args[e]});if("client"!==TS.boot_data.app)a.no_presence=true;if("calls"===TS.boot_data.app)a.no_subteams=true;a.name_tagging=true;if(TS.boot_data.feature_ms_latest)a.ms_latest=true;if(TS.has_pri[K])TS.log(K,"Flannel: MS login args:",a);return a};var u=function e(){var a=f();y=a;if(!w){TS.info("Starting non-incremental boot");return d(a)}var n=w;w=void 0;return n.then(function(e){e.data.emoji_cache_ts=_.get(TS.storage.fetchCustomEmoji(),"cache_ts");e.data.apps_cache_ts=_.get(TS.storage.fetchApps(),"cache_ts");e.data.commands_cache_ts=_.get(TS.storage.fetchCmds(),"cache_ts");e.data.translations_cache_ts=_.get(TS.storage.fetchStaticTranslations(),"cache_ts");return e}).catch(function(){TS.info("Recovering from incremental boot error");y=void 0;return d(a)})};var d=function e(a){return a.catch(function(e){g(e);throw e})};var f=function e(){if(TS.qs_args.no_rtm_start)return new Promise(function(a,n){TS.resumeRTMStart=function(){delete TS.resumeRTMStart;delete TS.qs_args.no_rtm_start;e().then(function(e){a(e)}).catch(n)}});if(TS.boot_data.rtm_start_response&&!TS.qs_args.no_rtm_start_response){var a=Promise.resolve({ok:true,args:TS.boot_data.rtm_start_response.args,data:TS.boot_data.rtm_start_response.data});delete TS.boot_data.rtm_start_response;return a}return E().then(function(e){if(TS.has_pri[K])TS.log(K,"Flannel: got rtm.start response 💕");return{ok:true,args:{},data:e}})};var m=function e(a){switch(a){case"user_removed_from_team":TS.warn("You have been removed from the "+TS.model.team.name+" team.");if(TS.client)TS.client.userRemovedFromTeam(TS.model.team.id);break;case"account_inactive":case"team_disabled":case"invalid_auth":TSSSB.call("invalidateAuth");TS.reload(null,"Reloading due to error "+a);break;case"clear_cache":case"org_login_required":case"team_added_to_org":var n=true;TS.storage.flush(n);TS.reload(null,"Flushing storage and reloading due to '"+a+"' error");break;case"ratelimited":Y();break;default:TS.warn("Unexpected start error: "+a)}};var g=function e(a){var n=a.data&&a.data.error;if(n)m()};var p=function e(a){if(TS.boot_data.feature_tinyspeck)TS.log(250,"BOOT: Got rtm.start login data");TS.model.emoji_cache_ts=a.data.emoji_cache_ts;TS.model.apps_cache_ts=a.data.apps_cache_ts;TS.model.commands_cache_ts=a.data.commands_cache_ts;TS.model.static_translations_cache_ts=a.data.translations_cache_ts;if(TS.client)if(TS.reloadIfVersionsChanged(a.data))return;if(!a.data.self){TS.error("No self?");return}if(!a.data.team){TS.error("No team?");return}if(TS.boot_data.feature_tinyspeck)TS.log(250,"BOOT: Setting up model");return W(a.data,a.args).then(function(){if(TS.boot_data.feature_tinyspeck)TS.log(250,"BOOT: Model did set up; setting up apps");TS.apps.setUp();if(TS.boot_data.feature_tinyspeck)TS.log(250,"BOOT: Setting up commands");TS.cmd_handlers.setUpCmds();if(TS.boot_data.feature_tinyspeck)TS.log(250,"BOOT: Setting up static translations");TS.i18n.setUpStaticTranslations();if(TS.boot_data.feature_tinyspeck)TS.log(250,"BOOT: Setting up UI");h();if(TS.boot_data.feature_tinyspeck)TS.log(250,"BOOT: Finding initial channel");if(TS.client)TS.client.calculateInitialCid();if(TS.boot_data.feature_tinyspeck)TS.log(250,"BOOT: Setting up emoji and shared channels");return Promise.join(TS.emoji.setUpEmoji().catch(function(){if(TS.boot_data.feature_tinyspeck)TS.log(250,"BOOT: Setting up emoji failed, trying to move forward anyway...")}),TS.members?TS.members.maybeFetchAccessibleUserIds():Promise.resolve())}).then(function(){if(TS.boot_data.feature_tinyspeck)TS.log(250,"BOOT: Nearly there! Finalizing...");if(!TS.model.ms_logged_in_once)S(a.data);if(TS.client)TS.client.onEveryLoginMS(a.data);if(TS.web)TS.web.onEveryLoginMS(a.data);T();var e;if(TS._did_incremental_boot)e=TS.model.ms_logged_in_once;else e=!TS.model.ms_logged_in_once;if(e&&t){if(TS.boot_data.feature_tinyspeck)TS.log(250,"BOOT: Divine clementine, we are finalizing a full boot!");t();t=null;TSSSB.call("didFinishLoading");r=true;if(z)TS.log(250,"BOOT: Finished first boot "+Math.ceil(performance.now()-z)+" ms after DOM ready")}TS.model.ms_logged_in_once=true;if(TS.boot_data.feature_tinyspeck)TS.log(250,"BOOT: Holy guacamole, we're all done!");TS.log(123,"User id: "+_.get(TS.boot_data,"user_id")+", team id: "+_.get(TS.model,"team.id"))}).catch(function(e){TS.error("_setUpModel failed with err: "+(e?e.message:"no err provided"));TS.dir(e);TS.info(e.stack);TS._last_boot_error=e})};var h=function e(){TS.ui.setThemeClasses();if(TS.client){TSSSB.call("setCurrentTeam",TS.model.team.domain);TS.client.updateTeamIcon()}};var S=function e(a){if(TS.boot_data.feature_tinyspeck)TS.log(250,"BOOT: _finalizeFirstBoot");if(TS.model.ms_logged_in_once){TS.warn("_finalizeFirstBoot called, but we have already done this before. This is a progamming error.");return}if(TS.client){TS.client.onFirstLoginMS(a);if(TS.isPartiallyBooted()){b(y);y=void 0}else TS.incremental_boot.afterFullBoot();TS.has_pri["1996"]=true}if(TS.web)TS.web.onFirstLoginMS(a)};var b=function e(a){TS.log(250,"Finalizing incremental boot");TS.incremental_boot.beforeFullBoot();d(a).then(function(e){p(e);TS.incremental_boot.afterFullBoot();TS.log(250,"Completed incremental boot")}).catch(function(e){TS.error("Tried to finalize incremental boot, but rtm.start failed. Will recover when we reconnect.");throw e})};var T=function e(){if(TS.isPartiallyBooted()){if(TS.boot_data.feature_tinyspeck)TS.log(250,"BOOT: _maybeFinalizeOrOpenConnectionToMS not connecting to MS until we complete incremental boot");return}if(!R()){if(TS.boot_data.feature_tinyspeck)TS.log(250,"BOOT: _maybeFinalizeOrOpenConnectionToMS will not connect to MS");return}if(TS.boot_data.feature_tinyspeck)TS.log(250,"BOOT: _maybeFinalizeOrOpenConnectionToMS wants to connect to MS");if(TS.redux.socket.isProvisionallyConnected()){TS.log(250,"BOOT: _maybeFinalizeOrOpenConnectionToMS will finalize SocketManager");try{TS.interop.SocketManager.finalizeProvisionalConnection();TS.log(250,"BOOT: _maybeFinalizeOrOpenConnectionToMS did finalize SocketManager")}catch(e){TS.log("BOOT: _maybeFinalizeOrOpenConnectionToMS failed to finalize SocketManager");var a=true;TS.console.logError(e,"sm_finalize_failed_2",void 0,a);TS.interop.SocketManager.disconnect()}}else{TS.log(250,"BOOT: _maybeFinalizeOrOpenConnectionToMS wanted to finalize SocketManager but it had no provisional connection");if(TS.redux.socket.hasNeverConnected()){if("calls"===TS.boot_data.app)TS.log(250,"BOOT: _maybeFinalizeOrOpenConnectionToMS: opening our SocketManager connection now");else TS.log(250,"BOOT: _maybeFinalizeOrOpenConnectionToMS: we have never had a connection. This should not happen!");E().then(function(e){p({ok:true,args:{},data:e})})}else{TS.log(250,"BOOT: _maybeFinalizeOrOpenConnectionToMS: we had a connection but it is gone for some reason; wait for it to come back");TS.redux.socket.provisionallyConnectedSig.addOnce(e)}}if(TS.boot_data.feature_tinyspeck)TS.log(250,"BOOT: _maybeFinalizeOrOpenConnectionToMS did connect to MS")};var v=function e(){TS.shared.getAllModelObsForUser().forEach(function(e){if(e._consistency_has_been_checked)e._consistency_has_been_checked=false;if(e._consistency_is_being_checked)e._consistency_is_being_checked=false})};var w;var y;TS.qs_args=function(){var e=location.search.substring(1);var a={};var n;n=e.split("&");for(var t=0;t<n.length;t+=1){var o=n[t].indexOf("=");if(-1!=o){var r=n[t].substring(0,o);var i=n[t].substring(o+1);a[r]=unescape(i)}else if(n[t].length)a[n[t]]=""}return a}();TS.pri=TS.qs_args.pri?TS.qs_args.pri+",0":TS.pri;_.each(TS.pri&&TS.pri.split(","),function(e){if(e)TS.has_pri[e]=true});var k=false;var j;var x=function e(){TS.redux.socket.disconnectedSig.add(v);TS.redux.socket.connectedSig.addOnce(function(){TS.redux.socket.provisionallyConnectedSig.add(function(e){e.then(function(e){TS.info("Got start data from Socket Manager; hydrating it");var a=e.rtm_start;TS.interop.boot.data.hydrateStartData(a).then(function(e){TS.info("Successfully hydrated start data from Socket Manager; processing it");p({ok:true,args:{},data:e})}).catch(function(e){TS.warn("Error while hydrating start data from Socket Manager; passing non-hydrated version on since it is better than nothing");TS.logError(e);p({ok:true,args:{},data:a})})})})})};var E=function e(){if(!TS.redux.socket.hasNeverConnected()){var a=new Error("_connectAndFetchStartDataWithSocketManager can only be called if Socket Manager has never connected");TS.console.logError(a,"_connectAndFetchStartDataWithSocketManager called too many times");return Promise.reject(a)}TS.redux.socket.socketErrorMessageReceivedSig.add(m);var n=new Promise(function(e){function a(n){n.then(function(n){var t=n.rtm_start;TS.interop.boot.data.hydrateStartData(t).then(function(n){TS.redux.socket.provisionallyConnectedSig.remove(a);e(n)})}).catch(function(e){TS.warn("Unable to get start data from socket");TS.logError(e)})}TS.redux.socket.provisionallyConnectedSig.add(a)});TS.has_pri["1996"]=true;TS.interop.setTeamIdForToken(TS.boot_data.api_token,TS.boot_data.team_id);TS.interop.SocketManager.start();return n};var C=function e(a){if(TS.client)TSSSB.call("didStartLoading",6e4);if(R())x();N();k=true;if(TS.model.is_our_app)J();TS.ui.setUpWindowUnloadHandlers();if("client"===TS.boot_data.app)TS.client.gogogo();else if("web"===TS.boot_data.app||"space"===TS.boot_data.app||"calls"===TS.boot_data.app)TS.web.gogogo();if(TS.boot_data.no_login){TS.info("running without a user");if(TS.web)TS.web.no_login_complete_sig.dispatch()}else if(a)p(a);else TS.error("_initialDataFetchesComplete expected to receive rtm.start data; we cannot continue.")};var O=function e(){if(!window.sessionStorage)return;try{var a=TS.client?"session_load_count_client":"session_load_count_web";var n=parseInt(sessionStorage.getItem(a)||0,10)+1;sessionStorage.setItem(a,n);TS.log(123,a+": "+n);TS.metrics.store(a,n,{is_count:true})}catch(e){TS.warn("could not log session load count: "+e)}};var M=function e(a){Promise.config({longStackTraces:"dev"===a.version_ts||TS.qs_args.js_path,warnings:{wForgottenReturn:false},cancellation:true})};var A=function e(){window.devtoolsFormatters=window.devtoolsFormatters||[];window.devtoolsFormatters.push({header:function e(a){if(!a||!a._is_interop_channel_object||!window._)return null;var n=_.omitBy(_.assign({},a),_.isNil);return["object",{object:n}]},hasBody:function e(){return false}})};var L={};var B={};var I={};var F={};var z;var P=function e(){z=performance.now();TS.log(123,"_onDOMReady");setTimeout(function(){if(!TS.model.is_our_app)return;if(TS.environment.isSSBAndAtLeastVersion("2.6"))return;if(!r){TSSSB.call("didFinishLoading");r=true;TS.metrics.count("fake_call_did_finish_loading_for_older_SSBs")}},i);O();if(TS.qs_args.ws_flakiness)try{var a=parseFloat(TS.qs_args.ws_flakiness);TS.interop.SocketManager.debugSetSocketConnectFlakiness(a)}catch(e){}if(window.winssb&&winssb.downloads){TS.model.supports_downloads=true;TS.model.flex_names.push("downloads")}if(TS.client)TSSSB.call("didStartLoading",3e4);else TS.info("no TS.client on page:"+document.location.href);TS.api.paused_sig.add(function(e){if(TS.boot_data.feature_tinyspeck)TS.api.debugShowQueue();if(TS.client)TS.client.apiPaused(e);else TS.web.apiPaused(e)});TS.api.unpaused_sig.add(function(){if(TS.client)TS.client.apiUnpaused();else TS.web.apiUnpaused()});soundManager.ignoreFlash=true;soundManager.setup({url:"/img/sm/",debugMode:false});TS.storage.onStart();U();TS.redux.onStart();TS.redux.members.onStart();TS.redux.onStart=_.noop;TS.redux.members.onStart=_.noop;var n=TS.boot_data.no_login?Promise.resolve():u();var t=[q(),n];if(TS.boot_data.page_needs_enterprise&&!TS.boot_data.no_login){TS.metrics.mark("promiseToEnsureEnterprise");t.push(TS.enterprise.promiseToEnsureEnterprise())}Promise.all(t).tap(function(){if(TS.boot_data.page_needs_enterprise&&!TS.boot_data.no_login)TS.metrics.measureAndClear("ensure_enterprise","promiseToEnsureEnterprise")}).then(function(){n.then(C);return null})};var q=function e(){if(window.TS&&TS.raw_templates&&Object.keys(TS.raw_templates).length>0)return Promise.resolve();var a;if(TS.boot_data.hbs_templates_version&&"dev"!==TS.boot_data.version_ts)a=TS.boot_data.hbs_templates_version;else if("dev"===TS.boot_data.version_ts)a=Date.now();else a=TS.boot_data.version_ts;var n="/templates.php?cb="+a+TS.getQsArgsForUrl();if(TS.boot_data.template_groups)n+="&template_groups="+TS.boot_data.template_groups;if(TS.boot_data.template_exclude_feature_flagged)n+="&template_exclude_feature_flagged=1";if(/&locale=[a-zA-Z-]/.test(n)){n=n.replace(/\?locale=[a-zA-Z-]*&/,"?").replace(/[?|&]locale=[a-zA-Z-]*/,"");n=n.replace(/&locale=[a-zA-Z-]/,"")}if(TS.i18n.locale()&&TS.i18n.locale()!==TS.interop.I18n.DEFAULT_LOCALE)n+="&locale="+TS.i18n.locale();var t=0;function o(){t+=1;return new Promise(function(e){if(window.TS&&TS.raw_templates&&Object.keys(TS.raw_templates).length>0){e();return}TS.utility.getCachedScript(n).done(function(){if(0==Object.keys(TS.raw_templates).length){TS.error(n+" returned no templates D:");return}e()}).fail(function(e,a,r){var i=Math.min(1e3*t,1e4);TS.warn("loading "+n+" failed (textStatus:"+a+" errorThrown:"+r+" attempts:"+t+"), trying again in "+i+"ms");setTimeout(o,i)})})}return o()};var U=function e(){_.sortBy(Object.keys(B),"length").forEach(function(e){TS.registerModule(e,B[e],true)});_.sortBy(Object.keys(F),"length").forEach(function(e){TS.registerComponent(e,F[e],true)})};var N=function e(){TS.log(Date.now()-TS.boot_data.start_ms+"ms from first html to calling onStarts()");if("client"===TS.boot_data.app){TS.client.onStart();TS.client.onStart=_.noop}else if("web"===TS.boot_data.app||"space"===TS.boot_data.app||"calls"===TS.boot_data.app){TS.web.onStart();TS.web.onStart=_.noop}else if("test"===TS.boot_data.app)return;else if("api"===TS.boot_data.app||"oauth"===TS.boot_data.app);else{TS.error("WTF app? "+TS.boot_data.app);return}var a;var n=!TS.qs_args.keep_onstart;try{_.forOwn(L,function(e){if(!e.onStart)return;a=e._name;e.onStart();if(n)e.onStart=_.noop})}catch(e){TS.error("TS."+a+".onStart encountered an error:");TS.logError(e);if(window.TSBeacon)window.TSBeacon("call_onstarts_error",1);throw e}if(n)N=_.noop};var W=function e(a,n){return new Promise(function(e,t){var o=!TS.model.ms_logged_in_once;TS.team.upsertTeam(a.team);TS.model.team.url=a.url;if(TS.boot_data.page_needs_enterprise&&void 0!==a.can_manage_shared_channels)TS.prefs.setTeamPref("can_user_manage_shared_channels",a.can_manage_shared_channels);if(!TS.model.last_team_name){TS.model.last_team_name=TS.model.team.name;TS.model.last_team_domain=TS.model.team.domain}TS.model.team.activity=[];if(o){if(!TS.useReduxMembers()){TS.model.members=[];TS.model.bots=[];TS.model.user_groups=[]}TS.model.read_only_channels=[];if(TS.boot_data.feature_default_shared_channels){TS.model.thread_only_channels=[];TS.model.non_threadable_channels=[]}}else{var r=TS._did_incremental_boot&&!TS._did_full_boot;if(!r)TS.refreshTeams()}TS.prefs.setPrefs(a.self.prefs);delete a.self.prefs;var i;var s;var l;var c=function e(a){TS.model.user=_.assign(a,{is_self:true})};var u=["args.cache_ts:"+n.cache_ts];var d=_.clone(n);if(d.token)d.token="REDACTED";try{u.push("api args: "+JSON.stringify(d))}catch(e){u.push("api args: "+d)}TS.members.startBatchUpsert();TS.bots.startBatchUpsert();var f=a.updated_users||a.users||[];var m=a.updated_bots||a.bots||[];var g={};if(TS._did_incremental_boot&&!TS._incremental_boot&&!TS._did_full_boot);else for(i=0;i<f.length;i+=1)g[f[i].id]=true;var p=TS.boot_data.page_needs_enterprise&&TS.boot_data.exclude_org_members;for(i=0;i<f.length;i+=1){l=f[i];if(p&&!TS.members.isLocalTeamMember(l))continue;l.presence=_.has(l,"presence")&&"active"===l.presence?"active":"away";if(_.get(l,"profile.always_active"))l.presence="active";s=TS.members.upsertAndSignal(l);if(TS.has_pri[V])TS.log(V,"upsert from DATA: "+l.id+" "+s.status);if(s.member.id==a.self.id)c(s.member)}var h={};for(i=0;i<m.length;i+=1)h[m[i].id]=true;for(i=0;i<m.length;i+=1)TS.bots.upsertAndSignal(m[i]);u.push("members from updated_users in rtm.start:"+f.length+" (slackbot will always be here)");u.push("bots from updated_bots in rtm.start:"+m.length);if(f.length<TS.model.members.length/20)TS.model.did_we_load_with_user_cache=true;var S;if(TS.qs_args.debug_slackbot)S=true;if(S)TS.info("debug_slackbot: _setUpModel(): data_user_list, data_bot_list",f,m);h=null;g=null;TS.log(123,u.join("\n"));if(!TS.model.user){TS.error("No TS.model.user - Expected user with id: "+_.get(a,"self.id","#"));TS.log(u.join("\n"));t(Error("No TS.model.user"));return}TS.members.finishBatchUpsert();TS.bots.finishBatchUpsert();TS.members.upsertMember(a.self);TS.model.makeYouRegex();TS.prefs.setHighlightWords(TS.prefs.getPref("highlight_words"));if(a.subteams){TS.user_groups.startBatchUpsert();a.subteams.all.forEach(function(e){TS.user_groups.upsertUserGroup(e)});TS.user_groups.finishBatchUpsert();a.subteams.self.forEach(function(e){TS.user_groups.upsertSelfUserGroup(e)})}var b=0;a.channels.forEach(function(e){if(e.is_member)b+=1});if(S)TS.info("debug_slackbot: _setUpModel(): data.ims",a.ims);a.ims.forEach(function(e){if(e.is_open)b+=1});a.groups.forEach(function(e){if(!e.is_archived)b+=1});if(a.mpims)a.mpims.forEach(function(e){if(e.is_open&&!e.is_archived)b+=1});if(a.read_only_channels)TS.model.read_only_channels=a.read_only_channels;if(TS.boot_data.feature_default_shared_channels&&a.non_threadable_channels)TS.model.non_threadable_channels=a.non_threadable_channels;if(TS.boot_data.feature_default_shared_channels&&a.thread_only_channels)TS.model.thread_only_channels=a.thread_only_channels;TS.model.initial_msgs_cnt=42;if(TS.qs_args.api_count){var T=parseInt(TS.qs_args.api_count,10)||TS.model.initial_msgs_cnt;TS.model.initial_msgs_cnt=Math.min(TS.model.initial_msgs_cnt,T)}var v=TS.model.hard_msg_limit;TS.model.subsequent_msgs_cnt=Math.min(v,2*TS.model.initial_msgs_cnt);TS.model.special_initial_msgs_cnt=Math.min(v,2*TS.model.initial_msgs_cnt);TS.log(123,"open channels/groups/ims:"+b+" initial_msgs_cnt:"+TS.model.initial_msgs_cnt+" subsequent_msgs_cnt:"+TS.model.subsequent_msgs_cnt+" special_initial_msgs_cnt:"+TS.model.special_initial_msgs_cnt);var w=function e(){var n=1==TS.qs_args.just_general;TS.utility.msgs.startBatchUnreadCalc();TS.metrics.mark("upsert_channels_start");var t=true;var o=_.map(a.channels,function(e){if(n&&!e.is_general)return;var o=false;var r=false;var i=false;if(a.read_only_channels)o=a.read_only_channels.indexOf(e.id)>-1;if(TS.boot_data.feature_default_shared_channels&&a.thread_only_channels)r=a.thread_only_channels.indexOf(e.id)>-1;if(TS.boot_data.feature_default_shared_channels&&a.non_threadable_channels)i=a.non_threadable_channels.indexOf(e.id)>-1;e=_.assign(e,{is_read_only:o,is_thread_only:r,is_non_threadable:i});return TS.channels.upsertChannel(e,t)});TS.metrics.measureAndClear("upsert_channels","upsert_channels_start");var r=TS.boot_data.page_needs_enterprise&&TS.boot_data.exclude_org_members;if(S)TS.info("debug_slackbot: completeModelObSetup(): skip_ims_mpims = "+r+", data.ims",a.ims);if(!r)var i=_.map(a.ims,function(e){if(n&&"USLACKBOT"!==e.user)return;return TS.ims.upsertIm(e,t)});TS.metrics.mark("upsert_groups_start");if(!TS.isPartiallyBooted()){var s=_.map(TS.model.groups,"id");var l=_.map(a.groups,"id");var c=false;_.difference(s,l).forEach(function(e){var a=TS.groups.getGroupById(e);TS.groups.removeGroup(a);TS.groups.left_sig.dispatch(a);c=true});if(c)TS.members.invalidateMembersUserCanSeeArrayCaches()}var u=_.map(a.groups,function(e){if(n)return;var o=false;var r=false;var i=false;if(a.read_only_channels)o=a.read_only_channels.indexOf(e.id)>-1;if(TS.boot_data.feature_default_shared_channels&&a.thread_only_channels)r=a.thread_only_channels.indexOf(e.id)>-1;if(TS.boot_data.feature_default_shared_channels&&a.non_threadable_channels)i=a.non_threadable_channels.indexOf(e.id)>-1;e=_.assign(e,{is_read_only:o,is_thread_only:r,is_non_threadable:i});return TS.groups.upsertGroup(e,t)});TS.metrics.measureAndClear("upsert_groups","upsert_groups_start");if(a.mpims)if(!r)var d=_.map(a.mpims,function(e){if(n)return;return TS.mpims.upsertMpim(e,t)});var f=_.compact(o.concat(i).concat(u).concat(d));TS.redux.channels.bulkAddEntities(f);if(TS.interop&&TS.interop.ChannelSidebar)TS.interop.ChannelSidebar.ensureRowInView();TS.utility.msgs.finishBatchUnreadCalc();if(TS.model.user.is_restricted&&!TS._incremental_boot&&TS._did_incremental_boot)TS.members.invalidateMembersUserCanSeeArrayCaches();if(S){var m=TS.ims.getImByMemberId("USLACKBOT");var g=TS.members.getMemberById("USLACKBOT");TS.info("debug_slackbot: "+(TS._incremental_boot?"incremental boot":"non-incremental boot")+"\nTS.ims.getImByMemberId('USLACKBOT') => "+(m?"OK 🎉":"NOT FOUND 👻")+"\nTS.members.getMemberById('USLACKBOT') => "+(g?"OK 🎉":"NOT FOUND 👻"));if(m)TS.info("debug_slackbot: slackbot_im",m.toJSON&&m.toJSON()||m);if(g)TS.info("debug_slackbot: slackbot_member",g.toJSON&&g.toJSON()||g);if(!TS._incremental_boot&&!m)TS.warn("debug_slackbot: TS.ims.getImByMemberId(`USLACKBOT`): No IM found?")}};if(a.dnd){if(a.dnd.dnd_enabled)TS.redux.dnd.updateDndScheduleForMember(a.self.id,a.dnd.next_dnd_start_ts,a.dnd.next_dnd_end_ts);else TS.redux.dnd.updateDndScheduleForMember(a.self.id,null,null);if(a.dnd.snooze_enabled||a.dnd.snooze_endtime)TS.redux.dnd.updateSnoozeScheduleForCurrentMember(a.dnd.snooze_enabled,a.dnd.snooze_endtime)}if(!TS._incremental_boot){var y=a.ims.concat(a.mpims||[],a.groups||[]);if(S)TS.info("debug_slackbot: _setUpModel(): !TS._incremental_boot, fetching all external members in shared model obs",y);return TS.members.ensureMembersArePresentInSharedModelObs(y).then(function(){w();e()},function(e){t(Error("could not fetch all external members: "+(e&&e.message)))})}w();e()})};var D=function e(a){if(a.test&&!a.__esModule&&l())delete a.test;else if("function"===typeof a.test){var n=a.test;Object.defineProperty(a,"test",{get:n})}};D(TS);var R=function e(){return!TS.boot_data.no_login};var G=function e(){if(!TS.boot_data.feature_automated_perfectrics)return Promise.resolve();return TS.client?TS.client.traces.maybeTrace(10,{reason:"automated"}):Promise.resolve()};var J=function e(){var a=false;var n=function e(){TS.info("sleep event!");a=true;if(TS.client)TS.interop.SocketManager.sleep();if(TS.web&&TS.web.space)TS.ds.sleep()};var t=function e(){if(!a)return;a=false;TS.info("wake event! version:"+TS.boot_data.version_ts+" start_ms:"+TS.boot_data.start_ms);if(TS.client)TS.interop.SocketManager.wake();if(TS.web&&TS.web.space)TS.ds.wake()};window.addEventListener("sleep",n,false);window.addEventListener("wake",t,false)};var K=1989;var V=481;var H;var Y=function e(){if(H)return;H=true;TS.metrics.count("rate_limit_dialog_shown");var a="Bear with us";var n="Dismiss";var t="Lots of your teammates are connecting to Slack right now, so it’s taking longer than usual. We’re really sorry about this, and we’ll have you online soon.";var o=TS.generic_dialog.alert(t,a,n);var r=function e(){if(o.isPending())TS.generic_dialog.cancel();H=false};TS.redux.socket.connectedSig.addOnce(r)};var X=function e(a,n){var t=n;if(a&&_.isNumber(a))t=""+a;else if("log"===n)t="info";return t};var Q=function e(a,n){var t=Array.prototype.slice.call(n);if(a&&_.isNumber(a))t.shift();return t}})()},2366:function(e,a){var n=function(){function e(e,a){var n=[];var t=true;var o=false;var r=void 0;try{for(var i=e[Symbol.iterator](),s;!(t=(s=i.next()).done);t=true){n.push(s.value);if(a&&n.length===a)break}}catch(e){o=true;r=e}finally{try{if(!t&&i["return"])i["return"]()}finally{if(o)throw r}}return n}return function(a,n){if(Array.isArray(a))return a;else if(Symbol.iterator in Object(a))return e(a,n);else throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();(function(){TS.registerModule("incremental_boot",{onStart:function e(){TS.channels.switched_sig.add(c);TS.ims.switched_sig.add(c);TS.groups.switched_sig.add(c);TS.mpims.switched_sig.add(c);TS.redux.socket.connectedSig.addOnce(c)},startIncrementalBoot:function a(){if(TS._did_incremental_boot)return Promise.reject(new Error("_startIncrementalBoot called more than once; this is a programming error."));TS._did_incremental_boot=true;var t=TS.boot_data.incremental_boot_data;delete TS.boot_data.incremental_boot_data;var o={canonical_avatars:true,include_full_users:true,count:TS.model.initial_msgs_cnt-1,ignore_replies:true,include_pin_count:true,no_members:true,name_tagging:true};var i=u();if(i){TS.model.c_name_in_url=i;o.name=i;TS.log(123,"Performing incremental boot for channel in URL: "+i)}else{var l=localStorage[d()];if(l){o.channel=l;TS.log(123,"Performing incremental boot for channel from history: "+l)}}s(true);TS.model.change_channels_when_offline=false;var c=f("conversations.view",o);r="experiment"===_.get(window,"boot_data.experiment_assignments.speedy_sidebar_boot.group");var m=r?f("users.counts",{simple_unreads:true,mpim_aware:true,only_relevant_ims:true}):Promise.resolve({data:{}});var g=Promise.all([c,m]);return g.then(function(a){var o=n(a,2),r=o[0],i=o[1];TS._incremental_boot=true;var s=e(t,r.data,i.data);return{ok:true,data:s,args:r.args}}).catch(function(e){TS.warn("Incremental boot failed with error: "+e);TS._incremental_boot=false;TS._did_incremental_boot=false;TS.model.change_channels_when_offline=true;s(false);throw e})},beforeFullBoot:function e(){if(!TS._incremental_boot)return;if(!TS._did_incremental_boot)return;if(TS._did_full_boot)return;TS._incremental_boot=false;t=setTimeout(i,1e4);if(TS.client&&TS.client.ui&&TS.client.ui.$messages_input_container)TS.client.ui.$messages_input_container.one(a,i);TS.redux.socket.connectedSig.addOnce(i)},afterFullBoot:function e(){if(TS._did_incremental_boot){TS._did_full_boot=true;TS.model.change_channels_when_offline=true}s(false);TS.redux.dispatch(TS.interop.redux.features.incrementalBoot.setFullyBooted(true))},shouldIncrementalBoot:function e(){if(TS._did_incremental_boot)return false;if(!TS.boot_data.incremental_boot_data)return false;if(TS.model.ms_logged_in_once)return false;if(false===_.get(TS.boot_data.incremental_boot_data,"self.prefs.seen_welcome_2",void 0)||false===TS.boot_data.prefs_seen_welcome_2){delete TS.boot_data.incremental_boot_data;return false}if("client"!==TS.boot_data.app||0!==location.pathname.indexOf("/messages")){delete TS.boot_data.incremental_boot_data;return false}return true},userDidInteractWithUI:function e(){TS.sounds.play("beep");i()},getInitialChannelsToUpsert:function e(){return o}});var e=function e(a,n,t){var i=n;i.channels=i.channels||[];i.groups=i.groups||[];i.ims=i.ims||[];i.mpims=i.mpims||[];var s=i.channel||i.group||i.im;TS.model.initial_cid=s.id;delete i.channel;delete i.group;if(i.history&&i.history.messages)s.msgs=i.history.messages;else s.msgs=[];if(TS.pins&&i.history)TS.pins.updateCount(s,i.history.pin_count);Object.keys(a).forEach(function(e){i[e]=_.merge(a[e],i[e])});if(!i.self||i.self.id!=TS.boot_data.user_id)throw new Error("Missing `self` from incremental boot data");if(!_.find(i.users,{id:i.self.id}))i.users.push(i.self);i.users.forEach(function(e){if("USLACKBOT"===e.id||e.id==TS.boot_data.user_id)e.presence="active";delete e.updated});if(r&&t)o=t.channels.concat(t.groups).concat(t.ims);if(s.is_channel)l(s,i.channels);else if(s.is_mpim)l(s,i.mpims);else if(s.is_group)l(s,i.groups);else if(s.is_im)l(s,i.ims);else throw new Error("Unexpected model object type from channels.view");return i};var a="change.incremental_boot keydown.incremental_boot paste.incremental_boot";var t;var o=[];var r=false;var i=function e(){if(TS.client&&TS.client.ui&&TS.client.ui.$messages_input_container){TS.client.ui.$messages_input_container.off(a);TS.client.ui.$messages_input_container.removeClass("pretend-to-be-online")}TS.redux.socket.connectedSig.remove(e);if(t){clearTimeout(t);t=void 0}};var s=function e(a){$("#col_channels, #team_menu").toggleClass("placeholder",a);$(document.body).toggleClass("incremental_boot",a)};var l=function e(a,n){var t=_.find(n,{id:a.id});if(t)_.extend(t,a);else n.push(a)};var c=function e(){var a=TS.shared.getActiveModelOb();try{if(a&&a.id){localStorage[d()]=a.id;localStorage[window.boot_data.api_token+"_last_model_ob_id"]=a.id}else delete localStorage[d()]}catch(e){}};var u=function e(){var a=location.pathname.match(/\/messages\/([^/]+)/);return a&&a[1]};var d=function e(){return window.boot_data.team_id+"_"+window.boot_data.user_id+"_incr_boot_last_model_ob_id_v2"};var f=function e(a,n){return new Promise(function(e,t){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(4!==o.readyState)return;if(200!==o.status){t(new Error("Received non-200 response from "+a));return}var r=JSON.parse(o.responseText);if(!r.ok){t(new Error("Received not-OK from "+a));return}e({ok:true,args:n,data:r})};o.onerror=function(){t(new Error("XHR encountered an error"))};var r=new FormData;Object.keys(n).forEach(function(e){return r.append(e,n[e])});r.append("token",window.boot_data.api_token);var i=""+window.boot_data.api_url+a;o.open("POST",i,!n._synchronously);o.setRequestHeader("X-Slack-Version-Ts",TS.boot_data.version_ts);o.send(r)})}})()},2367:function(e,a){var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function(){TS.registerModule("metrics",{special_start_mark_labels:["navigationStart","unloadEventStart","unloadEventEnd","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","secureConnectionStart","requestStart","responseStart","responseEnd","domLoading","domComplete","domContentLoadedEventStart","domContentLoadedEventEnd","domInteractive"],onStart:function e(){if(TS.web)TS.web.login_sig.add(TS.metrics.onLogin);if(TS.client)TS.client.login_sig.add(TS.metrics.onLogin);o=TS.utility.enableFeatureForUser(1);if(navigator&&navigator.hardwareConcurrency)r=navigator.hardwareConcurrency},onLogin:function n(){var t=Math.floor(Math.random()*a);setInterval(l,e+t);if(TS.boot_data.feature_electron_memory_logging&&TS.model.is_electron)p();$(window).on("beforeunload",s);var o=TS.experiment?TS.experiment.getGroup("link_preload_test"):"";if(!window.performance||!performance.timing||!performance.timing.loadEventEnd)return;if(TS.utility.enableFeatureForUser(1)||o){var r="dom_ready"+(o?"_"+o:"");TS.metrics.store(r,window.performance.timing.loadEventEnd-window.performance.timing.navigationStart)}},mark:function e(a){if(window.performance&&performance.mark)performance.mark(a)},getLatestMark:function e(a){if(!window.performance||!performance.getEntriesByName)return;var n=performance.getEntriesByName(a);if(0===n.length)return false;return n[n.length-1]},clearMarks:function e(a){if(window.performance&&performance.clearMarks)performance.clearMarks(a)},measure:function e(a,n,t,o){if("start_nav"===n)n="navigationStart";var r=false;if(!t){r=true;t=a+"__"+n+"_end";if(window.performance&&performance.mark)performance.mark(t)}var i=performance.timing;var s;if(i&&TS.metrics.special_start_mark_labels.indexOf(n)>-1){var l=i[n];if(!l)return;var c=performance.getEntriesByName(t);if(0===c.length)return;var _=i.navigationStart;var u=_+c[c.length-1].startTime;s=u-l;if(r&&window.performance&&performance.clearMarks)performance.clearMarks(t);return TS.metrics.store(a,s,o)}try{performance.measure(a,n,t)}catch(e){TS.warn("Couldn't complete TS.metrics measurement for start mark \""+n+'"');return}var d=performance.getEntriesByName(a);if(0===d.length)return;s=d[d.length-1].duration;s=TS.metrics.store(a,s,o);performance.clearMeasures(a);if(r)performance.clearMarks(t);return s},measureAndClear:function e(a,n){var t=TS.metrics.measure(a,n);TS.metrics.clearMarks(n);return t},store:function e(a,n,t){if(!t)t={};var o;var r=t.allow_zero?0:1;if(n>=r){if(t.in_seconds){n=f(n);o=" seconds"}else if(t.is_count){n=Math.round(n);o=" (count)"}else{n=TS.utility?TS.utility.roundToThree(n):n;o="ms"}if(!t.ephemeral)m(a,n);if(u(a))TS.info("[TIMING] "+a+": "+n+o+" "+(t.ephemeral?"(ephemeral)":""))}return n},count:function e(a,n){n=n||1;TS.metrics.store(a,n,{is_count:true})},flush:function e(){l()},logPerfTimingSections:function e(){var a=performance.timing;if(!a)return;TS.metrics.special_start_mark_labels.forEach(function(e){var n=a[e]-a.navigationStart;if(n)TS.metrics.store("pt_"+e,n,{allow_zero:true})});g.forEach(function(e){if(a[e[2]]&&a[e[1]])TS.metrics.store("pt_section_"+e[0],a[e[2]]-a[e[1]],{allow_zero:true})})},reportModelSize:function e(){T()},test:function e(){return{createBeaconURLs:c,getMeasures:function e(){return i},reset:function e(){performance.clearMarks();performance.clearMeasures();i={}}}}});var e=25e3;var a=1e4;var t=2e3;var o=false;var r=null;var i={};var s=function e(){if(TS.client&&TS.metrics.getLatestMark("start_load"))TS.metrics.measure("session_lifespan","start_load",null,{in_seconds:true});l()};var l=function e(){if(0===Object.keys(i).length)return;if(TS.utility.enableFeatureForUser(1))if(window.performance&&performance.memory&&performance.memory.usedJSHeapSize)i.used_js_heap_size=[TS.utility.roundToThree(TS.utility.convertBytesToMegabytes(performance.memory.usedJSHeapSize))];if(o){var a=document.getElementsByTagName("*").length;TS.metrics.store("dom_node_count",a,{is_count:true})}if(TS.boot_data.feature_electron_memory_logging&&TS.model.is_electron)p();var n=c(i);n.forEach(function(e){var a=new Image;a.src=e});if(window.performance&&performance.clearMeasures)performance.clearMeasures();i={}};var c=function e(a){var n=TS.boot_data.beacon_timing_url||window.ts_endpoint_url;if(!n)return[];var o=[];var r="";var i=[];var s;var l;var c={team_id:TS.model&&TS.model.team&&TS.model.team.id||"",user_id:TS.model&&TS.model.user&&TS.model.user.id||"",team_size:TS.model&&TS.model.members&&TS.model.members.length||0,ver:TS.boot_data.version_ts,session_age:0,data:null};if(TS.client&&TS.metrics.getLatestMark("start_load"))c.session_age=TS.metrics.measure("session_age","start_load",null,{ephemeral:true,in_seconds:true});var _=function e(a,t){a.data=t.join(";");return n+"?"+d(a)};for(s in a){if(!a.hasOwnProperty(s))continue;l=s+":"+a[s].join(",");i.push(l);r=_(c,i);if(r.length>t){i.pop();o.push(_(c,i));i=[l]}}o.push(_(c,i));return o};var u=function e(a){return TS.qs_args.log_timings||TS.qs_args.log_timing===a||true===TS.metrics.log||TS.metrics.log===a||TS.metrics.log instanceof Array&&-1!==TS.metrics.log.indexOf(a)};var d=function e(a){var n=[];for(var t in a)if(a.hasOwnProperty(t))n.push(encodeURIComponent(t)+"="+encodeURIComponent(a[t]));return n.join("&")};var f=function e(a){return Math.round(a/1e3)};var m=function e(a,n,t){if(!i[a])i[a]=[];i[a].push(n);if(!t){if(TS.boot_data.experiment_client_metrics&&TS.boot_data.experiment_client_metrics[a])TS.boot_data.experiment_client_metrics[a].forEach(function(t){var o=TS.boot_data["exp_"+t];if(!o)return;var r=true;e("exp_"+t+"_"+o+"_"+a,n,r)});var o=TS.experiment?TS.experiment.getExperimentsForMetric(a):[];o.forEach(function(t){var o=true;e("exp--"+t.experiment_id+"--"+t.group+"--"+a,n,o)})}};var g=[["redirect","redirectStart","redirectEnd"],["app_cache","fetchStart","domainLookupStart"],["dns","domainLookupStart","domainLookupEnd"],["tcp","connectStart","connectEnd"],["secure_tcp","secureConnectionStart","connectEnd"],["request","requestStart","responseStart"],["response","responseStart","responseEnd"],["processed","domLoading","domComplete"],["parsed","domLoading","domInteractive"],["ready","domInteractive","domComplete"],["scripts_executed","domContentLoadedEventStart","domContentLoadedEventEnd"]];var p=function e(){if(!desktop||!desktop.stats)return;if(desktop.stats.getAppMetrics)h();else if(desktop.stats.getTeamsMemoryUsage&&desktop.stats.getCombinedMemoryUsage)S();else if(desktop.stats.getMemoryUsage)b()};var h=function e(){var a=desktop.stats.getMemoryUsage();var n=desktop.stats.getAppMetrics();if(a){var t=Math.ceil(TS.utility.convertKilobytesToMegabytes(a.privateBytes));TS.metrics.store("memory_team_mb_full_client",t)}n.then(function(e){var a=e.filter(function(e){return"Tab"===e.type});var n=a.length-1;var t=_.sum(e,function(e){return e.memory.privateBytes});var o=_.sum(e,function(e){return e.memory.workingSetSize});var i=Math.ceil(TS.utility.convertKilobytesToMegabytes(t));var s=Math.ceil(TS.utility.convertKilobytesToMegabytes(o));if(r){var l=_.sumBy(e,function(e){return e.cpu.percentCPUUsage*r});l=l.toFixed(2);TS.metrics.store("cpu_app_"+n+"_teams",l)}TS.metrics.store("memory_app_mb_"+n+"_teams",s);TS.metrics.store("memory_app_private_mb_"+n+"_teams",i)}).catch(function(e){TS.warn("TS.metrics: Invalid data returned by desktop.stats",e)})};var S=function e(){var a;var n;var t;var o;var r=desktop.stats.getTeamsMemoryUsage();var i=desktop.stats.getCombinedMemoryUsage();Promise.all([r,i]).then(function(e){var r=e[0];var i=e[1];if(!r)throw r;_.forOwn(r,function(e){a=Math.ceil(TS.utility.convertKilobytesToMegabytes(e.memory.privateBytes));TS.metrics.store("memory_team_mb_"+e.state,a)});if(!i||!i.memory)throw i;t=Math.ceil(TS.utility.convertKilobytesToMegabytes(i.memory.sharedBytes));o=Math.ceil(TS.utility.convertKilobytesToMegabytes(i.memory.privateBytes));n=t+o;TS.metrics.store("memory_app_mb_"+i.numTeams+"_teams",n);TS.metrics.store("memory_app_shared_mb_"+i.numTeams+"_teams",t);TS.metrics.store("memory_app_private_mb_"+i.numTeams+"_teams",o)}).catch(function(e){TS.warn("TS.metrics: Invalid data returned by desktop.stats",e)})};var b=function e(){var a=desktop.stats.getMemoryUsage();var n=desktop.stats.getCombinedMemoryUsage();if(a){var t=TS.utility.roundToThree(TS.utility.convertKilobytesToMegabytes(a.memory.privateBytes+a.memory.sharedBytes));TS.metrics.store("memory_usage_team_mb",t)}if(n)n.then(function(e){if(e&&e.memory){var a=e.memory.privateBytes+e.memory.sharedBytes;var n=a/e.numTeams;TS.metrics.store("memory_usage_all_mb",TS.utility.roundToThree(TS.utility.convertKilobytesToMegabytes(a)));TS.metrics.store("memory_usage_all_per_team_mb",TS.utility.roundToThree(TS.utility.convertKilobytesToMegabytes(n)))}else TS.warn("Unexpected results from call to getCombinedMemoryUsage()",e)}).catch(function(e){TS.warn("Error logging combined memory stats",e)})};var T=function e(){var a=_.filter(TS.model.channels,function(e){return e.is_member&&!e.is_archived});var n=TS.groups.getUnarchivedGroups();var t=TS.members.getActiveMembersWithSelfAndNotBots();var o=_.filter(TS.model.members,"is_bot");var r=a.concat(n).concat(TS.model.mpims).concat(TS.model.ims);var i=["msgs","_archive_msgs"];var s=[];var l;_.each(r,function(e){_.forEach(e,function(e,a){l={};if(!i.includes(a))l[a]=e;s.push(l)})});var c=t.length;var u=TS.model.bots.length+o.length;var d=Object.keys(TS.model.apps).length;var f=TS.model.user_groups.length;var m=r.length;var g=TS.model.files.length;var p=v(TS.model.user);var h=v(TS.model.team);var S=v(s);var b=v(TS.model.members);var T=v(TS.model.bots);var w=v(TS.model.apps);var y=v(TS.model.user_groups);var k=v(TS.model.files);var j=p+h+S+b+T+w+y+k;var x=42;var E=1e3;var C=m*x*E;var O={channels:{count:m,description:"IMs, MPIMs, unarchived Private Channels, and unarchived Channels you belong to.",size:TS.utility.convertFilesize(S,1)},users:{count:c+" users, "+f+" user groups",description:"Users in the local model and user groups on your team.",size:TS.utility.convertFilesize(b+y,1)},files:{count:g,description:"Files in the local model. Size measures metadata, not source files.",size:TS.utility.convertFilesize(k)},platform:{count:u+" bots, "+d+" apps",description:"Bots in the local model and all Apps on your team.",size:TS.utility.convertFilesize(T+w,1)},totals:{size:TS.utility.convertFilesize(j,1)+" of model objects, excluding messages",speculative_message_cache_size:TS.utility.convertFilesize(C,1)+" of messages (estimated), including a page of history for each of your channels"}};TS.interop.console.info("Weigh Scale",O)};function v(e){var a=[];var t=function e(t){var o=0;if("boolean"===typeof t)o=4;else if("string"===typeof t)o=2*t.length;else if("number"===typeof t)o=8;else if("object"===("undefined"===typeof t?"undefined":n(t))&&-1===a.indexOf(t)){a[a.length]=t;_.forEach(t,function(a,n){o+=8;o+=e(t[n])})}return o};return t(e)}})()},2368:function(e,a){(function(){TS.registerModule("statsd",{onStart:function e(){var a=3e4;var n=5e3;var t=Math.floor(Math.random()*n);setInterval(o,a+t);$(window).on("beforeunload",o)},count:function e(a,n){if(_.isUndefined(n))n=1;t(a,"count",n)},timing:function e(a,n){t(a,"timing",n)},flush:function e(){o()},mark:function e(a){TS.metrics.mark(a)},clearMarks:function e(a){TS.metrics.clearMarks(a)},measure:function e(a,n,t){var o=TS.metrics.measure(a,n,t,{ephemeral:true});if(_.isNaN(o)||_.isUndefined(o))return;TS.statsd.timing(a,o);return o},measureAndClear:function e(a,n){var t=TS.statsd.measure(a,n);TS.statsd.clearMarks(n);return t},test:function e(){var a={getStats:function e(){return n},reset:function e(){n=[]}};Object.defineProperty(a,"_record",{get:function e(){return t},set:function e(a){t=a}});Object.defineProperty(a,"_sendDataAndEmptyQueue",{get:function e(){return o},set:function e(a){o=a}});return a}});var e=2e3;var a;var n=[];var t=function e(a,t,o){var r;if("count"===t){r=" (count)";o=_.round(o,0)}else if("timing"===t){r="ms";o=_.round(o,3)}else{TS.error("TS.statsd._record called with invalid type: "+t);return}if(i(a))TS.info("[STATSD "+t.toUpperCase()+"] "+a+": "+o+r);n.push({stat:a,type:t,value:o})};var o=function a(){if(!n.length)return;var t=[];var o=[];var s="";var l=function e(a){return r()+"?stats="+encodeURIComponent(JSON.stringify(a))};n.forEach(function(a){o.push(a);s=l(o);if(s.length>e){o.pop();t.push(l(o));o=[a]}});t.push(l(o));t.forEach(function(e){var a=new Image;a.src=e});if(i())TS.info("[STATSD] Sending data: "+JSON.stringify(n));n=[]};var r=function e(){if(a)return a;if(TS.environment.is_dev){var n=location.host.match(/^([^.]+\.)?(?:enterprise\.)?((dev|qa)[0-9]*)\.slack\.com/)[2];a="https://"+n+".slack.com/beacon/statsd"}else if(location.host.match(/staging.slack.com/))a="https://staging.slack.com/beacon/statsd";else a="https://slack.com/beacon/statsd";return a};var i=function e(a){if(!a)return TS.qs_args.log_timings||true===TS.statsd.log;return TS.qs_args.log_timings||TS.qs_args.log_timing===a||true===TS.statsd.log||TS.statsd.log===a||TS.statsd.log instanceof Array&&-1!==TS.statsd.log.indexOf(a)}})()},2369:function(e,a){(function(){TS.registerModule("model",{did_we_load_with_user_cache:false,did_we_load_with_emoji_cache:false,did_we_load_with_app_cache:false,did_we_load_with_cmd_cache:false,api_url:"",api_token:"",async_api_url:"",webhook_url:"",user:null,team:null,can_add_ura:null,ims:null,channels:null,groups:null,mpims:null,members:null,rooms:null,bots:null,user_groups:null,idp_groups:null,apps:{},files:[],requested_im_opens:{},requested_group_opens:{},requested_mpim_opens:{},requested_channel_joins:{},created_channels:{},created_channel_ids:{},created_groups:{},archives_and_recreated_groups:{},last_team_name:"",last_team_domain:"",initial_cid:"",enterprise:null,initial_unread_view:false,initial_threads_view:false,initial_app_space_view:false,initial_home_screen_view:false,initial_apps_dashboard_view:false,RESERVED_USERNAMES:["all","archive","archived","archives","channel","channels","create","delete","deleted-channel","edit","everyone","general","group","groups","here","me","ms","slack","slackbot","today","you","canal","aquí","todos","mí","grupo","hier","alle","mir","gruppe","chaîne","chaine","ici","tous","moi","groupe","チャンネル","ここ","全員","自分","グループ"],RESERVED_KEYWORDS:["channel","here","everyone","slackbot","canal","aquí","todos","hier","alle","chaîne","chaine","ici","tous","チャンネル","ここ","全員"],BROADCAST_KEYWORDS:[{id:"BKeveryone",ms_name:"everyone",cmd:"<!everyone>",name:TS.i18n.t("todos","broadcast_keywords")(),description:TS.boot_data.feature_teams_to_workspaces?TS.i18n.t("Notificar a todos en tu espacio de trabajo.","broadcast_keywords")():TS.i18n.t("Notificar a todos en tu equipo.","broadcast_keywords")(),is_broadcast_keyword:true},{id:"BKchannel",ms_name:"channel",alias:"group",cmd:"<!channel>",name:TS.i18n.t("canal","broadcast_keywords")(),description:TS.i18n.t("Notificar a todos en este canal.","broadcast_keywords")(),is_broadcast_keyword:true},{id:"BKhere",ms_name:"here",cmd:"<!here|@here>",name:TS.i18n.t("aquí","broadcast_keywords")(),description:TS.i18n.t("Notificar a todos los miembros conectados desde ordenador en este canal.","broadcast_keywords")(),is_broadcast_keyword:true}],NAMED_VIEWS:[{id:"Vall_unreads",name:TS.i18n.t("Mensajes sin leer","model")(),is_view:true},{id:"Vall_threads",name:TS.i18n.t("Hilos","threads")(),alt_names:[TS.i18n.t("Todos los hilos","threads")(),TS.i18n.t("Nuevos hilos","threads")()],is_view:true},{id:"Vapp_space",name:TS.i18n.t("Aplicaciones","model")(),is_view:true}],unsent_msgs:{},display_unsent_msgs:{},inline_img_byte_limit:2097152,inline_img_pixel_limit:36152320,last_reads_set_by_client:{},ms_logged_in_once:false,ds_asleep:false,ds_connected:false,ds_connecting:false,ds_logged_in_once:false,window_unloading:false,active_cid:null,last_active_cid:null,active_group_id:null,active_channel_id:null,active_im_id:null,active_mpim_id:null,active_history:[],all_custom_emoji:[],user_hiddens:[],user_colors:null,emoji_use:{},at_channel_suppressed_channels:null,push_at_channel_suppressed_channels:null,loud_channels:null,never_channels:null,loud_channels_set:null,push_loud_channels:null,push_mention_channels:null,push_loud_channels_set:null,highlight_words:null,highlight_words_regex:null,everyone_regex:/<!everyone\b/,channel_regex:/<!channel\b/,group_regex:/<!group\b/,here_regex:/<!here\b/,you_regex:null,your_user_group_regex:{},channel_id_prefixes:["C","G","D"],channel_sort:"alphabetical",inline_attachments:{},inline_imgs:{},inline_videos:{},inline_others:{},inline_audios:{},expandable_state:{},native_video_embed_height:320,native_video_embed_height_flexpane:240,native_media_preload_limit_bytes:2097152,is_msg_rate_limited:false,ds_reconnect_ms:0,ds_reconnect_time:0,rtd_start_throttler:0,initial_msgs_cnt:50,subsequent_msgs_cnt:100,special_initial_msgs_cnt:100,hard_msg_limit:500,all_unread_cnt:0,all_unread_highlights_cnt:0,all_unread_cnt_to_exclude:0,all_unread_highlights_cnt_to_exclude:0,threads_has_unreads:false,threads_mention_count:0,threads_mention_counts:{},c_name_in_url:"",flex_name_in_url:"",flex_extra_in_url:"",flex_names:["files","team","search","stars","mentions","details","whats_new","convo","apps"],default_flex_name:"files",ui_state:null,input_history:null,input_history_index:-1,input_cursor_positions:{},last_net_send:0,previewed_file_id:null,last_previewed_file_id:null,previewed_member_name:null,previewed_member_id:null,last_previewed_member_id:null,previewed_user_group_id:null,last_previewed_user_group_id:null,channel_name_max_length:21,channel_purpose_max_length:250,channel_topic_max_length:250,upload_file_size_limit_bytes:1073741824,model_ob_id_length:9,msg_activity_interval:5,msg_preview_showing:false,archive_view_is_showing:false,menu_is_showing:false,overlay_is_showing:false,unread_view_is_showing:false,threads_view_is_showing:false,app_space_view_is_showing:false,home_screen_view_is_showing:false,apps_dashboard_view_is_showing:false,seen_onboarding_this_session:false,seen_welcome_2:true,showing_welcome_2:false,cancelled_welcome_2_this_session:false,show_inline_img_size_pref_reminder:false,shown_inline_img_size_pref_reminder_once:false,last_key_down_e:null,group_prefix:"",ms_conn_log:[],ds_conn_log:[],mac_ssb_version:TSSSB.env.mac_ssb_version,mac_ssb_version_minor:TSSSB.env.mac_ssb_version_minor,mac_ssb_build:TSSSB.env.mac_ssb_build,win_ssb_version:TSSSB.env.win_ssb_version,win_ssb_version_minor:TSSSB.env.win_ssb_version_minor,lin_ssb_version:TSSSB.env.lin_ssb_version,lin_ssb_version_minor:TSSSB.env.lin_ssb_version_minor,desktop_app_version:TSSSB.env.desktop_app_version,supports_downloads:false,supports_spaces_in_windows:false,supports_growl_subtitle:false,supports_voice_calls:false,supports_video_calls:false,supports_screen_sharing:false,supports_screenhero:false,supports_mmap_minipanel_calls:false,active_file_list_filter:"all",active_file_list_member_filter:"all",file_list_types:null,shift_key_pressed:false,insert_key_pressed:false,alt_key_pressed:false,join_leave_subtypes:["channel_leave","channel_join","group_leave","group_join"],file_list_type_map:{all:TS.i18n.t("Todos los tipos de archivo","model")(),posts:TS.i18n.t("Notas","model")(),spaces:TS.i18n.t("Notas","model")(),arugula:"Arugula",snippets:TS.i18n.t("Extractos","model")(),emails:TS.i18n.t("Correos","model")(),images:TS.i18n.t("Imágenes","model")(),videos:TS.i18n.t("Vídeos","model")(),pdfs:TS.i18n.t("Archivos PDF","model")(),gdocs:TS.i18n.t("Google Docs","model")()},marked_reasons:{viewed:"viewed",left:"left",esc:"esc",esc_all:"esc_all",closed:"closed",muted:"muted",back:"back",sent:"sent",clicked:"clicked",deleted:"deleted",none_qualify:"none_qualify"},welcome_model_ob:{},change_channels_when_offline:true,ampersands_are_inconsistent_in_from_urls:true,ui:{cached_file_preview_scroller_rect:null,cached_msgs_scroller_rect:null,cached_msgs_scroll_result:null,cached_search_scroller_rect:null,cached_archives_scroller_rect:null,cached_archive_scroll_result:null,cached_convo_scroller_rect:null,cached_unread_scroller_rect:null,cached_threads_scroller_rect:null,is_window_focused:!!(document.hasFocus&&document.hasFocus()),msgs_are_auto_scrolling:false,is_mouse_down:false,last_flex_extra:null,active_tab_id:null,active_tab_ts:null,debug_channel_lists:true,last_top_msg:null},client:{reads:[],last_user_active_timestamp:new Date},emoji_groups:[],emoji_names:[],emoji_map:[],emoji_complex_customs:null,emoji_menu_columns:9,emoji_menu_colors:6,frecency_jumper:{},pdf_viewer_enabled:true,onStart:function e(a){a=a||navigator.userAgent;var n=[];if(TS.model.is_safari_desktop)n.push("is_safari_desktop");if(TS.model.is_electron&&TS.model.is_mac&&TSSSB.call("isMainWindowFrameless"))n.push("is_electron_mac");if(TS.model.is_electron)n.push("is_electron");if(TS.model.is_mac)n.push("is_mac");if(TS.model.is_win)n.push("is_win");$("html").addClass(n.join(" "));var t=o(a);var r=!!(TS.model.mac_ssb_version&&TS.environment.isSSBAndAtLeastVersion("2.2"));TS.model.supports_growl_subtitle=r&&TS.utility.compareSemanticVersions(t,"10.7")>0;var i=false;Object.defineProperty(TS.model,"dialog_is_showing",{get:function e(){return i},set:function e(a){i=a;TSSSB.call("dialogIsShowing",a)},enumerable:true,configurable:true});TS.model.supports_voice_calls=false;var s=!(TS.model.is_lin&&TS.environment.isSSBAndAtLeastVersion("2.5.2"));if(window.winssb){TS.model.supports_voice_calls=!!(winssb.screenhero||winssb.calls||!s);if(TS.model.win_ssb_version&&TS.model.win_ssb_version<2)TS.model.supports_voice_calls=false}else if(TS.model.is_chrome_desktop)TS.model.supports_voice_calls=true;TS.model.supports_video_calls=false;TS.model.supports_screen_sharing=false;TS.model.supports_screenhero=false;TS.model.supports_mmap_minipanel_calls=false;if(window.winssb){if(winssb.calls&&winssb.calls.requestCapabilities){var l=winssb.calls.requestCapabilities();if(l){if(l.supports_video)TS.model.supports_video_calls=true;if(l.supports_screen_sharing&&winssb.stats&&winssb.stats.getDisplayInformation)TS.model.supports_screen_sharing=true;if(l.supports_screenhero&&!l.is_mas)TS.model.supports_screenhero=true;if(l.supports_mmap_minipanel)TS.model.supports_mmap_minipanel_calls=true}}}else if(TS.model.is_chrome_desktop)TS.model.supports_video_calls=true;if(!s){TS.model.supports_video_calls=true;TS.model.supports_screen_sharing=true}TS.model.supports_spaces_in_windows=false;if(window.winssb&&winssb.window&&winssb.window.list)TS.model.supports_spaces_in_windows=true;if(TS.boot_data.special_flex_panes)_.forOwn(TS.boot_data.special_flex_panes,function(e){TS.model.flex_names.push(e.flex_name)});var c=TS.storage.fetchExpandableState();TS.model.expandable_state=c;if(TS.boot_data.feature_app_canvases)TS.model.NAMED_VIEWS.push({id:"Vapps_dashboard",name:TS.i18n.t("Panel","model")(),is_view:true})},makeYouRegex:function e(){var a=TS.model.user;if(a)TS.model.you_regex=new RegExp("<@("+a.id+")\\b")},addProfilingKeyTime:function e(a,n){if(!n||!a)return;if(!TS.model.profiling_key_times)TS.model.profiling_key_times=[];TS.model.profiling_key_times.push({name:a,ms:n})},incrementUnknownIdHandled:function a(n){e[n]=e[n]||{tries:0,state:0};var t=e[n];t.tries+=1;t.state=0;if(t.tries>2)TS.maybeError(48,'calling the API for id: "'+n+'", try #'+t.tries);else if(t.tries>1)TS.maybeWarn(48,'calling the API for id: "'+n+'", try #'+t.tries);else TS.log(48,'calling the API for id: "'+n+'", try #'+t.tries);return t.tries},reportResultOfUnknownIdHandled:function a(n,t){var o=e[n];if(!o)return;o.state=t?1:-1;if(1==o.state)TS.log(48,'API call for id: "'+n+'" SUCCEEDED, try #'+o.tries);else TS.maybeWarn(48,'API call for id: "'+n+'" FAILED, try #'+o.tries)},logUnknownIdsHandled:function e(a,t){var o=n(a,t);TS.info("_unknown_ids_handled: "+JSON.stringify(o,null,2))},getUnknownIdsHandled:function e(a,t){return n(a,t)},test:function e(){return{getOSXVersion:o,isWin7Plus:t,sniffUserAgent:r}},getBroadcastKeywordById:function e(a){var n=_.find(TS.model.BROADCAST_KEYWORDS,{id:a});if(!n){TS.warn("no broadcast_keyword ob found for "+a);return}return n},getViewById:function e(a){var n=_.find(TS.model.NAMED_VIEWS,{id:a});if(!n){TS.warn("no view ob found for "+a);return}return n},isMac:function e(){return TS.model.is_mac},isWindows:function e(){return TS.model.is_win},isSSB:function e(){return TS.model.is_our_app}});_.merge(TS.model,r(navigator.userAgent));var e={};var a=[-1,0,1];var n=function n(t,o){t=parseInt(t,10)||1;o=_.includes(a,o)?o:"any";var r={};Object.keys(e).forEach(function(a){var n=e[a];if(t>n.tries)return;if("any"!==o&&n.state!=o)return;r[a]=e[a]});return{state:o,min_tries:t,count:Object.keys(r).length,obs:r}};function t(e){var a=e.match(/Windows NT ([0-9]+\.[0-9]+)\b/);if(!a||a.length<2)return false;return parseInt(a[1],10)>=6}function o(e){var a=e.match(/(?:Mac OS X )([0-9][0-9]_[0-9]+)(_[0-9])?/);if(!a)a=e.match(/(?:Mac OS X )([0-9][0-9]\.[0-9]+)(\.[0-9])?/);if(!a||!a[1])return 0;return a[1].replace("_",".")}function r(e){var a=/(OS X)/g.test(e);var n=-1!==e.indexOf("Windows");var r=/(WOW64|Win64)/g.test(e);var i=-1!==e.indexOf("Linux");var s=/(iPad|iPhone|iPod)/g.test(e);var l=/(Android)/g.test(e);var c=/(Edge)/g.test(e);var _=/(Chrome)/g.test(e)&&!c;var u=_&&(s||l);var d=/(Slack)/g.test(e);var f=/(MSIE|Trident)/g.test(e);var m=/(Firefox)/g.test(e);var g=/(Safari)/g.test(e);var p=/(AtomShell)/g.test(e);return{is_iOS:s,is_IE:f,is_FF:m,is_edge:c,is_chrome_desktop:_&&!u&&!d,is_chrome_mobile:u,is_safari_desktop:g&&!_&&a&&!s,is_mac:a,mac_version:o(e)||void 0,is_win:n,is_win_64:r,is_win_7_plus:t(e),is_lin:i,is_our_app:d,is_electron:p}}})()},2370:function(e,a){(function(){TS.registerModule("environment",{is_apple_webkit:false,is_dev:false,is_macgap:false,is_retina:false,retina_changed_sig:new signals.Signal,supports_sticky_position:false,supports_custom_scrollbar:false,slim_scrollbar:false,supports_flexbox:false,supports_line_clamp:false,supports_intersection_observer:false,onStart:function e(){c();r();u()},isSSBAndAtLeastVersion:function e(a){if(!TS.model.is_our_app)return false;var n=a.split(".");var t={major:0,minor:0};var o={major:0,minor:0};if(n.length>2)t.minor=parseFloat(n.pop());t.major=parseFloat(n.join("."));if(TS.model.mac_ssb_version){o.major=TS.model.mac_ssb_version;o.minor=TS.model.mac_ssb_version_minor}else if(TS.model.win_ssb_version){o.major=TS.model.win_ssb_version;o.minor=TS.model.win_ssb_version_minor}else if(TS.model.lin_ssb_version){o.major=TS.model.lin_ssb_version;o.minor=TS.model.lin_ssb_version_minor}return TS.utility.compareVersions(o,t)>=0},doesSupportStickyPosition:function e(){return TS.environment.supports_sticky_position},test:function e(){var a={_decoratePageWithSupport:r,_initialSetup:c};Object.defineProperty(a,"cssPropertySupported",{get:function e(){return i},set:function e(a){i=a}});Object.defineProperty(a,"cssValueSupported",{get:function e(){return s},set:function e(a){s=a}});return a}});var e=["-webkit-","-moz-","-o-","-ms-",""];var a=["Webkit","Moz","O","ms",""];var n=new RegExp("^(-*"+e.slice(0,e.length-1).join("|-*")+")");var t=new RegExp("^("+a.slice(0,a.length-1).join("|")+")");function o(){return window.devicePixelRatio>1}function r(){var e=["is_apple_webkit","is_macgap","supports_sticky_position","supports_custom_scrollbar","slim_scrollbar","supports_flexbox","supports_line_clamp"];var a=_.partition(e,function(e){return TS.environment[e]});var n=$("html");n.addClass(a[0].join(" "));n.removeClass(a[1].join(" "))}function i(e){if("scrollbar"===e)return d();var o=document.createElement("css_property_supported").style;e=e.replace(t,"").replace(/([A-Z]+)([A-Z][a-z])/g,"$1-$2").replace(/([a-z\d])([A-Z])/g,"$1-$2").replace(n,"").toLowerCase();e=_.camelCase(e,"-");var r=_.upperFirst(e);if(void 0!==o[e])return true;return a.some(function(a){return void 0!==o[a+r]||void 0!==o[a+e]})}function s(a,t){var o=document.createElement("css_value_supported");t=t.replace(n,"").toLowerCase();o.style.cssText=a+":"+e.join(t+";"+a+":")+t+";";return!!o.style.length}function l(){TS.environment.supports_sticky_position=s("position","sticky");if("Chrome"===window.bowser.name&&parseInt(window.bowser.version,10)<57&&o())TS.environment.supports_sticky_position=false;TS.redux.dispatch(TS.interop.redux.entities.environment.setSupportsStickyPosition(TS.environment.supports_sticky_position))}function c(){TS.environment.is_apple_webkit=!!(TS.model.mac_ssb_version||TS.model.is_safari_desktop);TS.environment.is_dev="dev"===TS.boot_data.version_ts;TS.environment.is_macgap=!!window.macgap;TS.environment.is_retina=o();TS.environment.supports_custom_scrollbar=i("scrollbar");TS.environment.slim_scrollbar=TS.environment.supports_custom_scrollbar&&TS.boot_data.feature_slim_scrollbar;TS.environment.supports_flexbox=i("flex-wrap");TS.environment.supports_line_clamp=i("line-clamp");TS.environment.supports_intersection_observer="function"===typeof IntersectionObserver;l()}function u(){if(window.matchMedia){var e="screen and (-webkit-min-device-pixel-ratio: 1.5), screen and (min--moz-device-pixel-ratio: 1.5), screen and (min-device-pixel-ratio: 1.5)";window.matchMedia(e).addListener(function(){var e=TS.environment.is_retina;TS.environment.is_retina=o();if(TS.environment.is_retina===e)return;TS.info("TS.environment.is_retina changed from "+e+" to "+TS.environment.is_retina);TS.environment.retina_changed_sig.dispatch(TS.environment.is_retina);l();r()})}}function d(){var e=document.createElement("div");e.id="__sb";e.style.overflow="scroll";e.style.width="40px";e.style.height="40px";e.style.position="absolute";e.style.left="-40px";e.innerHTML="&shy;<style>#__sb::-webkit-scrollbar {width:10px;}</style>";document.body.appendChild(e);var a=e.offsetWidth-e.clientWidth===10;document.body.removeChild(e);return a}})()},2371:function(e,a){var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function(){TS.registerModule("ssb",{teams_did_load_sig:new signals.Signal,onStart:function e(){if(TS.files)TS.files.team_file_deleted_sig.add(o)},openNewFileWindow:function e(a,n,o){if(u)TS.log(u,"TS.ssb.openNewFileWindow url: "+n);if(TS.client)return TS.client.windows.openFileWindow(a.id,o);else if(window.is_in_ssb){TS.ssb.upsertFileInSSBParentWin(a);if(document.ssb_main){if(document.ssb_main.TS)return document.ssb_main.TS.client.windows.openFileWindow(a.id,n);return true}else if(window.winssb&&window.opener&&window.opener.executeJavaScript){if(u)TS.log(u,"calling _executeInAtomSSBParentWin for TS.client.windows.openFileWindow");i("TS.client.windows.openFileWindow("+t(a.id)+", "+t(n)+");");return true}}return false},closeWindow:function e(){if(!window.is_in_ssb)return false;window.close();return true},setUpAtomSSBWin:function e(a){c(a,"window.is_in_ssb = true;");if(TS.shouldLog(438)&&!a._has_console)a._has_console=1},upsertFileInSSBParentWin:function e(n){if(!TS.web)return;if(document.ssb_main){if(document.ssb_main.TS)document.ssb_main.TS.files.upsertAndSignal(n)}else if(window.winssb&&window.opener&&window.opener.executeJavaScript){if(u)TS.log(u,"calling _executeInAtomSSBParentWin for TS.files.upsertAndSignal");i("TS.files.upsertAndSignal("+a(n)+");")}},toggleMuteInWin:function a(n,t,o){if(u)TS.log(u,"toggleMuteInWin called with token: "+n);if(!TS.client)return;var r=TS.client.windows.getWinByToken(n);if(!r){TS.error("toggleMuteInWin called with bad token: "+n);return}c(r,"window.toggleMute("+e(t)+");",o)},teamsDidLoad:function e(){TS.ssb.teams_did_load_sig.dispatch()},distributeMsgToWin:function e(n,t){if(u)TS.log(u,"distributeMsgToWin called with token: "+n);if(!TS.client)return;var o=TS.client.windows.getWinByToken(n);if(!o){TS.error("distributeMsgToWin called with bad token: "+n);return}c(o,"TS.ms.msg_handlers.msgReceivedFromParentWindow("+a(t)+");")}});var e=function e(a){return(!!a).toString()};var a=function e(a){return"JSON.parse('"+JSON.stringify(a||null)+"')"};var t=function e(a){a=String(a);a=a.replace(/"/g,'\\"');return'"'+a+'"'};var o=function e(a){if(!a)return;if(!TS.client)return;var n=TS.client.windows.getWinByProp("file_id",a.id);if(!n)return;setTimeout(function(){c(n,"window.TS.files.team_file_deleted_sig.dispatch(TS.files.getFileById("+t(a.id)+"));")},1e3)};var r=[];var i=function e(a,n){return TSSSB.call("executeJavaScriptInParentWindow",{code:a,callback:n})};var s=function e(a,t){if(u)TS.log(u,'CALLING _executeInAtomSSBParentWin\n\n"'+a+'"');var o=function a(){r.shift();if(r.length)e.apply(null,r[0])};var i=2e3;var s=1;var l=2;var c=function e(){var r=setTimeout(function(){s+=1;if(s>l){TS.error('_executeInAtomSSBParentWin\n\n"'+a+'"\n\ndid not get a callback in '+i+"ms, bailing");o()}else{TS.error('_executeInAtomSSBParentWin\n\n"'+a+'"\n\ndid not get a callback in '+i+"ms, trying again");e()}},i);var c=TSSSB.call("executeJavaScriptInParentWindow",{code:a,callback:function e(i,l){clearTimeout(r);if(i)TS.error('_executeInAtomSSBParentWin\n\n"'+a+'"\n\nreturned err: '+i);else{var c="object"===("undefined"===typeof l?"undefined":n(l))?JSON.stringify(l,null,2):l;var _=1==s?438:0;TS.log(_,'_executeInAtomSSBParentWin\n\n"'+a+'"\n\nreturned data: '+c)}if(t)t(i,l);setTimeout(o,0)}});if(u)TS.log(u,'CALLED _executeInAtomSSBParentWin\n\n"'+a+'"\n\n ret: '+c);return c};var _=c();return!!_};var l=[];var c=function e(a,n,t){return TSSSB.call("executeJavaScriptInWindow",{window_token:a.token,code:n,callback:t})};var _=function e(a,t,o){if(u)TS.log(u,"CALLING _executeInAtomSSBWin token: "+a.token+'\n\n"'+t+'"');var r=function a(){l.shift();if(l.length)e.apply(null,l[0])};var i=2e3;var s=1;var c=2;var _=function e(){var l=setTimeout(function(){s+=1;if(s>c){TS.error("_executeInAtomSSBWin token: "+a.token+'\n\n"'+t+'"\n\ndid not get a callback in '+i+"ms, bailing");r()}else{TS.error("_executeInAtomSSBWin token: "+a.token+'\n\n"'+t+'"\n\ndid not get a callback in '+i+"ms, trying again");e()}},i);var _=TSSSB.call("executeJavaScriptInWindow",{window_token:a.token,code:t,callback:function e(i,c){clearTimeout(l);if(i)TS.error("_executeInAtomSSBWin token: "+a.token+'\n\n"'+t+'"\n\nreturned err: '+i);else{var _="object"===("undefined"===typeof c?"undefined":n(c))?JSON.stringify(c,null,2):c;var d=1==s?438:0;if(u)TS.log(d,"_executeInAtomSSBWin token: "+a.token+'\n\n"'+t+'"\n\nreturned data: '+_)}if(o)o(i,c);setTimeout(r,0)}});if(u)TS.log(u,"CALLED _executeInAtomSSBWin token: "+a.token+'\n\n"'+t+'"\n\n ret: '+_);return _};var d=_();return!!d};var u=438})()},2372:function(e,a){(function(){TS.registerModule("ui",{window_focus_changed_sig:new signals.Signal,window_unloaded_sig:new signals.Signal,onStart:function e(){$(window).bind("focus",TS.ui.onWindowFocus);$(window).bind("blur",TS.ui.onWindowBlur);n();$("html").bind("mousedown",function(){TS.ui.onWindowFocus({target:window})});var a=!!(document.hasFocus&&document.hasFocus());if(a)TS.ui.onWindowFocus({target:window});else TS.ui.onWindowBlur({target:window});if(TS.model.win_ssb_version)$("body").addClass("winssb");o()},setUpWindowUnloadHandlers:function e(){if("undefined"!==typeof window.addEventListener)window.addEventListener("beforeunload",TS.ui.onWindowUnload,false);else if("undefined"!==typeof document.addEventListener)document.addEventListener("beforeunload",TS.ui.onWindowUnload,false);else if("undefined"!==typeof window.attachEvent)window.attachEvent("onbeforeunload",TS.ui.onWindowUnload);else if("function"===typeof window.onbeforeunload)window.onbeforeunload=function(){TS.ui.onWindowUnload();return false};else window.onbeforeunload=TS.ui.onWindowUnload},onWindowUnload:function e(){if(TS.client)TS.client.markLastReadsWithAPI();TS.model.window_unloading=true;TS.ui.window_unloaded_sig.dispatch();TS.redux.dispatch(TS.interop.redux.entities.window.setUnloading(true))},maybeTickleMS:function e(){if(!TS.client)return;TS.client.ui.maybeTickleMS()},handleDraghoverstartFromWinSSB:function e(){TS.ui.file_share.handleDraghoverstartFromWinSSB()},handleDraghoverendFromWinSSB:function e(){TS.ui.file_share.handleDraghoverendFromWinSSB()},handleDropFromWinSSB:function e(a){TS.ui.file_share.handleDropFromWinSSB(a)},onWindowFocus:function e(a){if(a.target!==window&&a.target!==document)return;if(TS.model.ui.is_window_focused)return;TS.model.shift_key_pressed=false;TS.model.insert_key_pressed=false;TS.model.ui.is_window_focused=true;if(TS.view)TS.view.updateTitleBarColor();TS.ui.window_focus_changed_sig.dispatch(true);TS.redux.dispatch(TS.interop.redux.entities.window.updateFocus(true))},onWindowBlur:function e(a){if(a.target!==window&&a.target!==document)return;if(!TS.model.ui.is_window_focused)return;TS.model.shift_key_pressed=false;TS.model.insert_key_pressed=false;TS.model.ui.is_window_focused=false;TS.ui.window_focus_changed_sig.dispatch(false);TS.redux.dispatch(TS.interop.redux.entities.window.updateFocus(false))},onWindowVisibilityChange:function e(a){if("hidden"===document.visibilityState)TS.ui.onWindowBlur(a);else if("visible"===document.visibilityState)TS.ui.onWindowFocus(a)},needToShowAtChannelWarning:function e(a,n){var t;var o=TS.format.cleanMsg(n);var r=TS.model.everyone_regex.test(o);var i=TS.model.channel_regex.test(o);var s=TS.model.group_regex.test(o);var l=!!TS.prefs.getPref("last_seen_at_channel_warning");var c=new Date(TS.prefs.getPref("last_seen_at_channel_warning"));var _=l&&TS.interop.datetime.isSameDay(c,new Date);if(!r&&!i&&!s)return false;t=TS.shared.getModelObById(a);if(!t||t.is_im)return false;if((i||s)&&!TS.permissions.members.canAtChannelOrGroup(t.id))return false;if(t.is_general&&r&&!TS.permissions.members.canAtMentionEveryone(t.id))return false;if("never"===TS.prefs.getTeamPref("warn_before_at_channel"))return false;if("once"===TS.prefs.getTeamPref("warn_before_at_channel")&&l)return false;if("daily"===TS.prefs.getTeamPref("warn_before_at_channel")&&_)return false;return true},needToBlockAtChannelKeyword:function e(a,n,t){if(TS.interop.utility.looksLikeMemberId(t))return false;var o=TS.format.cleanMsg(a);var r=t&&TS.shared.getModelObById(t);var i=r&&!r.is_im&&!r.is_mpim||n&&(n.channels.length||n.groups.length);if(!i)return false;var s=TS.model.everyone_regex.test(o);var l=TS.model.here_regex.test(o);var c=TS.model.channel_regex.test(o);var _=TS.model.group_regex.test(o);var u=false;if(r)u=!!r.is_general;else if(n&&0===n.groups.length&&1===n.channels.length){var d=TS.channels.getChannelById(n.channels[0]);u=!!d.is_general}if(u&&s&&!l&&!c&&!_)if(TS.permissions.members.canAtMentionEveryone(t))return false;if(!TS.permissions.members.canAtChannelOrGroup(t)){if(l)return"@here";if(c)return"@channel";if(_)return"@group";if(s)return"@everyone"}var f=r&&r.is_general;if(!f&&n&&n.channels)n.channels.forEach(function(e){var a=TS.channels.getChannelById(e);if(a&&a.is_general)f=true});if(f&&!TS.permissions.members.canAtMentionEveryone(t))if(s||l||_||c)return"@everyone";return false},startButtonSpinner:function e(a){TS.ui.resetButtonSpinner(a);var n=t(a);if(!n.isLoading())n.start()},stopButtonSpinner:function e(a,n){var o=t(a);if(o.isLoading()){o.stop();if(n){var r=$(a).find(".ladda-label").text();$(a).data("original_text",r);$(a).removeClass("").addClass("btn_success").find(".ladda-label").html('<i class="ts_icon ts_icon_check_circle_o small_right_margin"></i>'+TS.i18n.t("Guardado","ui")())}}},resetButtonSpinner:function e(a){var n=t(a);if(n.isLoading())return;var o=$(a).data("original_text");if(o){$(a).find(".ladda-label").text(o);$(a).removeData("original_text");$(a).removeClass("btn_success").addClass("")}},showVersionInfo:function e(){var a="version_info";var n=new Date(1e3*TS.boot_data.version_ts)+" (<b>"+TS.boot_data.version_ts+"</b>)";TS.generic_dialog.start({title:TS.i18n.t("Información de la versión","ui")(),unique:a,body:TS.i18n.t('<p>Esta versión: {version_num}</p><p class="latest_version checking">Buscando actualizaciones…</p>',"ui")({version_num:n}),show_cancel_button:false,go_button_class:"btn_outline",go_button_text:TS.i18n.t("Cerrar","ui")(),show_secondary_go_button:false,onSecondaryGo:function e(){TS.reload(false,"TS.ui.showVersionsInfo dialog")}});TS.api.callImmediately("test.versionInfo").then(function(e){if(!TS.generic_dialog.is_showing||TS.generic_dialog.current_setting.unique!=a)return;var n=TS.generic_dialog.div.find(".latest_version");n.removeClass("checking");var t=e.data.version_ts.toString()==TS.boot_data.version_ts.toString();if(t)n.html(TS.i18n.t("¡Tu copia de Slack está actualizada! {tada_emoji}","ui")({tada_emoji:TS.emoji.graphicReplace(":tada:")}));else{TS.generic_dialog.div.find(".btn.dialog_secondary_go").removeClass("hidden").text("Update");var o=e.data.min_version_ts>TS.boot_data.version_ts;if(o)n.html(TS.i18n.t("Hay una nueva versión de Slack disponible. {sparkles_emoji}","ui")({sparkles_emoji:TS.emoji.graphicReplace(":sparkles:")}));else n.html(TS.i18n.t("Hay una nueva versión de Slack disponible. {sparkles_emoji}","ui")({sparkles_emoji:TS.emoji.graphicReplace(":sparkles:")}))}}).catch(_.noop)},setThemeClasses:function e(){$("body").removeClass("dense_theme light_theme");if("dense"===TS.prefs.getPref("theme"))$("body").addClass("dense_theme");else if("light"===TS.prefs.getPref("theme"))$("body").addClass("light_theme");else{TS.error("no theme?");return}if(TS.prefs.getPref("avatars"))$("body").removeClass("no_avatars");else $("body").addClass("no_avatars")}});var e;var a;var n=function n(){if("undefined"!==typeof document.hidden){a="hidden";e="visibilitychange"}else if("undefined"!==typeof document.msHidden){a="msHidden";e="msvisibilitychange"}else if("undefined"!==typeof document.webkitHidden){a="webkitHidden";e="webkitvisibilitychange"}if("undefined"!==typeof document[a])$(window).bind(e,TS.ui.onWindowVisibilityChange)};var t=function e(a){var n=$(a).data("ladda");if(!n){n=Ladda.create(a);$(a).data("ladda",n)}return n};var o=function e(){$("body").on("click.plastic_date",'input[type="text"][data-plastic-type="date"]',function(e){var a=$(e.target);if(!a.pickmeup)return;var n=!!a.closest("#fs_modal").length||$(this).data("flat");a.pickmeup({flat:n,first_day:window.moment.localeData().firstDayOfWeek()||0,hide_on_select:true,min:$(this).data("min")||null,max:$(this).data("max")||null,format:$(this).data("format")||"Y-m-d",class_name:"plastic_date_picker",hide:function e(){a.trigger("input")},title_format:"ja-JP"===TS.i18n.locale()?"Y年B":"B Y",locale:{days:window.moment.weekdays(),daysShort:window.moment.weekdaysShort(),daysMin:window.moment.weekdaysMin(),months:window.moment.months(),monthsShort:window.moment.monthsShort()}}).pickmeup("show");if(n){var t=a.data("picker");if(!t){t=$('<div class="position_relative no_margin no_padding"></div>');a.data("picker",t)}a.after(t.append(a.find(".pickmeup").detach()))}}).on("keydown.plastic_date",'input[type="text"][data-plastic-type="date"]',function(e){var a=$(e.target);if(!a.pickmeup)return;if(window.document.activeElement===e.target)a.pickmeup("hide")})}})()},2373:function(e,a){(function(){TS.registerModule("ui.file_share",{handleDraghoverstartFromWinSSB:function e(){$(window).trigger("draghoverstart",[null,true])},handleDraghoverendFromWinSSB:function e(){$(window).trigger("draghoverend")},handleDropFromWinSSB:function e(a){TS.info("handleDropFromWinSSB called files:"+a);$("body").removeClass("drop-target");if(TS.client.ui.checkForEditing())return;if(!a||!a.length){TS.warn("handleDropFromWinSSB called with no files");return}TS.client.ui.files.validateFiles(a,TS.model.shift_key_pressed)},preselected:[],bindFileShareDropdowns:function r(i,s,l,c,u){var d=$("#select_share_channels");var f="60%";if(TS.web&&TS.web.space)f="100%";if(1!=d.length){alert("error: "+d.length+" $('#select_share_channels')s");return}TS.ui.file_share.preselected=c||[];a=l;n=s;var m=TS.ui.file_share.promiseToGetFileShareSelectOptions;if(u)m=o;e={append:true,single:true,data_promise:m,approx_item_height:30,tab_to_nav:true,template:function e(a){return new Handlebars.SafeString(TS.templates.file_sharing_channel_row({item:a.model_ob,show_share_prefix:i}))},onItemAdded:t,onListHidden:function e(){$("#select_share_channels .lfs_list_container").removeClass("new_channel_container")},renderDividerFunc:function e(a,n){if(n.create_channel){a.html(TS.i18n.t('<span class="new">Ningún elemento coincide con <strong>{query}</strong></span>',"files")({query:_.escape(n.label)}));$("#select_share_channels .lfs_list_container").addClass("new_channel_container");return}$("#select_share_channels .lfs_list_container").removeClass("new_channel_container");a.html(_.escape(n.label)).removeClass("new_channel_not_found")},setValue:function e(a){var n;var t;var o=this.data.length;var r;for(n=0;n<o;n+=1){r=this.data[n].children.length;for(t=0;t<r;t+=1)if(this.data[n].children[t].model_ob.id===a){this.$container.find('.lfs_item[data-lfs-id="'+[n,t]+'"]').trigger("click");return}}}};if(TS.boot_data.feature_core_8327_fix)e.placeholder_text="Search channels and people ...";d.lazyFilterSelect(e);d.css({width:f});d.one("remove",function(){n=false;$(this).lazyFilterSelect("destroy")});$("#file_sharing_div").on("keydown",function(e){if(13==e.keyCode)e.stopPropagation()});d.lazyFilterSelect("getInstance").current_items_in_view_signal.add(function(e){var a=e.filter(function(e){return e.model_ob&&Object.prototype.hasOwnProperty.call(e.model_ob,"presence")}).map(function(e){return e.model_ob.id});TS.presence_manager.queryMemberPresence(a)})},promiseToGetFileShareSelectOptions:function e(a){var t=r();return TS.searcher.search(a,{members:{include_self:true},channels:{include_archived:false,can_post:true},groups:{include_archived:false},mpims:true,sort:{allow_empty_query:true}}).then(function(e){var o=false;e.all_items_fetched=true;e.filter(function(e){return TS.permissions.members.canPostInChannel(e.model_ob)}).forEach(function(e){e.lfs_id=e.model_ob.id;e.preselected=i(e.model_ob.id,t);if(e.preselected)o=true});var r=t?TS.shared.getModelObById(t):false;if(!a&&!o&&r)if(_.get(r,"is_im")){var l=TS.members.getMemberById(r.user);e.push({preselected:true,lfs_id:l.id,model_ob:l})}else if(r)if(TS.permissions.members.canPostInChannel(r))e.push({preselected:true,lfs_id:r.id,model_ob:r});if(r){TS.ui.share_message_dialog.maybeToggleSharedChannelsWarning(n,r);s(r)}var c=_(e).map("model_ob").filter(TS.utility.members.isMember).map("id").compact().value();TS.presence_manager.queryMemberPresence(c);return e})},bindFileShareShareToggle:function e(){$("#share_cb").bind("click.toggle_select_list",function(){if($(this).prop("checked"))$(".file_share_select").prop("disabled",false);else $(".file_share_select").prop("disabled",true);TS.ui.file_share.updateAtChannelWarningNote();TS.ui.file_share.updateAtChannelBlockedNote()})},bindFileShareCommentField:function e(){$("#file_comment_textarea").bind("keyup",function(){TS.ui.file_share.updateAtChannelWarningNote();TS.ui.file_share.updateAtChannelBlockedNote()})},updateAtChannelWarningNote:function e(a){var n=TS.utility.contenteditable.value($("#file_comment_textarea"));var t;var o=$("#select_share_channels").lazyFilterSelect("value")[0];var r;if(o)t=o.model_ob.id||"";var i=$("#select_share_at_channel_note");if(TS.ui.needToShowAtChannelWarning(t,n)){var s=TS.format.cleanMsg(n);var l="";var c=true;if(TS.model.everyone_regex.test(s))l="everyone";else if(TS.model.channel_regex.test(s))l="channel";else if(TS.model.group_regex.test(s))l="group";var u=TS.shared.getModelObById(t);if(!u||u.is_im)c=false;if(c&&!TS.members.haveAllMembersForModelOb(u)&&!a){var d=TS.membership.getMembershipCounts(u);if(d.promise){r=0;d.promise.then(TS.ui.file_share.updateAtChannelWarningNote);c=false}else{r=_.get(d,"counts.member_count",1);r-=1}}var f=[];if(_.isUndefined(r))if(c&&u&&!u.is_im){f=_(u.members).map(TS.members.getMemberById).compact().filter(TS.utility.members.isMemberNonBotNonDeletedNonSelf).sortBy(TS.members.memberSorterByName).value();if(f.length<1)c=false}if(c){var m=TS.templates.at_channel_warning_note({keyword:l,member_count:_.isUndefined(r)?f.length:r});i.html(m);i.removeClass("hidden");return}}i.addClass("hidden")},updateAtChannelBlockedNote:function e(){var a=TS.utility.contenteditable.value($("#file_comment_textarea"));var n;var t=$("#select_share_channels").lazyFilterSelect("value")[0];var o=$("#share_cb");var r=0===o.length||o.is(":checked");if(t&&r)n=t.model_ob.id;var i=$("#select_share_at_channel_blocked_note");var s=$(".modal .btn.dialog_go");var l;if(!TS.interop.utility.looksLikeMemberId(n))l=TS.ui.needToBlockAtChannelKeyword(a,null,n);if(l){i.html(TS.templates.at_channel_blocked_note({keyword:l}));i.removeClass("hidden");s.addClass("disabled")}else{i.addClass("hidden");s.removeClass("disabled")}},shouldBlockUploadDialogSubmission:function e(){var a=TS.utility.contenteditable.value($("#file_comment_textarea"));var n;var t=$("#select_share_channels").lazyFilterSelect("value")[0];var o=$("#share_cb");var r=0===o.length||o.is(":checked");if(t&&r)n=t.model_ob.id;var i;if(!TS.interop.utility.looksLikeMemberId(n))i=TS.ui.needToBlockAtChannelKeyword(a,null,n);if(i){TS.info("Can't submit dialog because comment contains "+i);return true}return false},fileShowPublicUrlDialog:function e(a){var n=l(a);if(!n||!n.public_url_shared)return;var t=$('<input type="text" id="public_url" class="full_width small">').attr("value",n.permalink_public)[0].outerHTML;var o;if(TS.boot_data.feature_external_files)o=TS.i18n.t('Enlace externo a este archivo <p style="display: inline-block;font-weight: 400">(puede compartirse con cualquiera)</p>',"files")();else o=TS.i18n.t("Enlace externo a este archivo","files")();TS.generic_dialog.start({title:o,body:t,show_cancel_button:false,show_close_button:true,show_secondary_go_button:true,secondary_go_button_class:"btn_outline",secondary_go_button_text:TS.i18n.t("Anular","files")(),show_go_button:true,go_button_text:TS.i18n.t("Listo","files")(),esc_for_ok:true,onSecondaryGo:function e(){TS.ui.file_share.fileRevokePublicLink(n.id)},onGo:function e(){TS.generic_dialog.cancel()},onShow:function e(){TS.generic_dialog.div.on("shown",function e(){TS.generic_dialog.div.off("shown",e);$("#public_url").select().focus().on("keydown",function(e){if(e.which==TS.utility.keymap.esc)TS.generic_dialog.cancel()})})}})},fileRevokePublicLink:function e(a){var n=TS.files.getFileById(a);if(!n)return false;var t;var o;if(TS.boot_data.feature_external_files){t=TS.i18n.t("Anular el enlace externo para el archivo","files")();o='<p class="no_bottom_margin">'+TS.i18n.t("Esto desactivará el enlace externo de este archivo. Dejarán de funcionar todos los enlaces compartidos con anterioridad.<br /><br />Confirma que quieres anular este enlace, por favor.","files")()+"</p>"}else{t=TS.i18n.t("Anular enlace externo","files")();o='<p class="no_bottom_margin">'+TS.i18n.t("Esto desactivará el enlace externo a este archivo, lo que hará que dejen de funcionar todos los enlaces compartidos con anterioridad.<br /><br />Por favor confirma que quieres anular este enlace externo.","files")()+"</p>"}TS.generic_dialog.start({title:t,body:o,go_button_text:TS.i18n.t("Anularlo","files")(),go_button_class:"btn_warning",onGo:function e(){TS.files.upsertAndSignal({id:n.id,public_url_shared:false});TS.api.callImmediately("files.revokePublicURL",{file:n.id})}})},test:function e(){var e={};Object.defineProperty(e,"_author",{get:function e(){return n},set:function e(a){n=a}});Object.defineProperty(e,"_populateDisabledInputMsg",{get:function e(){return s},set:function e(a){s=a}});return e}});var e={};var a=false;var n=false;var t=function e(a){$("#select_share_channels .lfs_input_container").removeClass("error");if(a.model_ob.create_channel){$("#select_share_channels_note").removeClass("hidden");$("#select_share_channels .lfs_value .lfs_item").addClass("new_channel_item");$(".modal .dialog_go").text(TS.i18n.t("Siguiente","files")());TS.metrics.count("share_picker_create_clicked");return}$("#select_share_channels .lfs_value .lfs_item").removeClass("new_channel_item");$(".modal .dialog_go").text(TS.i18n.t("Compartir","files")());var t;var o;t=a.model_ob.id;if(!t)return;$("#share_model_ob_id").val(t);$("#select_share_groups_note, #select_share_channels_note, #select_share_ims_note, #select_share_mpims_note, #select_share_channels_join_note").addClass("hidden");o=t.substring(0,1);var r=a.model_ob||{};if(TS.interop.utility.looksLikeMemberId(r.id))r=TS.ims.getImByMemberId(r.id)||r;TS.ui.share_message_dialog.maybeToggleSharedChannelsWarning(n,r);s(r);if(TS.shared.isModelObShared(r)||n&&TS.utility.teams.isMemberExternal(n)){$('label[for="file_comment_textarea"]').addClass("subtle_silver");TS.utility.contenteditable.disable($("#share_dialog #file_comment_textarea"));$("#select_share_at_channel_list").addClass("subtle_silver")}else{$('label[for="file_comment_textarea"]').removeClass("subtle_silver");TS.utility.contenteditable.enable($("#share_dialog #file_comment_textarea"));$("#select_share_at_channel_list").removeClass("subtle_silver")}if("C"===o){$("#select_share_channels_note").removeClass("hidden");$("#share_context_label").text(TS.i18n.t("Compartir en","files")());var i=TS.shared.getModelObById(t);if(i&&!i.is_member)$("#select_share_channels_join_note").removeClass("hidden")}else if("U"===o||"W"===o||"D"===o){$("#select_share_ims_note").removeClass("hidden");$("#share_context_label").text(TS.i18n.t("Compartir con","files")())}else if(a&&a.model_ob&&a.model_ob.is_mpim){$("#select_share_mpims_note").removeClass("hidden");$("#share_context_label").text(TS.i18n.t("Compartir con","files")())}else{$("#select_share_groups_note").removeClass("hidden");$("#share_context_label").text(TS.i18n.t("Compartir en","files")())}$("#share_cb").prop("checked",true);TS.ui.file_share.updateAtChannelWarningNote();TS.ui.file_share.updateAtChannelBlockedNote()};var o=function e(a){return TS.ui.file_share.promiseToGetFileShareSelectOptions(a).then(function(e){$("#select_share_channels .lfs_list_container").removeClass("new_channel_container");if(0===e.length){var n=TS.utility.channels.getPermissibleChannelName(a);if(n){e.push({lfs_group:true,label:a,create_channel:true,children:[{lfs_id:"c."+n,model_ob:{create_channel:true,name:n}}]});$("#select_share_channels .lfs_list_container").addClass("new_channel_container");TS.metrics.count("share_picker_create_shown")}}return e})};var r=function e(){if(TS.client&&TS.client.activeChannelIsHidden()){if(a)return a.id}else{var n=TS.shared.getActiveModelOb();if(n)return n.id}if(TS.web&&TS.web.space)return TS.web.space.getOriginChannel();return null};var i=function e(a,n){return TS.ui.file_share.preselected.length?TS.ui.file_share.preselected.indexOf(a)>-1:a===n};var s=function e(a){if(!_.isObject(a))return;if(TS.interop.utility.looksLikeMemberId(a.id))a=TS.ims.getImByMemberId(a.id)||a;var t="";if(n&&TS.utility.teams.isMemberExternal(n))t=TS.i18n.t("Solo los miembros de {team_name} pueden dejar un comentario en este archivo.","shared_channels")({team_name:TS.teams.getTeamNameByMember(n)});else if(a.is_channel||a.is_group)t=TS.i18n.t("Los comentarios están desactivados en los canales compartidos.","shared_channels")();else t=TS.i18n.t("Los comentarios están desactivados cuando se comparte un canal con otro espacio de  trabajo.","shared_channels")();$("#file_comment_textarea").attr("data-disabled-text",t)};var l=function e(a){return _.isString(a)?TS.files.getFileById(a):a}})()},263:function(e,a){(function(){TS.registerModule("clog",{onStart:function e(){t=TS.log&&TS.has_pri[t]?t:null;var a=3e4;var n=5e3;var o=Math.floor(Math.random()*n);setInterval(d,a+o);$(window).on("beforeunload pagehide",d);$("body").on("click",'[data-clog-click="true"], [data-clog-ui-action="click"], [data-clog-event=WEBSITE_CLICK]',m);p();TS.clog.flush()},setUser:function e(a){s=a},setTeam:function e(a){r=a},setEnterprise:function e(a){i=a},setLocale:function e(a){l=a},toggleDebugMode:function e(){c=!c;return c},track:function e(a,n){u(a,n)},trackClick:function e(a,n,t){$(a).on("click",function(){u(n,t)})},trackForm:function e(a,n,t){$(a).on("submit",function(){u(n,t)})},trackClickWithContext:function e(a){if(!a||!a.event)return;var n={contexts:{}};if(a.element)n.contexts={ui_context:{action:"click",ui_element:a.element}};if(a.contexts)n.contexts=g(n.contexts,a.contexts);TS.clog.track(a.event,n)},flush:function e(){d()},test:function a(){return{createLogURLs:f,sendDataAndEmptyQueue:d,detectClogEndpoint:_,getLogs:function e(){return o},getClogEndpoint:function a(){return e},reset:function a(){o=[];e=void 0}}},parseParams:function e(a){if(!a)return{};a=a.split(",");var n={};var t=0;var o=a.length;var r;for(t;t<o;t+=1){r=a[t].split("=");n[r[0]]=r[1]}return n}});var e;var a=2e3;var n=1e3;var t=n;var o=[];var r;var i;var s;var l;var c=false;var _=function a(n){var t=n.match(/^([^.]+\.)?(?:enterprise\.)?(dev[0-9]*)\.slack\.com/);var o=n.match(/^([^.]+\.)?(?:enterprise\.)?(qa[0-9]*)\.slack\.com/);var r=n.match(/^([^.]+\.)?(?:enterprise\.)?(staging)\.slack\.com/);if(t)e="https://"+t[2]+".slack.com/clog/track/";else if(o)e="https://"+o[2]+".slack.com/clog/track/";else if(r)e="https://staging.slack.com/clog/track/";else e="https://slack.com/clog/track/"};var u=function e(a,_){if("string"!==typeof a)return;if(!_)_=null;var u={tstamp:Date.now(),event:a,args:_};p();if(r)u.team_id=r;if(i)u.enterprise_id=i;if(s)u.user_id=s;if(l)u.i18n_locale=l;o.push(u);if(TS.log){if(c)TS.log(n,u);if(TS.has_pri[t])TS.log(t,"Event called:",a,_)}else if(c)try{console.log(u)}catch(e){}};var d=function e(){if(0===o.length)return;if(TS.log&&TS.has_pri[t]){TS.log(t,"Sending clog data, emptying queue");TS.log(t,"Logs: ",o)}var a=f(o);var n;for(var r=0;r<a.length;r+=1){n=a[r];var i=new Image;i.src=n;if(TS.log&&TS.has_pri[t])TS.log(t,"Logged event: "+n)}o=[]};var f=function n(o){if(!e)_(location.host);var r=[];var i=[];var s="";var l=function a(n){return e+"?logs="+encodeURIComponent(JSON.stringify(n))};var c;for(var u=0;u<o.length;u+=1){c=o[u];i.push(c);s=l(i);if(s.length>a){i.pop();r.push(l(i));i=[c]}}r.push(l(i));if(TS.log&&TS.has_pri[t])TS.log(t,"URLs:",r);return r};var m=function e(){var a=this.getAttribute("data-clog-event");if(!a){if(TS.warn)TS.warn("Logging clicks with data-clog-click requires a data-clog-event attribute");return}var n={};var t=TS.clog.parseParams(this.getAttribute("data-clog-params"));var o=this.getAttribute("data-clog-ui-action");if(o){n={ui_element:this.getAttribute("data-clog-ui-element"),action:this.getAttribute("data-clog-ui-action"),step:this.getAttribute("data-clog-ui-step"),ui_component:this.getAttribute("data-clog-ui-component")};n={contexts:{ui_context:n}}}switch(a.toUpperCase()){case"WEBSITE_CLICK":t.page_url=location.href}n=g(t,n);TS.clog.track(a,n)};var g=function e(a,n){var t={};Object.keys(a).forEach(function(e){t[e]=a[e]});Object.keys(n).forEach(function(e){t[e]=n[e]});return t};var p=function e(){if(TS.redux){var a=TS.redux.enterprise.getEnterpriseId();if(a)TS.clog.setEnterprise(a)}else if(TS.model)if(TS.model.enterprise&&TS.model.enterprise.id)TS.clog.setEnterprise(TS.model.enterprise.id);if(TS.model){if(TS.model.team&&TS.model.team.id)TS.clog.setTeam(TS.model.team.id);if(TS.model.user&&TS.model.user.id)TS.clog.setUser(TS.model.user.id)}if(TS.i18n)TS.clog.setLocale(TS.i18n.locale())}})()},276:function(e,a){(function(){TS.registerModule("experiment",{onStart:function n(){e=!!(TS.api&&TS.api.call);if(e)a=TS.api.call;else a=window.callSlackAPIUnauthed;if(TS.boot_data&&TS.boot_data.experiment_assignments)c(TS.boot_data.experiment_assignments)},loadLeadAssignments:function e(a){if(void 0===a){if(TS.warn)TS.warn("TS.experiment.loadLeadAssignments requires a lead_id");return Promise.resolve(false)}if(!r)r=l("experiments.getByLead",{lead_id:a});return r},loadVisitorAssignments:function e(){if(!s)s=l("experiments.getByVisitor");return s},loadUserAssignments:function a(){if(!e){if(TS.warn)TS.warn("TS.experiment.loadUserAssignments requires a user to be logged in");return Promise.resolve(false)}if(!i)i=l("experiments.getByUser");return i},getGroup:function e(a,t){if(!n[a])return null;if(n[a].log_exposures)u(a,n[a]);if(t&&n[a].group)t.forEach(function(e){o[e]=o[e]||[];if(o[e].indexOf(a)<0)o[e].push(a)});return n[a].group},getExperimentsForMetric:function e(a){var t=o[a];if(!t)return[];return t.map(function(e){return n[e]})},getAllAssignmentsForDebugging:function e(){return n},test:function e(){var a={};Object.defineProperty(a,"_recordAssignments",{get:function e(){return c},set:function e(a){c=a}});Object.defineProperty(a,"_metric_experiments",{get:function e(){return o},set:function e(a){o=a}});return a}});var e;var a;var n={};var t={};var o={};var r;var i;var s;var l=function e(n,t){return new Promise(function(e){a(n,_.extend(TS.interop.url.queryStringParse(location.search.substring(1)),t),function(a,n){if(a&&n.assignments)c(n.assignments);e(a)})})};var c=function e(a){var o;for(o in a){if(!_.isEqual(t[o],a[o]))t[o]=null;n[o]=a[o]}};var u=function e(a,n){if(TS.clog&&!_.isEqual(t[a],n)){TS.clog.track("EXPERIMENT_EXPOSURE",{experiment_name:a,experiment_type:n.type,experiment_id:n.experiment_id,experiment_group:n.group,experiment_trigger:n.trigger,exposure_id:n.exposure_id});t[a]=n}}})()},549:function(e,a){var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function(){TS.registerModule("emoji",{onStart:function e(){if(TS.web)TS.web.login_sig.add(TS.emoji.onLogin);if(TS.client)TS.client.login_sig.add(TS.emoji.onLogin);TS.prefs.jumbomoji_changed_sig.add(T);if(TS.boot_data.feature_update_emoji_to_v4){S();h.forEach(function(e){TS.emoji.spliceSkinToneVariationsIntoAnArrayOfEmojiNames(e.emoji_names)})}var a=true;b=TS.utility.throttleFunc(b,3e3,a)},onLogin:function e(){T()},isValidName:function a(n){if(!n)return false;n=TS.emoji.stripWrappingColons(n).toLowerCase();if("undefined"===typeof e[n])return false;return n},isEmojiNameSafe:function e(a){var n=_.get(g,"rx_colons.source");var t=new RegExp("^"+n+"$");var o=":"+a+":";return t.test(o)},substringMatchesName:function e(a,n){if(!a||!n||!_.isString(a)||!_.isString(n))return false;if("::"===n)return false;var t=":"===n.charAt(0);var o=":"===n.slice(-1);n=TS.emoji.stripWrappingColons(n.toLowerCase());if(!n)return true;if(t&&o)return n===a;if(t)return a.slice(0,n.length)===n;if(o)return a.slice(-1*n.length)===n;var r=-1!==a.indexOf(n);if(r)return true;return false},emojiMatchesTerm:function e(a,n,t){if(!a||!n)return false;var o=TS.emoji.nameToBaseName(a.display_name||a.name);if(TS.boot_data.feature_localization){n=TS.emoji.normalizeSearchTerm(n);o=TS.interop.I18n.deburr(o)}if(TS.emoji.substringMatchesName(o,n))return true;var r=a.display_names||a.names;if(TS.boot_data.feature_localization){r=TS.interop.I18n.deburr(r);if(a.display_names&&a.display_names!==a.names)r+=" "+a.names}var i=r.split(" ");for(var s=0;s<i.length;s+=1)if(TS.emoji.substringMatchesName(TS.emoji.nameToBaseName(i[s]),n))return true;return-1!==_.indexOf(t,o)},normalizeSearchTerm:function e(a){if(!a||!_.isString(a))return;a=a.toLowerCase();a=TS.interop.I18n.deburr(a);a=a.replace(/['ʼ’]/g,"'");return a},nameToBaseName:function e(a){if(!_.isString(a))return"";if(TS.boot_data.feature_localization)a=TS.emoji.stripLocalizedSkinTone(a);else a=a.replace(/(:skin-tone-[2-6]:)/,"");a=TS.emoji.stripWrappingColons(a);return a},stripLocalizedSkinTone:function e(a){var n=/::skin-tone-[2-6]:/g;if(TS.boot_data.feature_localization&&TS.i18n.locale()!==TS.interop.I18n.DEFAULT_LOCALE){var t=TS.emoji.getLocalSkinToneName();n=new RegExp("::"+t+"-[2-6]:","g")}a=a.replace(n,":");return a},stripWrappingColons:function e(a){if(!a)return"";a="string"===typeof a?a:""+a;if(":"===a[0]){if(":"===a[a.length-1])return a.slice(1,a.length-1);return a.slice(1,a.length)}else if(":"===a[a.length-1])return a.slice(0,a.length-1);return a},nameToCanonicalName:function e(a){a=TS.emoji.stripWrappingColons(a);if(!a)return"";a=String(a).toLowerCase();var n=function(){var e=a.split("::");if(2!=e.length)return"";a=e[0];return"::"+e[1]}();return(d()[a]||a)+n},emojiHasAliases:function e(a){return-1!==a.names.indexOf(" ")},addCustomEmoji:function e(a,n,t){y(a,n,t)},removeCustomEmoji:function e(a,n){var t;y(a,t,n)},ingestCustoms:function e(a){TS.model.all_custom_emoji.length=0;TS.model.emoji_complex_customs={};o={};var t;var r;var i=[];_.forOwn(g.data,function(e){i.push.apply(i,e[3])});function s(e){return g.map.colons.hasOwnProperty(e)||i.indexOf(e)>=0}function l(e){var a=TS.emoji.maybeGetCanonicalEmojiName(e);return a!==e}_.forOwn(a,function(e,a){if("object"===("undefined"===typeof e?"undefined":n(e))){TS.model.emoji_complex_customs[a]=e;g.data[a]=[[],null,null,[a],null,null,null,e.apple];g.map.colons[a]=a;TS.model.all_custom_emoji.push(a)}else{if(0===e.indexOf("alias:"))return;if(s(a)){TS.error("can't ingest custom emoji :"+a+": because that already exists");return}if(!TS.emoji.isEmojiNameSafe(a)){TS.error("can't ingest custom emoji :"+a+": because it's invalid");return}g.data[a]=[[],null,null,[a],null,null,null,e];g.map.colons[a]=a;TS.model.all_custom_emoji.push(a)}});_.forOwn(a,function(e,a){if("object"===("undefined"===typeof e?"undefined":n(e))||0!==e.indexOf("alias:"))return;if(s(a)){TS.error("can't ingest custom emoji :"+a+": because that already exists");return}if(!TS.emoji.isEmojiNameSafe(a)){TS.error("can't ingest custom emoji :"+a+": because it's invalid");return}t=e.replace("alias:","");r=g.data.hasOwnProperty(t)&&g.data[t];if(r){r[3].push(a);g.map.colons[a]=t;return}t=g.map.colons.hasOwnProperty(t)&&g.map.colons[t];r=g.data.hasOwnProperty(t)&&g.data[t];if(r){r[3].push(a);g.map.colons[a]=t;return}if(TS.boot_data&&TS.boot_data.feature_tinyspeck)TS.warn('alias for "'+a+'":"'+e+'" not recognized')});if(TS.boot_data.feature_localization&&TS.i18n.locale()!==TS.interop.I18n.DEFAULT_LOCALE)_.forOwn(a,function(e,a){if(l(a))o[a]=true});TS.model.all_custom_emoji=TS.model.all_custom_emoji.sort();if(g&&g.inits){delete g.inits.emoticons;g.init_emoticons()}u=f()},setUpEmoji:function e(){return new Promise(function(e){if(!g){if(TS.boot_data.feature_tinyspeck)TS.log(250,"BOOT: Done setting up emoji, there was nothing to do");return e()}var a=function a(){g.buildKeywordIndex();w();if(TS.boot_data.feature_tinyspeck)TS.log(250,"BOOT: Done setting up emoji");e()};v();if(!TS.boot_data.page_needs_custom_emoji)return a();if(!TS.boot_data.page_needs_custom_emoji_fresh){var n=TS.storage.fetchCustomEmoji();if("calls"===TS.boot_data.app&&!TS.model.emoji_cache_ts)TS.model.emoji_cache_ts=_.get(TS.storage.fetchCustomEmoji(),"cache_ts");if(n&&TS.model.emoji_cache_ts==n.cache_ts){TS.model.did_we_load_with_emoji_cache=true;TS.emoji.ingestCustoms(n.data);return a()}}if(TS.boot_data.feature_tinyspeck)TS.log(250,"BOOT: Fetching emoji list before setting up emoji");var t=function e(n,t){if(!n||!t.emoji)return a();TS.model.emoji_cache_ts=t.cache_ts;TS.storage.storeCustomEmoji({data:t.emoji,cache_ts:TS.model.emoji_cache_ts});TS.emoji.ingestCustoms(t.emoji);a()};TS.api.call("emoji.list",{include_complex_values:1}).then(function(e){var a=e.data,n=e.args,o=e.request_id;var r=true;t(r,a,n,o);return{data:a,args:n,request_id:o}}).catch(function(e){var a=e.data,n=e.args,o=e.request_id;var r=false;t(r,a,n,o);return{data:a,args:n,request_id:o}})})},resetUpEmoji:function e(){TS.storage.storeCustomEmoji("");b()},maybeRemakeMenuListsIfFrequentsChanged:function e(){if(TS.boot_data.feature_react_emoji_picker_frecency)return;var n=l();if(!TS.utility.areSimpleObjectsEqual(n,a,"maybemakeMenuLists"))if(TS.boot_data.feature_localization)c(n);else TS.emoji.makeMenuLists()},replaceFrecentlyUsed:function e(){if(!TS.boot_data.feature_react_emoji_picker_frecency)return;var a=C();if(!a.length)return;if(!_.isEqual(a,t)){c(a);t=a}},makeMenuLists:function n(){TS.model.emoji_groups.length=0;TS.model.emoji_names.length=0;e={};var t=_.cloneDeep(h);var r=k();if(r&&r.length)t.push({display_name:TS.i18n.t("Personalizar","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_slack"></i></span>',tab_icon:"ts_icon_slack",tab_icon_name:"slack",name:"slack",emoji_names:r});a=l();t.unshift({name:"mine",display_name:TS.i18n.t("Más usados","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_clock_o"></i></span>',tab_icon:"ts_icon_clock_o",tab_icon_name:"clock_o",emoji_names:a});var i;var s;var c=[];for(i=0;i<t.length;i+=1)c=c.concat(t[i].emoji_names);var u={};Object.keys(g.data).forEach(function(a){var n=g.data[a][3];var t=TS.emoji.isIdxSkinToneModifiable(a);n.forEach(function(n,o,r){var i=n;var s=r;TS.model.emoji_names.push(n);e[n]=true;if(TS.boot_data.feature_localization&&TS.i18n.locale()!==TS.interop.I18n.DEFAULT_LOCALE){i=TS.emoji.maybeGetLocalizedEmojiName(n);s=r.map(function(e){return TS.emoji.maybeGetLocalizedEmojiName(e,TS.i18n.locale())})}u[n]={html:TS.emoji.graphicReplace(":"+n+":"),name:":"+n+":",names:":"+r.join(": :")+":",display_name:":"+i+":",display_names:":"+s.join(": :")+":"};TS.model.emoji_map.push({id:"E"+a+(o>0?"_alias_"+o:""),name:n,name_with_colons:":"+n+":",display_name:i,is_skin:t,is_emoji:true});if(t){u[n].is_skin=true;u[n].skin_tone_id="1";g.skin_tones.forEach(function(t){if(!m(a,t))return;var o=g.data[t];var l=o[3][0];var c=n+"::"+l;TS.model.emoji_names.push(c);e[c]=true;var _=":"+c+":";var d=r.map(function(e){return e+"::"+l});var f=_;var p=d;if(TS.boot_data.feature_localization&&TS.i18n.locale()!==TS.interop.I18n.DEFAULT_LOCALE){var h=TS.emoji.maybeGetLocalizedEmojiName(l);f=":"+i+"::"+h+":";p=s.map(function(e){return e+"::"+h})}u[c]={is_skin:true,skin_tone_id:l.substr(-1,1),html:TS.emoji.graphicReplace(_),name:_,names:":"+d.join(": :")+":",display_name:f,display_names:":"+p.join(": :")+":"}})}})});p=u;TS.model.emoji_map=_.uniqBy(TS.model.emoji_map,"id");for(i=0;i<c.length;i+=1){var d=c[i];if(!u[d])TS.info(d+" not in cat_map?")}var f;var S;var b;var T;for(i=0;i<t.length;i+=1){f=t[i];S=[];b=null;T="";if(f.tab_icon_html)T=f.tab_icon_html;for(s=0;s<f.emoji_names.length;s+=1){b=u[f.emoji_names[s]];S.push(b);if(T)continue;if(f.emoji_names[s]==f.name)T=b.html}b=S[0];TS.model.emoji_groups.push({name:f.name,display_name:f.display_name,tab_html:T||b.html,tab_icon:f.tab_icon,tab_icon_name:f.tab_icon_name,items:S})}var v=TS.emoji.getCurrentSheetUrl();if(x("ss_emojis")&&v){var w=new Image;w.onload=function(){w.onload=null;w.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";w=null};w.src=v}TS.model.emoji_names.sort();TS.emoji.friendlyReorder();var y=TS.model.emoji_names.indexOf("ok");var j=TS.model.emoji_names.indexOf("ok_hand");TS.model.emoji_names[y]="ok_hand";TS.model.emoji_names[j]="ok";if(TS.boot_data.feature_localization&&TS.i18n.locale()!==TS.interop.I18n.DEFAULT_LOCALE)_.each(o,function(e,a){_.remove(TS.model.emoji_map,{name:a})});var E=function e(a){var n=TS.model.emoji_names.concat();["skin-tone-2","skin-tone-3","skin-tone-4","skin-tone-5","skin-tone-6"].forEach(function(e){_.pull(n,e)});a.forEach(function(e){e.emoji_names.forEach(function(e){_.pull(n,e);var a=g.map.colons[e];var t=g.data[a];if(t)t[3].forEach(function(e){[e,e+"::skin-tone-2",e+"::skin-tone-3",e+"::skin-tone-4",e+"::skin-tone-5",e+"::skin-tone-6"].forEach(function(e){_.pull(n,e)})})})});if(TS.boot_data.feature_localization&&TS.i18n.locale()!==TS.interop.I18n.DEFAULT_LOCALE)_.each(o,function(e,a){_.pull(n,a)});if(n.length)TS.error("testGroupings() expected these emoji names to be in a category, but they were not found! "+n.join(","))};if("dev"===TS.boot_data.version_ts)E(t)},friendlyReorder:function e(){var a=[{filter:"th",first:"thumbsup",second:"thumbsdown"},{filter:"po",first:"point_up",second:"point_down"}];a.forEach(function(e){var a=_.reduce(TS.model.emoji_names,function(a,n,t){if(0===n.indexOf(e.filter)){var o=TS.model.all_custom_emoji.indexOf(n)>-1;var r=!o&&0===n.indexOf(e.first);var i=!o&&!r&&0===n.indexOf(e.second);a.emoji.push({name:n,is_first:r,is_second:i});a.indexes.push(t)}return a},{indexes:[],emoji:[]});a.emoji=_.orderBy(a.emoji,["is_first","is_second","name"],["desc","desc","asc"]);_.forEach(a.emoji,function(e,n){var t=a.indexes[n];TS.model.emoji_names[t]=e.name})})},isIdxSkinToneModifiable:function e(a){return m(a,g.skin_tones[0])},isNameSkinToneModifiable:function e(a){a=TS.emoji.stripWrappingColons(a);a=String(a).toLowerCase();var n=g.map.colons[a];return TS.emoji.isIdxSkinToneModifiable(n)},graphicReplace:function e(a,n){if(!a)return"";n=n||{};if(n.show_icon_for_emoji_in_as_text_mode&&TS.emoji.isValidName(a))return'<ts-icon class="emoji-sizer ts_icon_info_circle ts_icon_inherit" title="'+a.replace(/:/g,"")+'"></ts-icon>';g.init_env();var t=g.text_mode;var o=g.include_title;var r=g.include_text;var i=g.supports_css;var s=g.allow_skin_tone_squares;if(n.force_img&&n.obey_emoji_mode_pref){n.obey_emoji_mode_pref=false;TS.error("obey_emoji_mode_pref now set to FALSE because options.force_img is TRUE")}if(n.force_style&&n.obey_emoji_mode_pref){n.obey_emoji_mode_pref=false;TS.error("obey_emoji_mode_pref now set to FALSE because options.force_style is "+n.force_style)}g.text_mode=n.obey_emoji_mode_pref&&"as_text"===x("emoji_mode");if(n.force_style){TS.emoji.setEmojiMode(n.force_style);g.use_sheet=false}g.include_title=!!n.include_title;g.include_text=!!n.include_text;g.supports_css=!n.force_img;g.allow_skin_tone_squares=!n.no_skin_tone_squares;var l=g.replace_colons(a,{stop_animations:n.stop_animations});if(n.jumbomoji)l=l.replace("emoji-sizer","emoji-sizer emoji-only");if(n.force_style)TS.emoji.setEmojiMode();g.text_mode=t;g.include_title=o;g.include_text=r;g.supports_css=i;g.allow_skin_tone_squares=s;return l},replaceColons:function e(a){if(a.indexOf(":")<0)return a;return g.replace_colons(a)},maybeUnifiedReplace:function e(a){if("unified"!==g.replace_mode)return a;return g.replace_colons_with_unified(a)},replaceEmoticons:function e(a){return g.replace_emoticons_with_colons(a)},eachEmoticon:function e(a,n){a.replace(g.rx_emoticons,n)},getLocalSkinToneName:function e(){var a="skin-tone";if(TS.boot_data.feature_localization&&TS.i18n.locale()!==TS.interop.I18n.DEFAULT_LOCALE)a=TSFEmoji.getLocalSkinToneName(TS.i18n.locale());return a},getChosenSkinTone:function e(a){var n=parseInt(x("preferred_skin_tone"),10);if(!n||"1"==n||!_.includes([2,3,4,5,6],n))return"";var t=a?TS.emoji.getLocalSkinToneName():"skin-tone";return t+"-"+n},getChosenSkinToneModifier:function e(a){var n=TS.emoji.getChosenSkinTone(a);if(!n)return"";return":"+n+":"},setEmojiMode:function e(a){var n=["google","emojione","twitter","apple"];a=a||x("emoji_mode");g.text_mode="as_text"===a;g.do_emoticons=!!x("graphic_emoticons");g.allow_native=false;g.use_sheet=function(){if(!x("ss_emojis"))return false;return!!TS.boot_data.page_needs_custom_emoji}();g.img_set=_.includes(n,a)?a:"apple";if(!TS.model.emoji_complex_customs)return;for(var t in TS.model.emoji_complex_customs){if(!g.data[t])continue;g.data[t][7]=TS.model.emoji_complex_customs[t][g.img_set]}},getColonsRx:function e(){return g.rx_colons},getEmojiByName:function e(a){if(!a)return;return _.find(TS.model.emoji_map,{name:a})},getEmojiById:function e(a){var n=_.find(TS.model.emoji_map,{id:a});if(!n){TS.warn("no emoji ob found for "+a);return}return n},getEmojiMap:function e(){return TS.model.emoji_map},getEmojiForSpaces:function e(){var a={emoticonEmojiNames:g.emoticons_data,emoji:{},sheetSize:g.sheet_size,sheetPath:TS.emoji.getCurrentSheetUrl(),replace:function e(){var a=g.colons_mode;g.colons_mode=true;var n=g.replace_unified.apply(g,arguments);if(TS.boot_data.feature_localization&&TS.i18n.locale()!==TS.interop.I18n.DEFAULT_LOCALE)n=TS.emoji.maybeGetCanonicalEmojiString(n);g.colons_mode=a;return n}};if(TS.boot_data.feature_localization&&TS.i18n.locale()!==TS.interop.I18n.DEFAULT_LOCALE)a.getLocalEmojiString=function(e){return TS.emoji.maybeGetLocalizedEmojiName(e)||e};Object.keys(g.data).forEach(function(e){var n=g.data[e];var t=n[3];var o=n[4];var r=n[5];var i=n[7];var s;if(null!==o&&null!==r)s=[o,r];else if(i)s=false===x("a11y_animations")?TS.utility.getImgProxyURLWithOptions(i,{emoji:true}):i;else{TS.error('WTF, _emoji "'+e+'" is missing coords or and a url, or something!');return}t.forEach(function(e){a.emoji[e]=s})});return a},getCurrentSheetUrl:function e(){return g.img_sets[g.img_set].sheet},getCurrentImagePath:function e(){return g.img_sets[g.img_set].path},hasUnifiedEmoji:function e(a){g.init_unified();return-1!==a.search(g.rx_unified)},test:function e(){return{emoji:g}},spliceSkinToneVariationsIntoAnArrayOfEmojiNames:function e(a){var n=0;a.concat().forEach(function(e,t){var o=g.map.colons[e];var r=g.data.hasOwnProperty(o)&&g.data[o];if(!r)return;g.skin_tones.forEach(function(r){if(!m(o,r))return;var i=g.data[r];var s=i[3][0];var l=e+"::"+s;if(-1!==a.indexOf(l))return;n+=1;var c=n+t;a.splice(c,0,l)})})},findByKeyword:function e(a){return g.findByKeyword(a)},maybeGetCanonicalEmojiString:function e(a){if(TS.boot_data.feature_localization&&TS.i18n.locale()!==TS.interop.I18n.DEFAULT_LOCALE)return TSFEmoji.translateEmojiStringToCanonical(a,TS.i18n.locale(),{include_emoji_4:TS.boot_data.feature_update_emoji_to_v4});return a},maybeGetLocalizedEmojiString:function e(a){if(TS.boot_data.feature_localization&&TS.i18n.locale()!==TS.interop.I18n.DEFAULT_LOCALE)return TSFEmoji.translateEmojiStringToLocal(a,TS.i18n.locale(),{include_emoji_4:TS.boot_data.feature_update_emoji_to_v4});return a},maybeGetLocalizedEmojiName:function e(a){if(TS.i18n.locale()!==TS.interop.I18n.DEFAULT_LOCALE)return TSFEmoji.getLocalEmojiString(a,TS.i18n.locale(),{include_emoji_4:TS.boot_data.feature_update_emoji_to_v4});return a},maybeGetCanonicalEmojiName:function e(a){if(TS.i18n.locale()!==TS.interop.I18n.DEFAULT_LOCALE)return TSFEmoji.getCanonicalEmojiString(a,TS.i18n.locale(),{include_emoji_4:TS.boot_data.feature_update_emoji_to_v4});return a},MISSING_EMOJI_HTML:'<span class="emoji-outer emoji-sizer emoji-bg-contain" style="background-image: url('+cdn_url+'/ecf3e/img/emoji_missing.png);"></span>'});var e={};var a;var t;var o={};var r="E";var i=36;var s=50;var l=function e(){var a;var n={};_.each(_.keys(TS.model.emoji_use),function(e){a=TS.emoji.nameToCanonicalName(e.split("::")[0]);if(TS.boot_data.feature_localization&&TS.i18n.locale()!==TS.interop.I18n.DEFAULT_LOCALE)if(j(a))return;if(!n.hasOwnProperty(a))n[a]=0;n[a]+=TS.model.emoji_use[e]});TS.dir(777,n,"condensed emoji names:");var t=Object.keys(n).sort(function(e,a){var t=n[e];var o=n[a];if(t==o){if(e<a)return-1;if(e>a)return 1}return-(t-o)});t.length=Math.min(t.length,4*TS.model.emoji_menu_columns);var o=["slightly_smiling_face","heart","+1","100","bug"];var r;while(t.length<5&&o.length){r=o.shift();if(-1===t.indexOf(r))t.push(r)}TS.emoji.spliceSkinToneVariationsIntoAnArrayOfEmojiNames(t);return t};var c=function e(n){a=n;var t=_.find(_.get(TS.model,"emoji_groups"),{name:"mine"});if(!t)TS.emoji.makeMenuLists();var o=[];a.forEach(function(e){var a=p[e];if(a)o.push(a)});t.items=o};var u;var d=function e(){u=u||f();return u};var f=function e(){var a={};var n;Object.keys(g.data).forEach(function(e){n=g.data[e];a[n[3][0]]=null;n[3].forEach(function(e){if(a.hasOwnProperty(e))return;a[e]=n[3][0]})});return a};var m=function e(a,n){if(TS.boot_data.feature_update_emoji_to_v4)return!!(g.variations_data[a]&&g.variations_data[a][n]);return!!g.variations_data[a+"-"+n]};var g=emoji;var p={};var h=[{name:"people",display_name:TS.i18n.t("Gente","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_happy_smile"></i></span>',tab_icon:"ts_icon_happy_smile",tab_icon_name:"happy_smile",emoji_names:["grinning","grimacing","grin","joy","smiley","smile","sweat_smile","laughing","innocent","wink","blush","slightly_smiling_face","upside_down_face","relaxed","yum","relieved","heart_eyes","kissing_heart","kissing","kissing_smiling_eyes","kissing_closed_eyes","stuck_out_tongue_winking_eye","stuck_out_tongue_closed_eyes","stuck_out_tongue","money_mouth_face","nerd_face","sunglasses","hugging_face","smirk","no_mouth","neutral_face","expressionless","unamused","face_with_rolling_eyes","thinking_face","flushed","disappointed","worried","angry","rage","pensive","confused","slightly_frowning_face","white_frowning_face","persevere","confounded","tired_face","weary","triumph","open_mouth","scream","fearful","cold_sweat","hushed","frowning","anguished","cry","disappointed_relieved","sleepy","sweat","sob","dizzy_face","astonished","zipper_mouth_face","mask","face_with_thermometer","face_with_head_bandage","sleeping","zzz","hankey","smiling_imp","imp","japanese_ogre","japanese_goblin","skull","ghost","alien","robot_face","smiley_cat","smile_cat","joy_cat","heart_eyes_cat","smirk_cat","kissing_cat","scream_cat","crying_cat_face","pouting_cat","raised_hands","clap","wave","+1","-1","facepunch","fist","v","ok_hand","hand","open_hands","muscle","pray","point_up","point_up_2","point_down","point_left","point_right","middle_finger","raised_hand_with_fingers_splayed","the_horns","spock-hand","writing_hand","nail_care","lips","tongue","ear","nose","eye","eyes","bust_in_silhouette","busts_in_silhouette","speaking_head_in_silhouette","baby","boy","girl","man","woman","person_with_blond_hair","older_man","older_woman","man_with_gua_pi_mao","man_with_turban","cop","construction_worker","guardsman","sleuth_or_spy","santa","angel","princess","bride_with_veil","walking","runner","dancer","dancers","couple","two_men_holding_hands","two_women_holding_hands","bow","information_desk_person","no_good","ok_woman","raising_hand","person_with_pouting_face","person_frowning","haircut","massage","couple_with_heart","woman-heart-woman","man-heart-man","couplekiss","woman-kiss-woman","man-kiss-man","family","man-woman-girl","man-woman-girl-boy","man-woman-boy-boy","man-woman-girl-girl","woman-woman-boy","woman-woman-girl","woman-woman-girl-boy","woman-woman-boy-boy","woman-woman-girl-girl","man-man-boy","man-man-girl","man-man-girl-boy","man-man-boy-boy","man-man-girl-girl","womans_clothes","shirt","jeans","necktie","dress","bikini","kimono","lipstick","kiss","footprints","high_heel","sandal","boot","mans_shoe","athletic_shoe","womans_hat","tophat","helmet_with_white_cross","mortar_board","crown","school_satchel","pouch","purse","handbag","briefcase","eyeglasses","dark_sunglasses","ring","closed_umbrella"]},{name:"nature",display_name:TS.i18n.t("Naturaleza","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_emoji_nature"></i></span>',tab_icon:"ts_icon_emoji_nature",tab_icon_name:"emoji_nature",emoji_names:["dog","cat","mouse","hamster","rabbit","bear","panda_face","koala","tiger","lion_face","cow","pig","pig_nose","frog","octopus","monkey_face","see_no_evil","hear_no_evil","speak_no_evil","monkey","chicken","penguin","bird","baby_chick","hatching_chick","hatched_chick","wolf","boar","horse","unicorn_face","bee","bug","snail","beetle","ant","spider","scorpion","crab","snake","turtle","tropical_fish","fish","blowfish","dolphin","whale","whale2","crocodile","leopard","tiger2","water_buffalo","ox","cow2","dromedary_camel","camel","elephant","goat","ram","sheep","racehorse","pig2","rat","mouse2","rooster","turkey","dove_of_peace","dog2","poodle","cat2","rabbit2","chipmunk","feet","dragon","dragon_face","cactus","christmas_tree","evergreen_tree","deciduous_tree","palm_tree","seedling","herb","shamrock","four_leaf_clover","bamboo","tanabata_tree","leaves","fallen_leaf","maple_leaf","ear_of_rice","hibiscus","sunflower","rose","tulip","blossom","cherry_blossom","bouquet","mushroom","chestnut","jack_o_lantern","shell","spider_web","earth_americas","earth_africa","earth_asia","full_moon","waning_gibbous_moon","last_quarter_moon","waning_crescent_moon","new_moon","waxing_crescent_moon","first_quarter_moon","moon","new_moon_with_face","full_moon_with_face","first_quarter_moon_with_face","last_quarter_moon_with_face","sun_with_face","crescent_moon","star","star2","dizzy","sparkles","comet","sunny","mostly_sunny","partly_sunny","barely_sunny","partly_sunny_rain","cloud","rain_cloud","thunder_cloud_and_rain","lightning","zap","fire","boom","snowflake","snow_cloud","snowman_without_snow","snowman","wind_blowing_face","dash","tornado","fog","umbrella","umbrella_with_rain_drops","droplet","sweat_drops","ocean"]},{name:"food_and_drink",display_name:TS.i18n.t("Comida y bebida","client")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_emoji_food"></i></span>',tab_icon:"ts_icon_emoji_food",tab_icon_name:"emoji_food",emoji_names:["green_apple","apple","pear","tangerine","lemon","banana","watermelon","grapes","strawberry","melon","cherries","peach","pineapple","tomato","eggplant","hot_pepper","corn","sweet_potato","honey_pot","bread","cheese_wedge","poultry_leg","meat_on_bone","fried_shrimp","egg","hamburger","fries","hotdog","pizza","spaghetti","taco","burrito","ramen","stew","fish_cake","sushi","bento","curry","rice_ball","rice","rice_cracker","oden","dango","shaved_ice","ice_cream","icecream","cake","birthday","custard","candy","lollipop","chocolate_bar","popcorn","doughnut","cookie","beer","beers","wine_glass","cocktail","tropical_drink","champagne","sake","tea","coffee","baby_bottle","fork_and_knife","knife_fork_plate"]},{name:"activity",display_name:TS.i18n.t("Actividad","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_emoji_activities"></i></span>',tab_icon:"ts_icon_emoji_activities",tab_icon_name:"emoji_activities",emoji_names:["soccer","basketball","football","baseball","tennis","volleyball","rugby_football","8ball","golf","golfer","table_tennis_paddle_and_ball","badminton_racquet_and_shuttlecock","ice_hockey_stick_and_puck","field_hockey_stick_and_ball","cricket_bat_and_ball","ski","skier","snowboarder","ice_skate","bow_and_arrow","fishing_pole_and_fish","rowboat","swimmer","surfer","bath","person_with_ball","weight_lifter","bicyclist","mountain_bicyclist","horse_racing","man_in_business_suit_levitating","trophy","running_shirt_with_sash","sports_medal","medal","reminder_ribbon","rosette","ticket","admission_tickets","performing_arts","art","circus_tent","microphone","headphones","musical_score","musical_keyboard","saxophone","trumpet","guitar","violin","clapper","video_game","space_invader","dart","game_die","slot_machine","bowling"]},{name:"travel_and_places",display_name:TS.i18n.t("Viajes y lugares","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_emoji_travel"></i></span>',tab_icon:"ts_icon_emoji_travel",tab_icon_name:"emoji_travel",emoji_names:["car","taxi","blue_car","bus","trolleybus","racing_car","police_car","ambulance","fire_engine","minibus","truck","articulated_lorry","tractor","racing_motorcycle","bike","rotating_light","oncoming_police_car","oncoming_bus","oncoming_automobile","oncoming_taxi","aerial_tramway","mountain_cableway","suspension_railway","railway_car","train","monorail","bullettrain_side","bullettrain_front","light_rail","mountain_railway","steam_locomotive","train2","metro","tram","station","helicopter","small_airplane","airplane","airplane_departure","airplane_arriving","boat","motor_boat","speedboat","ferry","passenger_ship","rocket","satellite","seat","anchor","construction","fuelpump","busstop","vertical_traffic_light","traffic_light","checkered_flag","ship","ferris_wheel","roller_coaster","carousel_horse","building_construction","foggy","tokyo_tower","factory","fountain","rice_scene","mountain","snow_capped_mountain","mount_fuji","volcano","japan","camping","tent","national_park","motorway","railway_track","sunrise","sunrise_over_mountains","desert","beach_with_umbrella","desert_island","city_sunrise","city_sunset","cityscape","night_with_stars","bridge_at_night","milky_way","stars","sparkler","fireworks","rainbow","house_buildings","european_castle","japanese_castle","stadium","statue_of_liberty","house","house_with_garden","derelict_house_building","office","department_store","post_office","european_post_office","hospital","bank","hotel","convenience_store","school","love_hotel","wedding","classical_building","church","mosque","synagogue","kaaba","shinto_shrine"]},{name:"objects",display_name:TS.i18n.t("Objetos","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_lightbulb_o"></i></span>',tab_icon:"ts_icon_lightbulb_o",tab_icon_name:"lightbulb_o",emoji_names:["watch","iphone","calling","computer","keyboard","desktop_computer","printer","three_button_mouse","trackball","joystick","compression","minidisc","floppy_disk","cd","dvd","vhs","camera","camera_with_flash","video_camera","movie_camera","film_projector","film_frames","telephone_receiver","phone","pager","fax","tv","radio","studio_microphone","level_slider","control_knobs","stopwatch","timer_clock","alarm_clock","mantelpiece_clock","hourglass_flowing_sand","hourglass","satellite_antenna","battery","electric_plug","bulb","flashlight","candle","wastebasket","oil_drum","money_with_wings","dollar","yen","euro","pound","moneybag","credit_card","gem","scales","wrench","hammer","hammer_and_pick","hammer_and_wrench","pick","nut_and_bolt","gear","chains","gun","bomb","hocho","dagger_knife","crossed_swords","shield","smoking","skull_and_crossbones","coffin","funeral_urn","amphora","crystal_ball","prayer_beads","barber","alembic","telescope","microscope","hole","pill","syringe","thermometer","label","bookmark","toilet","shower","bathtub","key","old_key","couch_and_lamp","sleeping_accommodation","bed","door","bellhop_bell","frame_with_picture","world_map","umbrella_on_ground","moyai","shopping_bags","balloon","flags","ribbon","gift","confetti_ball","tada","dolls","wind_chime","crossed_flags","izakaya_lantern","email","envelope_with_arrow","incoming_envelope","e-mail","love_letter","postbox","mailbox_closed","mailbox","mailbox_with_mail","mailbox_with_no_mail","package","postal_horn","inbox_tray","outbox_tray","scroll","page_with_curl","bookmark_tabs","bar_chart","chart_with_upwards_trend","chart_with_downwards_trend","page_facing_up","date","calendar","spiral_calendar_pad","card_index","card_file_box","ballot_box_with_ballot","file_cabinet","clipboard","spiral_note_pad","file_folder","open_file_folder","card_index_dividers","rolled_up_newspaper","newspaper","notebook","closed_book","green_book","blue_book","orange_book","notebook_with_decorative_cover","ledger","books","book","link","paperclip","linked_paperclips","scissors","triangular_ruler","straight_ruler","pushpin","round_pushpin","triangular_flag_on_post","waving_white_flag","waving_black_flag","closed_lock_with_key","lock","unlock","lock_with_ink_pen","lower_left_ballpoint_pen","lower_left_fountain_pen","black_nib","memo","pencil2","lower_left_crayon","lower_left_paintbrush","mag","mag_right"]},{name:"symbols",display_name:TS.i18n.t("Símbolos","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_heart_o"></i></span>',tab_icon:"ts_icon_heart_o",tab_icon_name:"heart_o",emoji_names:["heart","yellow_heart","green_heart","blue_heart","purple_heart","broken_heart","heavy_heart_exclamation_mark_ornament","two_hearts","revolving_hearts","heartbeat","heartpulse","sparkling_heart","cupid","gift_heart","heart_decoration","peace_symbol","latin_cross","star_and_crescent","om_symbol","wheel_of_dharma","star_of_david","six_pointed_star","menorah_with_nine_branches","yin_yang","orthodox_cross","place_of_worship","ophiuchus","aries","taurus","gemini","cancer","leo","virgo","libra","scorpius","sagittarius","capricorn","aquarius","pisces","id","atom_symbol","u7a7a","u5272","radioactive_sign","biohazard_sign","mobile_phone_off","vibration_mode","u6709","u7121","u7533","u55b6","u6708","eight_pointed_black_star","vs","accept","white_flower","ideograph_advantage","secret","congratulations","u5408","u6e80","u7981","a","b","ab","cl","o2","sos","no_entry","name_badge","no_entry_sign","x","o","anger","hotsprings","no_pedestrians","do_not_litter","no_bicycles","non-potable_water","underage","no_mobile_phones","exclamation","grey_exclamation","question","grey_question","bangbang","interrobang","100","low_brightness","high_brightness","trident","fleur_de_lis","part_alternation_mark","warning","children_crossing","beginner","recycle","u6307","chart","sparkle","eight_spoked_asterisk","eject","negative_squared_cross_mark","white_check_mark","diamond_shape_with_a_dot_inside","cyclone","loop","globe_with_meridians","m","atm","sa","passport_control","customs","baggage_claim","left_luggage","wheelchair","no_smoking","wc","parking","potable_water","mens","womens","baby_symbol","restroom","put_litter_in_its_place","cinema","signal_strength","koko","ng","ok","up","cool","new","free","zero","one","two","three","four","five","six","seven","eight","nine","keycap_ten","keycap_star","1234","arrow_forward","double_vertical_bar","black_right_pointing_triangle_with_double_vertical_bar","black_square_for_stop","black_circle_for_record","black_right_pointing_double_triangle_with_vertical_bar","black_left_pointing_double_triangle_with_vertical_bar","fast_forward","rewind","twisted_rightwards_arrows","repeat","repeat_one","arrow_backward","arrow_up_small","arrow_down_small","arrow_double_up","arrow_double_down","arrow_right","arrow_left","arrow_up","arrow_down","arrow_upper_right","arrow_lower_right","arrow_lower_left","arrow_upper_left","arrow_up_down","left_right_arrow","arrows_counterclockwise","arrow_right_hook","leftwards_arrow_with_hook","arrow_heading_up","arrow_heading_down","hash","information_source","abc","abcd","capital_abcd","symbols","musical_note","notes","wavy_dash","curly_loop","heavy_check_mark","arrows_clockwise","heavy_plus_sign","heavy_minus_sign","heavy_division_sign","heavy_multiplication_x","heavy_dollar_sign","currency_exchange","copyright","registered","tm","end","back","on","top","soon","ballot_box_with_check","radio_button","white_circle","black_circle","red_circle","large_blue_circle","small_orange_diamond","small_blue_diamond","large_orange_diamond","large_blue_diamond","small_red_triangle","black_small_square","white_small_square","black_large_square","white_large_square","small_red_triangle_down","black_medium_square","white_medium_square","black_medium_small_square","white_medium_small_square","black_square_button","white_square_button","speaker","sound","loud_sound","mute","mega","loudspeaker","bell","no_bell","black_joker","mahjong","spades","clubs","hearts","diamonds","flower_playing_cards","thought_balloon","right_anger_bubble","speech_balloon","left_speech_bubble","clock1","clock2","clock3","clock4","clock5","clock6","clock7","clock8","clock9","clock10","clock11","clock12","clock130","clock230","clock330","clock430","clock530","clock630","clock730","clock830","clock930","clock1030","clock1130","clock1230"]},{name:"flags",display_name:TS.i18n.t("Banderas","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_flag"></i></span>',tab_icon:"ts_icon_flag",tab_icon_name:"flag",emoji_names:["flag-ac","flag-ad","flag-ae","flag-af","flag-ag","flag-ai","flag-al","flag-am","flag-ao","flag-aq","flag-ar","flag-as","flag-at","flag-au","flag-aw","flag-ax","flag-az","flag-ba","flag-bb","flag-bd","flag-be","flag-bf","flag-bg","flag-bh","flag-bi","flag-bj","flag-bl","flag-bm","flag-bn","flag-bo","flag-bq","flag-br","flag-bs","flag-bt","flag-bv","flag-bw","flag-by","flag-bz","flag-ca","flag-cc","flag-cd","flag-cf","flag-cg","flag-ch","flag-ci","flag-ck","flag-cl","flag-cm","flag-cn","flag-co","flag-cp","flag-cr","flag-cu","flag-cv","flag-cw","flag-cx","flag-cy","flag-cz","flag-de","flag-dg","flag-dj","flag-dk","flag-dm","flag-do","flag-dz","flag-ea","flag-ec","flag-ee","flag-eg","flag-eh","flag-er","flag-es","flag-et","flag-eu","flag-fi","flag-fj","flag-fk","flag-fm","flag-fo","flag-fr","flag-ga","flag-gb","flag-gd","flag-ge","flag-gf","flag-gg","flag-gh","flag-gi","flag-gl","flag-gm","flag-gn","flag-gp","flag-gq","flag-gr","flag-gs","flag-gt","flag-gu","flag-gw","flag-gy","flag-hk","flag-hm","flag-hn","flag-hr","flag-ht","flag-hu","flag-ic","flag-id","flag-ie","flag-il","flag-im","flag-in","flag-io","flag-iq","flag-ir","flag-is","flag-it","flag-je","flag-jm","flag-jo","flag-jp","flag-ke","flag-kg","flag-kh","flag-ki","flag-km","flag-kn","flag-kp","flag-kr","flag-kw","flag-ky","flag-kz","flag-la","flag-lb","flag-lc","flag-li","flag-lk","flag-lr","flag-ls","flag-lt","flag-lu","flag-lv","flag-ly","flag-ma","flag-mc","flag-md","flag-me","flag-mf","flag-mg","flag-mh","flag-mk","flag-ml","flag-mm","flag-mn","flag-mo","flag-mp","flag-mq","flag-mr","flag-ms","flag-mt","flag-mu","flag-mv","flag-mw","flag-mx","flag-my","flag-mz","flag-na","flag-nc","flag-ne","flag-nf","flag-ng","flag-ni","flag-nl","flag-no","flag-np","flag-nr","flag-nu","flag-nz","flag-om","flag-pa","flag-pe","flag-pf","flag-pg","flag-ph","flag-pk","flag-pl","flag-pm","flag-pn","flag-pr","flag-ps","flag-pt","flag-pw","flag-py","flag-qa","flag-re","flag-ro","flag-rs","flag-ru","flag-rw","flag-sa","flag-sb","flag-sc","flag-sd","flag-se","flag-sg","flag-sh","flag-si","flag-sj","flag-sk","flag-sl","flag-sm","flag-sn","flag-so","flag-sr","flag-ss","flag-st","flag-sv","flag-sx","flag-sy","flag-sz","flag-ta","flag-tc","flag-td","flag-tf","flag-tg","flag-th","flag-tj","flag-tk","flag-tl","flag-tm","flag-tn","flag-to","flag-tr","flag-tt","flag-tv","flag-tw","flag-tz","flag-ua","flag-ug","flag-um","flag-us","flag-uy","flag-uz","flag-va","flag-vc","flag-ve","flag-vg","flag-vi","flag-vn","flag-vu","flag-wf","flag-ws","flag-xk","flag-ye","flag-yt","flag-za","flag-zm","flag-zw"]}];if(!TS.boot_data.feature_update_emoji_to_v4)h.forEach(function(e){TS.emoji.spliceSkinToneVariationsIntoAnArrayOfEmojiNames(e.emoji_names)});var S=function e(){_.find(h,{name:"people"}).emoji_names=["grinning","smiley","smile","grin","laughing","sweat_smile","joy","rolling_on_the_floor_laughing","relaxed","blush","innocent","slightly_smiling_face","upside_down_face","wink","relieved","heart_eyes","kissing_heart","kissing","kissing_smiling_eyes","kissing_closed_eyes","yum","stuck_out_tongue_winking_eye","stuck_out_tongue_closed_eyes","stuck_out_tongue","money_mouth_face","hugging_face","nerd_face","sunglasses","clown_face","face_with_cowboy_hat","smirk","unamused","disappointed","pensive","worried","confused","slightly_frowning_face","white_frowning_face","persevere","confounded","tired_face","weary","triumph","angry","rage","no_mouth","neutral_face","expressionless","hushed","frowning","anguished","open_mouth","astonished","dizzy_face","flushed","scream","fearful","cold_sweat","cry","disappointed_relieved","drooling_face","sob","sweat","sleepy","sleeping","face_with_rolling_eyes","thinking_face","lying_face","grimacing","zipper_mouth_face","nauseated_face","sneezing_face","mask","face_with_thermometer","face_with_head_bandage","smiling_imp","imp","japanese_ogre","japanese_goblin","hankey","ghost","skull","skull_and_crossbones","alien","space_invader","robot_face","jack_o_lantern","smiley_cat","smile_cat","joy_cat","heart_eyes_cat","smirk_cat","kissing_cat","scream_cat","crying_cat_face","pouting_cat","open_hands","raised_hands","clap","pray","handshake","+1","-1","facepunch","fist","left-facing_fist","right-facing_fist","hand_with_index_and_middle_fingers_crossed","v","the_horns","ok_hand","point_left","point_right","point_up_2","point_down","point_up","hand","raised_back_of_hand","raised_hand_with_fingers_splayed","spock-hand","wave","call_me_hand","muscle","middle_finger","writing_hand","selfie","nail_care","ring","lipstick","kiss","lips","tongue","ear","nose","footprints","eye","eyes","speaking_head_in_silhouette","bust_in_silhouette","busts_in_silhouette","baby","boy","girl","man","woman","blond-haired-woman","person_with_blond_hair","older_man","older_woman","man_with_gua_pi_mao","woman-wearing-turban","man_with_turban","female-police-officer","cop","female-construction-worker","construction_worker","female-guard","guardsman","female-detective","sleuth_or_spy","female-doctor","male-doctor","female-farmer","male-farmer","female-cook","male-cook","female-student","male-student","female-singer","male-singer","female-teacher","male-teacher","female-factory-worker","male-factory-worker","female-technologist","male-technologist","female-office-worker","male-office-worker","female-mechanic","male-mechanic","female-scientist","male-scientist","female-artist","male-artist","female-firefighter","male-firefighter","female-pilot","male-pilot","female-astronaut","male-astronaut","female-judge","male-judge","mother_christmas","santa","princess","prince","bride_with_veil","man_in_tuxedo","angel","pregnant_woman","woman-bowing","bow","information_desk_person","man-tipping-hand","no_good","man-gesturing-no","ok_woman","man-gesturing-ok","raising_hand","man-raising-hand","face_palm","woman-facepalming","man-facepalming","shrug","woman-shrugging","man-shrugging","person_with_pouting_face","man-pouting","person_frowning","man-frowning","haircut","man-getting-haircut","massage","man-getting-massage","man_in_business_suit_levitating","dancer","man_dancing","dancers","man-with-bunny-ears-partying","woman-walking","walking","woman-running","runner","couple","two_women_holding_hands","two_men_holding_hands","couple_with_heart","woman-heart-woman","man-heart-man","couplekiss","woman-kiss-woman","man-kiss-man","family","man-woman-girl","man-woman-girl-boy","man-woman-boy-boy","man-woman-girl-girl","woman-woman-boy","woman-woman-girl","woman-woman-girl-boy","woman-woman-boy-boy","woman-woman-girl-girl","man-man-boy","man-man-girl","man-man-girl-boy","man-man-boy-boy","man-man-girl-girl","woman-boy","woman-girl","woman-girl-boy","woman-boy-boy","woman-girl-girl","man-boy","man-girl","man-girl-boy","man-boy-boy","man-girl-girl","womans_clothes","shirt","jeans","necktie","dress","bikini","kimono","high_heel","sandal","boot","mans_shoe","athletic_shoe","womans_hat","tophat","mortar_board","crown","helmet_with_white_cross","school_satchel","pouch","purse","handbag","briefcase","eyeglasses","dark_sunglasses","closed_umbrella","umbrella","man-woman-boy","woman-heart-man","woman-kiss-man","male-police-officer","blond-haired-man","man-wearing-turban","male-construction-worker","male-guard","male-detective","woman-with-bunny-ears-partying","man-running","woman-getting-massage","woman-getting-haircut","man-walking","woman-tipping-hand","woman-gesturing-no","woman-gesturing-ok","man-bowing","woman-raising-hand","woman-frowning","woman-pouting"];_.find(h,{name:"nature"}).emoji_names=["dog","cat","mouse","hamster","rabbit","fox_face","bear","panda_face","koala","tiger","lion_face","cow","pig","pig_nose","frog","monkey_face","see_no_evil","hear_no_evil","speak_no_evil","monkey","chicken","penguin","bird","baby_chick","hatching_chick","hatched_chick","duck","eagle","owl","bat","wolf","boar","horse","unicorn_face","bee","bug","butterfly","snail","shell","beetle","ant","spider","spider_web","turtle","snake","lizard","scorpion","crab","squid","octopus","shrimp","tropical_fish","fish","blowfish","dolphin","shark","whale","whale2","crocodile","leopard","tiger2","water_buffalo","ox","cow2","deer","dromedary_camel","camel","elephant","rhinoceros","gorilla","racehorse","pig2","goat","ram","sheep","dog2","poodle","cat2","rooster","turkey","dove_of_peace","rabbit2","mouse2","rat","chipmunk","feet","dragon","dragon_face","cactus","christmas_tree","evergreen_tree","deciduous_tree","palm_tree","seedling","herb","shamrock","four_leaf_clover","bamboo","tanabata_tree","leaves","fallen_leaf","maple_leaf","mushroom","ear_of_rice","bouquet","tulip","rose","wilted_flower","sunflower","blossom","cherry_blossom","hibiscus","earth_americas","earth_africa","earth_asia","full_moon","waning_gibbous_moon","last_quarter_moon","waning_crescent_moon","new_moon","waxing_crescent_moon","first_quarter_moon","moon","new_moon_with_face","full_moon_with_face","sun_with_face","first_quarter_moon_with_face","last_quarter_moon_with_face","crescent_moon","dizzy","star","star2","sparkles","zap","fire","boom","comet","sunny","mostly_sunny","partly_sunny","barely_sunny","partly_sunny_rain","rainbow","cloud","rain_cloud","thunder_cloud_and_rain","lightning","snow_cloud","snowman","snowman_without_snow","snowflake","wind_blowing_face","dash","tornado","fog","ocean","droplet","sweat_drops","umbrella_with_rain_drops"];_.find(h,{name:"food_and_drink"}).emoji_names=["green_apple","apple","pear","tangerine","lemon","banana","watermelon","grapes","strawberry","melon","cherries","peach","pineapple","kiwifruit","avocado","tomato","eggplant","cucumber","carrot","corn","hot_pepper","potato","sweet_potato","chestnut","peanuts","honey_pot","croissant","bread","baguette_bread","cheese_wedge","egg","fried_egg","bacon","pancakes","fried_shrimp","poultry_leg","meat_on_bone","pizza","hotdog","hamburger","fries","stuffed_flatbread","taco","burrito","green_salad","shallow_pan_of_food","spaghetti","ramen","stew","fish_cake","sushi","bento","curry","rice","rice_ball","rice_cracker","oden","dango","shaved_ice","ice_cream","icecream","cake","birthday","custard","lollipop","candy","chocolate_bar","popcorn","doughnut","cookie","glass_of_milk","baby_bottle","coffee","tea","sake","beer","beers","clinking_glasses","wine_glass","tumbler_glass","cocktail","tropical_drink","champagne","spoon","fork_and_knife","knife_fork_plate"];_.find(h,{name:"activity"}).emoji_names=["soccer","basketball","football","baseball","tennis","volleyball","rugby_football","8ball","table_tennis_paddle_and_ball","badminton_racquet_and_shuttlecock","goal_net","ice_hockey_stick_and_puck","field_hockey_stick_and_ball","cricket_bat_and_ball","golf","bow_and_arrow","fishing_pole_and_fish","boxing_glove","martial_arts_uniform","ice_skate","ski","skier","snowboarder","woman-lifting-weights","weight_lifter","fencer","wrestlers","woman-wrestling","man-wrestling","person_doing_cartwheel","woman-cartwheeling","man-cartwheeling","woman-bouncing-ball","person_with_ball","handball","woman-playing-handball","man-playing-handball","woman-golfing","golfer","woman-surfing","surfer","woman-swimming","swimmer","water_polo","woman-playing-water-polo","man-playing-water-polo","woman-rowing-boat","rowboat","horse_racing","woman-biking","bicyclist","woman-mountain-biking","mountain_bicyclist","running_shirt_with_sash","sports_medal","medal","first_place_medal","second_place_medal","third_place_medal","trophy","rosette","reminder_ribbon","ticket","admission_tickets","circus_tent","juggling","woman-juggling","man-juggling","performing_arts","art","clapper","microphone","headphones","musical_score","musical_keyboard","drum_with_drumsticks","saxophone","trumpet","guitar","violin","game_die","dart","bowling","video_game","slot_machine","man-bouncing-ball","man-lifting-weights","man-golfing","man-surfing","man-swimming","man-rowing-boat","man-biking","man-mountain-biking"];_.find(h,{name:"travel_and_places"}).emoji_names=["car","taxi","blue_car","bus","trolleybus","racing_car","police_car","ambulance","fire_engine","minibus","truck","articulated_lorry","tractor","scooter","bike","motor_scooter","racing_motorcycle","rotating_light","oncoming_police_car","oncoming_bus","oncoming_automobile","oncoming_taxi","aerial_tramway","mountain_cableway","suspension_railway","railway_car","train","mountain_railway","monorail","bullettrain_side","bullettrain_front","light_rail","steam_locomotive","train2","metro","tram","station","helicopter","small_airplane","airplane","airplane_departure","airplane_arriving","rocket","satellite","seat","canoe","boat","motor_boat","speedboat","passenger_ship","ferry","ship","anchor","construction","fuelpump","busstop","vertical_traffic_light","traffic_light","world_map","moyai","statue_of_liberty","fountain","tokyo_tower","european_castle","japanese_castle","stadium","ferris_wheel","roller_coaster","carousel_horse","umbrella_on_ground","beach_with_umbrella","desert_island","mountain","snow_capped_mountain","mount_fuji","volcano","desert","camping","tent","railway_track","motorway","building_construction","factory","house","house_with_garden","house_buildings","derelict_house_building","office","department_store","post_office","european_post_office","hospital","bank","hotel","convenience_store","school","love_hotel","wedding","classical_building","church","mosque","synagogue","kaaba","shinto_shrine","japan","rice_scene","national_park","sunrise","sunrise_over_mountains","stars","sparkler","fireworks","city_sunrise","city_sunset","cityscape","night_with_stars","milky_way","bridge_at_night","foggy"];_.find(h,{name:"objects"}).emoji_names=["watch","iphone","calling","computer","keyboard","desktop_computer","printer","three_button_mouse","trackball","joystick","compression","minidisc","floppy_disk","cd","dvd","vhs","camera","camera_with_flash","video_camera","movie_camera","film_projector","film_frames","telephone_receiver","phone","pager","fax","tv","radio","studio_microphone","level_slider","control_knobs","stopwatch","timer_clock","alarm_clock","mantelpiece_clock","hourglass","hourglass_flowing_sand","satellite_antenna","battery","electric_plug","bulb","flashlight","candle","wastebasket","oil_drum","money_with_wings","dollar","yen","euro","pound","moneybag","credit_card","gem","scales","wrench","hammer","hammer_and_pick","hammer_and_wrench","pick","nut_and_bolt","gear","chains","gun","bomb","hocho","dagger_knife","crossed_swords","shield","smoking","coffin","funeral_urn","amphora","crystal_ball","prayer_beads","barber","alembic","telescope","microscope","hole","pill","syringe","thermometer","toilet","potable_water","shower","bathtub","bath","bellhop_bell","key","old_key","door","couch_and_lamp","bed","sleeping_accommodation","frame_with_picture","shopping_bags","shopping_trolley","gift","balloon","flags","ribbon","confetti_ball","tada","dolls","izakaya_lantern","wind_chime","email","envelope_with_arrow","incoming_envelope","e-mail","love_letter","inbox_tray","outbox_tray","package","label","mailbox_closed","mailbox","mailbox_with_mail","mailbox_with_no_mail","postbox","postal_horn","scroll","page_with_curl","page_facing_up","bookmark_tabs","bar_chart","chart_with_upwards_trend","chart_with_downwards_trend","spiral_note_pad","spiral_calendar_pad","calendar","date","card_index","card_file_box","ballot_box_with_ballot","file_cabinet","clipboard","file_folder","open_file_folder","card_index_dividers","rolled_up_newspaper","newspaper","notebook","notebook_with_decorative_cover","ledger","closed_book","green_book","blue_book","orange_book","books","book","bookmark","link","paperclip","linked_paperclips","triangular_ruler","straight_ruler","pushpin","round_pushpin","scissors","lower_left_ballpoint_pen","lower_left_fountain_pen","black_nib","lower_left_paintbrush","lower_left_crayon","memo","pencil2","mag","mag_right","lock_with_ink_pen","closed_lock_with_key","lock","unlock"];_.find(h,{name:"symbols"}).emoji_names=["heart","yellow_heart","green_heart","blue_heart","purple_heart","black_heart","broken_heart","heavy_heart_exclamation_mark_ornament","two_hearts","revolving_hearts","heartbeat","heartpulse","sparkling_heart","cupid","gift_heart","heart_decoration","peace_symbol","latin_cross","star_and_crescent","om_symbol","wheel_of_dharma","star_of_david","six_pointed_star","menorah_with_nine_branches","yin_yang","orthodox_cross","place_of_worship","ophiuchus","aries","taurus","gemini","cancer","leo","virgo","libra","scorpius","sagittarius","capricorn","aquarius","pisces","id","atom_symbol","accept","radioactive_sign","biohazard_sign","mobile_phone_off","vibration_mode","u6709","u7121","u7533","u55b6","u6708","eight_pointed_black_star","vs","white_flower","ideograph_advantage","secret","congratulations","u5408","u6e80","u5272","u7981","a","b","ab","cl","o2","sos","x","o","octagonal_sign","no_entry","name_badge","no_entry_sign","100","anger","hotsprings","no_pedestrians","do_not_litter","no_bicycles","non-potable_water","underage","no_mobile_phones","no_smoking","exclamation","grey_exclamation","question","grey_question","bangbang","interrobang","low_brightness","high_brightness","part_alternation_mark","warning","children_crossing","trident","fleur_de_lis","beginner","recycle","white_check_mark","u6307","chart","sparkle","eight_spoked_asterisk","negative_squared_cross_mark","globe_with_meridians","diamond_shape_with_a_dot_inside","m","cyclone","zzz","atm","wc","wheelchair","parking","u7a7a","sa","passport_control","customs","baggage_claim","left_luggage","mens","womens","baby_symbol","restroom","put_litter_in_its_place","cinema","signal_strength","koko","symbols","information_source","abc","abcd","capital_abcd","ng","ok","up","cool","new","free","zero","one","two","three","four","five","six","seven","eight","nine","keycap_ten","1234","hash","keycap_star","arrow_forward","double_vertical_bar","black_right_pointing_triangle_with_double_vertical_bar","black_square_for_stop","eject","black_circle_for_record","black_right_pointing_double_triangle_with_vertical_bar","black_left_pointing_double_triangle_with_vertical_bar","fast_forward","rewind","arrow_double_up","arrow_double_down","arrow_backward","arrow_up_small","arrow_down_small","arrow_right","arrow_left","arrow_up","arrow_down","arrow_upper_right","arrow_lower_right","arrow_lower_left","arrow_upper_left","arrow_up_down","left_right_arrow","arrow_right_hook","leftwards_arrow_with_hook","arrow_heading_up","arrow_heading_down","twisted_rightwards_arrows","repeat","repeat_one","arrows_counterclockwise","arrows_clockwise","musical_note","notes","heavy_plus_sign","heavy_minus_sign","heavy_division_sign","heavy_multiplication_x","heavy_dollar_sign","currency_exchange","tm","copyright","registered","wavy_dash","curly_loop","loop","end","back","on","top","soon","heavy_check_mark","ballot_box_with_check","radio_button","white_circle","black_circle","red_circle","large_blue_circle","small_red_triangle","small_red_triangle_down","small_orange_diamond","small_blue_diamond","large_orange_diamond","large_blue_diamond","white_square_button","black_square_button","black_small_square","white_small_square","black_medium_small_square","white_medium_small_square","black_medium_square","white_medium_square","black_large_square","white_large_square","speaker","mute","sound","loud_sound","bell","no_bell","mega","loudspeaker","eye-in-speech-bubble","speech_balloon","left_speech_bubble","thought_balloon","right_anger_bubble","spades","clubs","hearts","diamonds","black_joker","flower_playing_cards","mahjong","clock1","clock2","clock3","clock4","clock5","clock6","clock7","clock8","clock9","clock10","clock11","clock12","clock130","clock230","clock330","clock430","clock530","clock630","clock730","clock830","clock930","clock1030","clock1130","clock1230","female_sign","male_sign","staff_of_aesculapius"];_.find(h,{name:"flags"}).emoji_names=["checkered_flag","crossed_flags","flag-ac","flag-ad","flag-ae","flag-af","flag-ag","flag-ai","flag-al","flag-am","flag-ao","flag-aq","flag-ar","flag-as","flag-at","flag-au","flag-aw","flag-ax","flag-az","flag-ba","flag-bb","flag-bd","flag-be","flag-bf","flag-bg","flag-bh","flag-bi","flag-bj","flag-bl","flag-bm","flag-bn","flag-bo","flag-bq","flag-br","flag-bs","flag-bt","flag-bv","flag-bw","flag-by","flag-bz","flag-ca","flag-cc","flag-cd","flag-cf","flag-cg","flag-ch","flag-ci","flag-ck","flag-cl","flag-cm","flag-cn","flag-co","flag-cp","flag-cr","flag-cu","flag-cv","flag-cw","flag-cx","flag-cy","flag-cz","flag-de","flag-dg","flag-dj","flag-dk","flag-dm","flag-do","flag-dz","flag-ea","flag-ec","flag-ee","flag-eg","flag-eh","flag-er","flag-es","flag-et","flag-eu","flag-fi","flag-fj","flag-fk","flag-fm","flag-fo","flag-fr","flag-ga","flag-gb","flag-gd","flag-ge","flag-gf","flag-gg","flag-gh","flag-gi","flag-gl","flag-gm","flag-gn","flag-gp","flag-gq","flag-gr","flag-gs","flag-gt","flag-gu","flag-gw","flag-gy","flag-hk","flag-hm","flag-hn","flag-hr","flag-ht","flag-hu","flag-ic","flag-id","flag-ie","flag-il","flag-im","flag-in","flag-io","flag-iq","flag-ir","flag-is","flag-it","flag-je","flag-jm","flag-jo","flag-jp","flag-ke","flag-kg","flag-kh","flag-ki","flag-km","flag-kn","flag-kp","flag-kr","flag-kw","flag-ky","flag-kz","flag-la","flag-lb","flag-lc","flag-li","flag-lk","flag-lr","flag-ls","flag-lt","flag-lu","flag-lv","flag-ly","flag-ma","flag-mc","flag-md","flag-me","flag-mf","flag-mg","flag-mh","flag-mk","flag-ml","flag-mm","flag-mn","flag-mo","flag-mp","flag-mq","flag-mr","flag-ms","flag-mt","flag-mu","flag-mv","flag-mw","flag-mx","flag-my","flag-mz","flag-na","flag-nc","flag-ne","flag-nf","flag-ng","flag-ni","flag-nl","flag-no","flag-np","flag-nr","flag-nu","flag-nz","flag-om","flag-pa","flag-pe","flag-pf","flag-pg","flag-ph","flag-pk","flag-pl","flag-pm","flag-pn","flag-pr","flag-ps","flag-pt","flag-pw","flag-py","flag-qa","flag-re","flag-ro","flag-rs","flag-ru","flag-rw","flag-sa","flag-sb","flag-sc","flag-sd","flag-se","flag-sg","flag-sh","flag-si","flag-sj","flag-sk","flag-sl","flag-sm","flag-sn","flag-so","flag-sr","flag-ss","flag-st","flag-sv","flag-sx","flag-sy","flag-sz","flag-ta","flag-tc","flag-td","flag-tf","flag-tg","flag-th","flag-tj","flag-tk","flag-tl","flag-tm","flag-tn","flag-to","flag-tr","flag-tt","flag-tv","flag-tw","flag-tz","flag-ua","flag-ug","flag-um","flag-un","flag-us","flag-uy","flag-uz","flag-va","flag-vc","flag-ve","flag-vg","flag-vi","flag-vn","flag-vu","flag-wf","flag-ws","flag-xk","flag-ye","flag-yt","flag-za","flag-zm","flag-zw","rainbow-flag","triangular_flag_on_post","waving_black_flag","waving_white_flag"]};var b=function e(){TS.emoji.setUpEmoji()};var T=function e(){if(TS.client&&TS.model.ms_logged_in_once){TS.client.msg_pane.rebuildMsgsWithReason("_toggleJumbomoji");TS.view.rebuildMentions();TS.view.rebuildStars();if(TS.model.previewed_file_id)TS.client.ui.files.rebuildFilePreview()}};var v=function e(){if(g.unaltered_data){g.data=_.cloneDeep(g.unaltered_data);g.inits={}}g.ts_init_colons()};var w=function e(){TS.emoji.setEmojiMode();TS.emoji.makeMenuLists();var a=!!TS.model.ms_logged_in_once;var n=true;if(TS.client&&a)TS.client.ui.rebuildAll(n)};var y=function e(a,n,t){if(!g)return;var o=TS.storage.fetchCustomEmoji();if(!o){TS.emoji.resetUpEmoji();return}if("undefined"===typeof n){delete TS.model.emoji_use[a];if(!o.data.hasOwnProperty(a))return;delete o.data[a];_.remove(TS.model.emoji_map,{name:a})}else o.data[a]=n;TS.model.emoji_cache_ts=t;TS.storage.storeCustomEmoji({data:o.data,cache_ts:TS.model.emoji_cache_ts});v();TS.emoji.ingestCustoms(o.data);w()};var k=function e(){var a=TS.model.all_custom_emoji;if(TS.boot_data.feature_localization&&TS.i18n.locale()!==TS.interop.I18n.DEFAULT_LOCALE)a=E(a);return a};var j=function e(a){return!!o[a]};var x=function e(a){return TS.prefs&&TS.prefs.getPref(a)};var E=function e(a){return _.filter(a,function(e){return!j(e)})};var C=function e(){var a=TS.ui.frecency.getMostCommonWithPrefix(r,s);a=_.map(a,"id");if(!a.length)return[];var n=TS.emoji.getChosenSkinTone(!!TS.boot_data.feature_localization);var t=_.keyBy(TS.model.emoji_map,"id");var o=[];return _.chain(a).map(function(e){var a=t[e];if(!a)return null;var r=a.display_name;if(n&&a.is_skin)r=r+"::"+n;var i=p[r];if(!i)return null;if(TS.emoji.emojiHasAliases(i)){var s=i.names.split(" ");for(var l=0;l<s.length;l++){var c=TS.emoji.stripWrappingColons(s[l]);if(_.includes(o,c))return null}}o.push(r);return r}).compact().take(i).value()}})()}},[2363]);